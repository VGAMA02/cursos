if (self.CavalryLogger) { CavalryLogger.start_js(["jkj0E+q"]); }

__d("MWNewChatTabContainerPreload.re",["MWNewChatTabContainerPreload.bs"],(function(a,b,c,d,e,f){a=b("MWNewChatTabContainerPreload.bs").useHook;f.useHook=a}),null);
__d("useCometHomeOpenNewChatTab",["MWChatOpenNewTab.re","MWNewChatTabContainerPreload.re","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback;function a(){var a=d("MWChatOpenNewTab.re").useHook.apply(d("MWChatOpenNewTab.re"),arguments),b=d("MWNewChatTabContainerPreload.re").useHook(),c=b[0],e=b[1],f=h(function(){a()},[a]);return{onHoverIn:c,onHoverOut:e,onPress:f}}g["default"]=a}),98);
__d("TopOfFeedContext",["StoriesGating","react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");c={topOfFeedEnabled:(b=d("StoriesGating").isTopOfFeedUnitEnabled())!=null?b:!1};e=a.createContext(c);g["default"]=e}),98);
__d("VideoPlayerWindowUtils",[],(function(a,b,c,d,e,f){a=window.WebKitMediaKeys;f.WebKitMediaKeys=a}),66);
__d("VideoPlayerFairplayLicenseHandler",["EventEmitter","FBLogger","JSResourceForInteraction","Promise","SubscriptionsHandler","VideoPlayerWindowUtils","cr:1335238","gkx","unrecoverableViolation"],(function(a,b,c,d,e,f,g){var h=c("JSResourceForInteraction")("XHRRequest").__setRef("VideoPlayerFairplayLicenseHandler");a=function(a){babelHelpers.inheritsLoose(e,a);function e(d,e,f,g){var h;h=a.call(this)||this;h.$VideoPlayerFairplayLicenseHandler5=new(c("SubscriptionsHandler"))();h.$VideoPlayerFairplayLicenseHandler1=e;h.$VideoPlayerFairplayLicenseHandler2=d;h.$VideoPlayerFairplayLicenseHandler3=f;h.$VideoPlayerFairplayLicenseHandler4=g;h.$VideoPlayerFairplayLicenseHandler5.addSubscriptions(b("cr:1335238").listen(e,"webkitneedkey",h.$VideoPlayerFairplayLicenseHandler6.bind(babelHelpers.assertThisInitialized(h))));return h}var f=e.prototype;f.destroy=function(){this.$VideoPlayerFairplayLicenseHandler5.release(),this.$VideoPlayerFairplayLicenseHandler1=null,this.$VideoPlayerFairplayLicenseHandler4=null};f.$VideoPlayerFairplayLicenseHandler6=function(a){var e=this;a=a.initData;var f=new Uint16Array(a.buffer);f=String.fromCharCode.apply(null,f).substring(8);var g,h=this.$VideoPlayerFairplayLicenseHandler1;if(h.webkitKeys==null){var i=d("VideoPlayerWindowUtils").WebKitMediaKeys;if(i!=null&&i.isTypeSupported("com.apple.fps.1_0","video/mp4"))g="com.apple.fps.1_0";else throw c("unrecoverableViolation")("Key System not supported","FairplayLicenseHandler");this.$VideoPlayerFairplayLicenseHandler1.webkitSetMediaKeys(new i(g))}if(h.webkitKeys==null)throw c("unrecoverableViolation")("Could not create MediaKeys","FairplayLicenseHandler");i=this.concatInitDataIdAndCertificate(a,f);g=this.$VideoPlayerFairplayLicenseHandler1.webkitKeys.createSession("video/mp4",i);if(!g)throw c("unrecoverableViolation")("Could not create key session",g);g.contentId=f;this.$VideoPlayerFairplayLicenseHandler5.addSubscriptions(b("cr:1335238").listen(g,"webkitkeymessage",this.$VideoPlayerFairplayLicenseHandler7.bind(this)),b("cr:1335238").listen(g,"webkitkeyerror",function(a){e.emit("error",{error:"webkitkeyerror"})}))};f.concatInitDataIdAndCertificate=function(a,b){var c=new Uint16Array(new ArrayBuffer(b.length*2));for(var d=0,e=b.length;d<e;d++)c[d]=b.charCodeAt(d);b=window.atob(this.$VideoPlayerFairplayLicenseHandler2);d=new Uint8Array(new ArrayBuffer(b.length));for(var e=0;e<b.length;e++)d[e]=b.charCodeAt(e);e=0;b=new ArrayBuffer(a.byteLength+4+c.byteLength+4+d.byteLength);var f=new DataView(b),g=new Uint8Array(b,e,a.byteLength);g.set(a);e+=a.byteLength;f.setUint32(e,c.byteLength,!0);e+=4;g=new Uint16Array(b,e,c.byteLength/2);g.set(c);e+=g.byteLength;f.setUint32(e,d.byteLength,!0);e+=4;a=new Uint8Array(b,e,d.byteLength);a.set(d);return new Uint8Array(b,0,b.byteLength)};f.$VideoPlayerFairplayLicenseHandler7=function(a){var c=this,d=a.target;a=a.message;var e=window.btoa(String.fromCharCode.apply(null,new Uint8Array(a))),f=this.$VideoPlayerFairplayLicenseHandler4[d.contentId];b("Promise").resolve().then(function(){return h.load()}).then(function(a){new a(f).setMethod("POST").setRawData(e).setResponseType("text").setResponseHandler(function(a){c.$VideoPlayerFairplayLicenseHandler8(a,d)}).setRequestHeader("Content-type","application/x-www-form-urlencoded").setErrorHandler(function(){c.$VideoPlayerFairplayLicenseHandler9()}).send()})["catch"](function(){c.$VideoPlayerFairplayLicenseHandler9()})};f.$VideoPlayerFairplayLicenseHandler8=function(a,b){var d=!1;try{var e=window.atob(a),f=new Uint8Array(new ArrayBuffer(e.length*2));for(var g=0,h=e.length;g<h;g++){var i=e.charCodeAt(g);(i<0||i>255)&&(d=!0);f[g]=i}b.update(f)}catch(b){i=b;if(c("gkx")("3318")){g=typeof a!=="string"?"response was "+typeof a:a===""?"response was empty string":d?"key character overflow":"key potentially malformed";e=c("FBLogger")("VideoPlayerFairplayLicenseHandler");i instanceof Error&&(e=e.catching(i));e.warn("Fairplay License update failed: %s - %s",String(i),g);this.emit("error",{error:"Fairplay License update failed"})}else throw i}};f.$VideoPlayerFairplayLicenseHandler9=function(){this.emit("error",{error:"Fairplay License fetch failed"})};return e}(c("EventEmitter"));g["default"]=a}),98);