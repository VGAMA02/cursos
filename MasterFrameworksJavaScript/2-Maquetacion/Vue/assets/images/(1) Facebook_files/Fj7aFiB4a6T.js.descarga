if (self.CavalryLogger) { CavalryLogger.start_js(["B5cyiwU"]); }

__d("MAWCatQuery.facebook.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"SecureMessageOverWACATGraphResult",kind:"LinkedField",name:"secure_message_over_wa_cat_query",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"encrypted_serialized_cat",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"expiration_time_in_seconds",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MAWCatQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MAWCatQuery",selections:a},params:{id:"3481424548642414",metadata:{},name:"MAWCatQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MAWCatQuery.graphql",["cr:11203"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:11203")}),null);
__d("useArmadilloDogfoodingUpsellNUXQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],b=[{kind:"Variable",name:"nux_id",variableName:"id"}],c={alias:null,args:null,kind:"ScalarField",name:"should_show",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useArmadilloDogfoodingUpsellNUXQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[c],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useArmadilloDogfoodingUpsellNUXQuery",selections:[{alias:null,args:b,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},c,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"4308568139195592",metadata:{},name:"useArmadilloDogfoodingUpsellNUXQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("BaseLineClamp.react",["CSSUserAgentSupports","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={ellipsis:{end:"n7fi1qx3",overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"pmk7jnqg"},multiLine:{display:"a8c37x1j",maxWidth:"d2edcug0",overflowX:"ni8dbmo4",overflowY:"stjgntxs"},oneLine:{display:"a8c37x1j",maxWidth:"d2edcug0",overflowX:"ni8dbmo4",textOverflow:"ltmttdrg",whiteSpace:"g0qnabr5"},root:{display:"a8c37x1j",overflowX:"hihg3u9x",overflowY:"ggxiycxj",position:"l9j0dhe7"}},j=c("CSSUserAgentSupports").webkitLineClamp();function k(a,b,d,e){var f=b+"px";if(a===0)return[d,{lineHeight:f}];if(a===1){var g=h.jsx("span",{className:c("stylex")(i.oneLine,e),children:d});return[g,{lineHeight:f}]}if(j){g=h.jsx("span",{className:c("stylex")(i.multiLine,e),style:{WebkitBoxOrient:"vertical",WebkitLineClamp:a,display:"-webkit-box"},children:d});return[g,{lineHeight:f}]}e={lineHeight:f,maxHeight:b*a+.1,paddingRight:"1em"};g={maxHeight:"calc((100% - "+b*a+"px) * 999)",top:b*(a-1)};f=h.jsxs(h.Fragment,{children:[d,h.jsx("span",{"aria-hidden":!0,className:c("stylex")(i.ellipsis),style:g,children:"\u2026"})]});return[f,e]}function a(a,b){var d=a.baselineAdjustmentXStyle,e=a.children,f=a.dir,g=a.elementType;g=g===void 0?"span":g;var j=a.id,l=a.lineHeight,m=a.lines,n=a.testid;a=a.xstyle;m=k(m,l,e,d);l=m[0];e=m[1];return h.createElement(g,{className:c("stylex")(i.root,a),"data-testid":n,dir:f,id:j,ref:b,style:e},l)}a.displayName=a.name+" [from "+f.id+"]";b=h.forwardRef(a);g["default"]=b}),98);
__d("BaseText.react",["BaseLineClamp.react","BaseTextContext","react","stylex","testID"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={base:{maxWidth:"d2edcug0",minWidth:"hpfvmrgz",whiteSpace:"lis9t9rg",wordBreak:"qv66sw1b",wordWrap:"c1et5uql"},block:{"::before":{content:"keod5gw0",display:"nxhoafnm",height:"aigsh9s9"},"::after":{content:"fe6kdd0r",display:"mau55g9w",height:"c8b282yb"}},inline:{display:"nc684nl6"}},j={1:{"::before":{marginTop:"l2xehx30"}},2:{"::before":{marginTop:"j0e77wai"}},3:{"::before":{marginTop:"tia6h79c"}},4:{"::before":{marginTop:"d9wwppkn"}},5:{"::before":{marginTop:"d3f4x2em"}},6:{"::before":{marginTop:"ns63r2gh"}},7:{"::before":{marginTop:"qg6bub1s"}},8:{"::before":{marginTop:"embtmqzv"}},9:{"::before":{marginTop:"misohx42"}},10:{"::before":{marginTop:"l1jc4y16"}},11:{"::before":{marginTop:"f5m2nfbn"}},12:{"::before":{marginTop:"sxrxs009"}}},k={1:{"::after":{marginBottom:"lpavh2a4"}},2:{"::after":{marginBottom:"l15sfdvx"}},3:{"::after":{marginBottom:"mdeji52x"}},4:{"::after":{marginBottom:"iv3no6db"}},5:{"::after":{marginBottom:"hrzyx87i"}},6:{"::after":{marginBottom:"rwim8176"}},7:{"::after":{marginBottom:"h6olsfn3"}},8:{"::after":{marginBottom:"teo7jy3c"}},9:{"::after":{marginBottom:"lpmm8iu7"}},10:{"::after":{marginBottom:"c9ps7pxp"}},11:{"::after":{marginBottom:"bvvxde1c"}},12:{"::after":{marginBottom:"lkufwejl"}}},l={1:{paddingBottom:"ojkyduve"},2:{paddingBottom:"r8blr3vg"},3:{paddingBottom:"pby63qed"}},m={auto:{},center:{textAlign:"oqcyycmt"},end:{textAlign:"ftzlm3b6"},start:{textAlign:"hzawbc8m"}};function n(a,b){var c=[j[a[0]],k[a[1]]],d=null;a.length===3&&b>0&&(c[1]=k[a[1]+a[2]],d=l[a[2]]);return[c,d]}function a(a){var b=function(b,e){var f=b.alignment;f=f===void 0?"start":f;var g=b.children,j=b.colorName,k=b.dir,l=b.elementType;l=l===void 0?"span":l;var o=b.id,p=b.isDenseModeEnabled;p=p===void 0?!1:p;var q=b.lines;q=q===void 0?0:q;var r=b.styleName,s=b.testid;b=b.xstyle;p=p&&a.stylesForDenseMode?(p=a.stylesForDenseMode[r])!=null?p:a.styles[r]:a.styles[r];var t=p.lineHeight;p=p.style;var u=a.defaultFontFamily;r=a.offsets[r];j=a.colors[j];f=m[f];r=n(r,q);var v=r[0];r=r[1];g=h.jsx(d("BaseTextContext").BaseTextContextProvider,{nested:!0,children:g});var w=d("BaseTextContext").useBaseTextContext();return w&&w.nested?h.createElement(l,babelHelpers["extends"]({},c("testID")(s),{className:c("stylex")(i.base,i.inline,u,p,j,f,b),id:o,ref:e,style:{lineHeight:t+"px"}}),g):h.jsx(c("BaseLineClamp.react"),{baselineAdjustmentXStyle:r,dir:k,elementType:l,id:o,lineHeight:t,lines:q,ref:e,testid:void 0,xstyle:[i.base,i.block,u,p,j,f].concat(v,[b]),children:g})};return h.forwardRef(b)}g.createBaseTextComponent=a}),98);
__d("MAWCatQuery",["MAWCatQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h!==void 0?h:h=b("MAWCatQuery.graphql");c=a;g["default"]=c}),98);
__d("CometMessengerOutlineEntityTextNode",["Outline","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var d=b.prototype;d.getMessengerComposerEntity=function(a){throw c("unrecoverableViolation")("CometMessengerOutlineEntityTextNode does not implement getMessengerComposerEntity","messenger_comet")};return b}(d("Outline").TextNode);g["default"]=a}),98);
__d("useCometOutlineComposition",["react","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useState;function a(a){var b=h(!1),d=b[0],e=b[1];c("useLayoutEffect_SAFE_FOR_SSR")(function(){var b=function(){e(!0)},c=function(){e(!1)};return a.addListener("root",function(a,d){d!==null&&(d.removeEventListener("compositionstart",b),d.removeEventListener("compositionend",c)),a!==null&&(a.addEventListener("compositionstart",b),a.addEventListener("compositionend",c))})},[a]);return d}g["default"]=a}),98);
__d("useCometOutlineIsEmpty",["react","useCometOutlineComposition","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useState;function a(a){var b=i(!0),d=b[0],e=b[1],f=c("useCometOutlineComposition")(a),g=h(function(){var b=a.getTextContent();return b===""&&!f},[f,a]),j=h(function(){var a=g();d!==a&&e(a)},[g,d]);c("useLayoutEffect_SAFE_FOR_SSR")(j,[j]);c("useLayoutEffect_SAFE_FOR_SSR")(function(){return a.addListener("update",j)},[a,j]);return d}g["default"]=a}),98);
__d("FileInputAcceptValues.bs",["fileInputAcceptValues"],(function(a,b,c,d,e,f){"use strict";a=[".mp4",".mov"].concat(b("fileInputAcceptValues").PHOTO);f.allowedVideoTypes=a}),null);
__d("MAWComposerUserMessageRequestInfoText.bs",["fbt","CometLazyDialogTrigger.react","CometPressable.react","JSResourceForInteraction","MWLSActor.bs","MWMessageRequestSharedTexts.bs","MWPTextCommon.react","ReQL.bs","ReQLSubscription.bs","ReQLSuspense.bs","ReQLTable","ReStore.bs","bs_caml","bs_curry","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={rootSmall:{borderTop:"opwvks06",color:"m9osqain",marginTop:"n1l5q3vz",marginEnd:"ad2k81qe",marginBottom:"oygrvhab",marginStart:"f9o22wc5",paddingTop:"l29c1vbm",paddingEnd:"dpri0uem",paddingBottom:"ae35evdt",paddingStart:"pcu7st4i"},rootLarge:{color:"m9osqain",marginTop:"n1l5q3vz",marginEnd:"ad2k81qe",marginBottom:"oygrvhab",marginStart:"f9o22wc5",paddingTop:"l29c1vbm",paddingEnd:"dpri0uem",paddingBottom:"ae35evdt",paddingStart:"pcu7st4i",maxWidth:"bl38xub0"},footer:{marginTop:"knvmm38d",textAlign:"oqcyycmt"}};function a(a){var c=a.thread,d=a.size;a=a.onDeleteThread;var e=c.a,f=b("MWLSActor.bs").useActor(void 0),h=b("ReStore.bs").useHook(void 0),l=b("ReQLSubscription.bs").useArray(j.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQLTable").table(h,"participants").asc,{hd:e,tl:0}),function(a){var c=b("ReQLSuspense.bs").first(b("ReQL.bs").getKeyRange(b("ReQLTable").table(h,"contacts").asc,{hd:a.b,tl:0}));return[a,c]})},[h,JSON.stringify(e)]));l=l.filter(function(a){return b("bs_caml").i64_neq(a[0].b,f)});var m=l.map(function(a){return a[0].b});m=m.find(function(a){return b("bs_caml").i64_neq(a,f)});if(m===void 0)return null;if(l.length===0)return null;var n=g._("Usuario de Facebook");l=l[0];var o=l[1];o=o!==void 0?o.h:n;l=l[1];if(l!==void 0){var p=l.p;p=p!==void 0?p:l.h}else p=n;l=b("MWMessageRequestSharedTexts.bs").getFBUserInfoTextMessage(o);var q=b("MWMessageRequestSharedTexts.bs").getDefaultInfoTextFooter(o);return j.jsxs("div",{className:(i||(i=b("stylex")))(d==="small"?k.rootSmall:k.rootLarge),children:[j.jsx(b("MWPTextCommon.react"),{align:"center",color:"secondary",type:"body4",children:l}),j.jsx("div",{className:i(k.footer),children:j.jsx(b("CometLazyDialogTrigger.react"),{dialogResource:b("JSResourceForInteraction")("MAWDeclineUserMessageRequestDialog",{name:"MAWDeclineUserMessageRequestDialog","class":"fluid"}).__setRef("MAWComposerUserMessageRequestInfoText.bs"),dialogProps:{onClose:function(a){},onDeleteThread:a,name:o,shortName:p,thread:c,contactId:m},children:function(a,c){return j.jsx(b("CometPressable.react"),{ref:c,testid:"maw_user_message_request_info_text_trigger",onPress:function(c){return b("bs_curry")._1(a,void 0)},children:j.jsx(b("MWPTextCommon.react"),{color:"primary",type:"bodyLink4",children:q})})}})})]})}c=a;f.styles=k;f.make=c}),null);
__d("MAWSecureFileUploadErrorDialog.bs",["fbt"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return{body:g._("El archivo que seleccionaste es demasiado grande. El tama\u00f1o m\u00e1ximo es de {=size} MB",[g._param("=size",String(a))]),title:g._("Error al subir los archivos")}}f.maxFileSizeExceeded=a}),null);
__d("MAWSecureThreadNonAddressableContactBanner.bs",["cssVar","fbt","CometPressable.react","LSAuthorityLevel.bs","LSMessagingThreadTypeUtil.bs","LSWhatsAppConnectStatus.bs","MDSRow.react","MDSRowItem.react","MWLSActor.bs","MWPTextCommon.react","ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","bs_caml","bs_curry","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react"),l={root:{borderTop:"opwvks06",position:"l9j0dhe7",zIndex:"du4w35lb"}},m={button:{position:"pmk7jnqg",end:"b5fwa0m2",top:"plgsh5y4",zIndex:"tkr6xdv7"}},n="#050505";function o(a){a=a.onPress;return k.jsx("div",{className:(j||(j=b("stylex")))(m.button),children:k.jsx(b("CometPressable.react"),{"aria-label":h._("Cerrar chat"),onPress:a,overlayRadius:"50%",children:k.jsxs("svg",{width:"18px",height:"18px",viewBox:"0 0 24 24",children:[k.jsx("line",{x1:"6",x2:"18",y1:"6",y2:"18",strokeLinecap:"round",strokeWidth:"2",stroke:n}),k.jsx("line",{x1:"6",x2:"18",y1:"18",y2:"6",strokeLinecap:"round",strokeWidth:"2",stroke:n})]})})})}c={styles:m,color:n,make:o};function p(a){var c=b("ReStore.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0),e=b("ReQLSubscription.bs").useFirst(k.useMemo(function(){var e;return(e=b("ReQL.bs")).map(e.filter(e.mergeJoin(e.getKeyRange(b("ReQLTable").table(c,"participants").asc,{hd:a,tl:0}),b("ReQLTable").table(c,"contacts").asc),function(a){a=a[1];if(b("bs_caml").i64_eq(a.P,b("LSWhatsAppConnectStatus.bs").whatsappNotAddressable)&&b("bs_caml").i64_ge(a.J,b("LSAuthorityLevel.bs").authoritativePendingReplacement))return b("bs_caml").i64_neq(a.a,d);else return!1}),function(a){return a[1]})},[c,JSON.stringify(a),JSON.stringify(d)]));return e!==void 0}function a(a){a=a.thread;var c=p(a.a),d=k.useState(function(){return!1}),e=d[1],f=b("LSMessagingThreadTypeUtil.bs").isGroup(a.c);d=f?!d[0]:!0;if(c&&d)return k.jsxs("div",{className:(j||(j=b("stylex")))(l.root),children:[f?k.jsx(o,{onPress:function(a){return b("bs_curry")._1(e,function(a){return!0})}}):null,k.jsx(b("MDSRow.react"),{paddingVertical:12,align:"center",expanding:!0,spacingVertical:0,children:k.jsx(b("MDSRowItem.react"),{children:k.jsx(b("MWPTextCommon.react"),{color:"primary",type:"headlineEmphasized4",children:b("LSMessagingThreadTypeUtil.bs").isGroup(a.c)?h._("Algunas personas a\u00fan no pueden ver este chat"):h._("Esta persona a\u00fan no puede ver este chat")})})}),k.jsx(b("MDSRow.react"),{paddingVertical:4,align:"center",expanding:!0,spacingVertical:4,children:k.jsx(b("MDSRowItem.react"),{children:k.jsx(b("MWPTextCommon.react"),{align:"center",color:"secondary",type:"body4",children:b("LSMessagingThreadTypeUtil.bs").isGroup(a.c)?h._("Pending members have been invited to join this chat. They won't see any messages sent before they join"):h._("They have been invited to join this chat. They won't see any messages sent before they join")})})})]});else return null}d=a;f.styles=l;f.CloseButton=c;f.make=d}),null);
__d("LSMessageViewFlag.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];e=[0,4];b=[0,8];var g=[0,16],h=[0,256],i=[0,1024],j=[0,2048],k=[0,4096],l=[0,8192],m=[0,16384],n=[0,524288],o=[0,1048576],p=[0,2097152],q=[0,8388608],r=[0,16777216],s=[0,33554432];f.uncalculated=a;f.showProfileImage=c;f.showTimestamp=d;f.showSender=e;f.connectTop=b;f.connectBottom=g;f.statusSending=h;f.statusDelivered=i;f.statusReadBy=j;f.statusReadByExcept=k;f.statusReadByAll=l;f.statusRead=m;f.isSendError=n;f.statusSent=o;f.isHotLike=p;f.isLocalMessage=q;f.isForwardedMedia=r;f.statusReadByAndMore=s}),null);
__d("OfflineThreadingId.bs",["Crypto.bs","bs_caml_int64","bs_int64"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=(a=b("bs_caml_int64")).of_float(Date.now()),d=b("Crypto.bs").getRandomValues(new Uint8Array(8));d=new DataView(d.buffer);d=a.add(a.lsl_(a.of_int32(d.getUint32(0)),32),a.of_int32(d.getUint32(4)));return b("bs_int64").to_string(a.and_(a.or_(a.lsl_(c,22),a.and_(d,[0,4194303])),a.max_int))}f.make=a}),null);
__d("MAWSendMessage.bs",["CometHeroLogging","LSAuthorityLevel.bs","LSMessageContentType.bs","LSMessageSendStatus.bs","LSMessageSendStatusV2.bs","LSMessageViewFlag.bs","LSQuickReplyType.bs","LSTransaction.bs","MAWAdminMsg.bs","MAWBumpThread.bs","MAWJob.bs","MAWLocalizationType","MAWThreadId.bs","MWChatInteraction.bs","MWLSActor.bs","MWLSThreadDisplayContext.bs","OfflineThreadingId.bs","ReQLTable","ReStore.bs","bs_caml_int64","bs_curry","promiseDone","qpl","useCometInteractionTracing"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=b("ReStore.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0),e=b("MWLSThreadDisplayContext.bs").useHook(void 0),f=b("useCometInteractionTracing")(b("qpl")._(30605384,"573"),"fast","INTERACTION");return function(a,g){return f(function(f){var h=b("MAWThreadId.bs").toThreadKey(a),i=b("bs_caml_int64").of_float(Date.now()),j=b("OfflineThreadingId.bs").make(void 0),k=b("CometHeroLogging").genHeroInteractionUUIDAndMarkStart(b("bs_curry")._1(f.getTraceId,void 0),null);b("MWChatInteraction.bs").set(j,k);e!==void 0&&(e?f.addMetadata("entrypoint","inbox"):f.addMetadata("entrypoint","chat"));f.addMetadata("isSecure","true");b("promiseDone")(b("LSTransaction.bs").run(c,function(a){return b("ReQLTable").table(a,"messages").add({a:h,b:i,c:i,d:void 0,e:j,f:j,g:g,h:d,i:void 0,j:!1,k:b("LSMessageSendStatus.bs").sendingToServer,l:b("LSMessageSendStatusV2.bs").sendingToServer,m:!1,n:void 0,o:void 0,p:void 0,q:void 0,r:void 0,s:void 0,t:void 0,u:void 0,v:void 0,w:void 0,x:void 0,y:void 0,z:void 0,A:void 0,B:void 0,C:void 0,D:void 0,E:void 0,F:void 0,G:void 0,H:void 0,I:void 0,J:!1,K:void 0,L:void 0,M:void 0,N:void 0,O:!1,P:b("LSMessageViewFlag.bs").uncalculated,Q:b("LSMessageContentType.bs").text,R:void 0,S:void 0,T:b("LSQuickReplyType.bs").none,U:void 0,V:b("LSAuthorityLevel.bs").optimistic,W:void 0,X:void 0,Y:void 0}).then(function(c){return b("MAWBumpThread.bs").threadMutation(a,h,i,i,b("MAWAdminMsg.bs").buildLocalizedString([g],b("MAWLocalizationType").CURRENT_USER_SEND_TEXT),d)})},"readWrite"),function(c){c=b("MAWJob.bs").sendMsg.waitUntilPersisted(a,{content:g,offlineMsg:{msgId:j,ts:i}},void 0);b("promiseDone")(c,void 0,void 0)})})}}f.use=a}),null);
__d("CometMessengerComposerInner.react",["fbt","CometOutlineContentEditable.react","CometOutlinePlaceholder.react","JSResource","cr:2012305","lazyLoadComponent","react","requireDeferred","stylex","useCometOutlinePlaceholder","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react");e=d("react");var j=e.useCallback,k=e.useState,l=c("requireDeferred")("CometMessengerHandlePastedFileComposerPlugin").__setRef("CometMessengerComposerInner.react"),m=c("lazyLoadComponent")(c("JSResource")("MessengerMentionsComposerPluginCreatorWithTypeaheadViewForOutline.react").__setRef("CometMessengerComposerInner.react")),n={container:{flexGrow:"buofh1pr",minWidth:"hpfvmrgz",backgroundColor:"b3i9ofy5",borderTopStartRadius:"orhb3f3m",borderTopEndRadius:"czkt41v7",borderBottomEndRadius:"fmqxjp7s",borderBottomStartRadius:"emzo65vh",boxSizing:"rq0escxv"},inputRow:{display:"j83agx80",flexWrap:"lhclo0ds",justifyContent:"bkfpd7mw"},editorWrapper:{position:"l9j0dhe7",minWidth:"hpfvmrgz",display:"j83agx80",flexGrow:"buofh1pr",marginTop:"aov4n071",marginBottom:"bi6gxh9e",marginStart:"ozuftl9m",marginEnd:"nhadk0th"},editor:{flexGrow:"buofh1pr",minWidth:"hpfvmrgz",overflowY:"eg9m0zos",maxHeight:"tw4czcav",minHeight:"cehpxlet"}};function o(a,c){b("cr:2012305")!==null&&a!=null&&b("cr:2012305").trackTypingPerf(a,"MWChatComposer",c,{editor:"OutlineEditor"})}var p=h._("Mensaje").toString();function a(a){var b=a.contentEditableRef,d=a.testId,e=a.startContent,f=a.endContent,g=a.topContent,h=a.addKeyBinding,q=a.addFocusListener,r=a.threadID,s=a.editor,t=a.participants,u=a.handlePastedFiles;a=a.useMentionsPlugin;var v=k(),w=v[0];v=v[1];var x=k(),y=x[0];x=x[1];var z=j(function(a){var c=b.current;if(a==null||c===a)return;b.current=a;s.setRootElement(a);o(a,c)},[b,s]),A=c("useCometOutlinePlaceholder")(s),B=c("useDeferredModuleOnReady")(l);return i.jsxs("div",{className:c("stylex")(n.container),children:[g,i.jsxs("div",{className:c("stylex")(n.inputRow),children:[e,i.jsxs("div",{className:c("stylex")(n.editorWrapper),children:[i.jsx(c("CometOutlineContentEditable.react"),{ariaActiveDescendantID:w,ariaControls:y,ariaLabel:p,webDriverTestID:d,contentEditableRef:z,tabIndex:0,xstyle:n.editor}),A&&i.jsx(c("CometOutlinePlaceholder.react"),{children:"Aa"})]}),f]}),a&&i.jsx(m,{setAriaActiveDescendantID:v,setAriaControls:x,editor:s,addKeyBinding:h,addFocusListener:q,threadFBID:r,participants:t}),B==null?null:i.jsx(B,{editor:s,handlePastedFiles:u})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatComposerGetViewContent",["CometMessengerOutlineEntityTextNode","Outline"],(function(a,b,c,d,e,f,g){"use strict";a={getRanges:function(a){var b=[],e=0;a.getViewModel().read(function(f){f=f.getRoot().getFirstChild();f instanceof d("Outline").BlockNode&&f.getChildren().forEach(function(d){if(d instanceof c("CometMessengerOutlineEntityTextNode")){var f=d.getMessengerComposerEntity(a);b.push({id:f.id,length:d.getTextContent().length,offset:e,type:"p"})}e+=d.getTextContent().length})});return b}};b=a;g["default"]=b}),98);
__d("MWV2ChatGrowingHotlikeButton.bs",["fbt","CometEmoji.bs","CometPressable.react","EmojiRenderer","LSHotEmojiSize.bs","MWChatChatButtonColorConstants.bs","MWChatHotLikeEmitterContext.bs","MWLikeSvgIcon.bs","MWPTooltip.react","MessengerHotLikeUtils","MessengerSupportedEmojiUtils","bs_caml_format","bs_caml_option","bs_curry","clearTimeout","react","setTimeout","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={hotlike_button:{paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr",marginEnd:"cgat1ltu",marginStart:"kkf49tns"},custom_emoji_button:{paddingTop:"cxgpxx05",paddingBottom:"sj5x9vvc",paddingEnd:"s5rnanwd",paddingStart:"gxklfzlk",marginEnd:"cgat1ltu",marginStart:"kkf49tns"}};function a(a){var c=a.onSendMessage,d=a.color;a=a.thread;var e=a.w,f=b("MWChatHotLikeEmitterContext.bs").useHook(void 0);a=j.useState(function(){return 0});var h=a[1],l=a[0],m=j.useRef(void 0);a=j.useState(function(){return!0});var n=a[1];a=a[0];var o=function(a){return b("bs_curry")._1(f.notify,3)},p=function(a){a=m.current;if(a!==void 0){b("clearTimeout")(b("bs_caml_option").valFromOption(a));return}},q=function(a){p(void 0);a=b("setTimeout")(o,3e3);m.current=b("bs_caml_option").some(a)},r=function(a){if(l!==0){b("bs_curry")._1(h,function(a){return 0});p(void 0);return b("bs_curry")._1(f.notify,3)}},s=function(a){l!==0&&(a.stopPropagation(),a.preventDefault());a.button!==0&&(b("bs_curry")._1(h,function(a){return Date.now()}),b("bs_curry")._1(f.notify,0),q(void 0));return b("bs_curry")._1(n,function(a){return!1})},t=function(a){if(a<b("MessengerHotLikeUtils").SizeTimes.small)return b("LSHotEmojiSize.bs").small;else if(a<b("MessengerHotLikeUtils").SizeTimes.medium)return b("LSHotEmojiSize.bs").medium;else if(a<b("MessengerHotLikeUtils").SizeTimes.large)return b("LSHotEmojiSize.bs").large;else return b("LSHotEmojiSize.bs").small},u=function(a){a=Date.now()-l;var d=0;if(e!==void 0&&e!==""){var g=b("MessengerSupportedEmojiUtils").getNewEmojiData(e,"large");g==null?void 0:g.url;g=t(a);b("bs_curry").app(c,[e,void 0,void 0,g,void 0,void 0,void 0,void 0,void 0,void 0])}else d=1;if(d===1){g=b("bs_caml_format").caml_int64_of_string(b("MessengerHotLikeUtils").getStickerIDForTime(a));b("bs_curry").app(c,[void 0,void 0,g,void 0,void 0,void 0,void 0,void 0,void 0,void 0])}l!==0&&(b("bs_curry")._1(h,function(a){return 0}),p(void 0),b("bs_curry")._1(f.notify,1));return b("bs_curry")._1(n,function(a){return!0})};if(e!==void 0&&e!==""){var v=g._("Enviar {emoji}",[g._param("emoji",e)]),w=function(a){var c=b("EmojiRenderer").parse(e).map(function(a){return a.emoji});if(c.length!==1)return j.jsx("span",{children:e});c=c[0];return j.jsx(b("CometEmoji.bs").make,{emoji:c,size:a})},x=g._("Enviar");x=a?j.jsxs(j.Fragment,{children:[j.jsxs("span",{children:[x," "]}),w(16)]}):null;return j.jsx(b("MWPTooltip.react"),{tooltip:x,align:"middle",position:"above",children:j.jsx(b("CometPressable.react"),{"aria-label":v,testid:"messenger_hotlike_emoji_button",onHoverOut:r,onPressIn:s,onPress:u,overlayRadius:"50%",xstyle:function(a){return[k.custom_emoji_button]},children:w(20)})})}x=g._("Enviar un Me gusta");v=a?x:null;w={className:(i||(i=b("stylex")))(b("MWChatChatButtonColorConstants.bs").styles.fillGrey)};d!==void 0&&(w.color=d);return j.jsx(b("MWPTooltip.react"),{tooltip:v,align:"middle",position:"above",children:j.jsx(b("CometPressable.react"),{"aria-label":x,testid:"messenger_hotlike_button",onHoverOut:r,onPressIn:s,onPress:u,overlayRadius:"50%",xstyle:function(a){return[k.hotlike_button]},children:j.jsx(b("MWLikeSvgIcon.bs").make,w)})})}c=a;f.styles=k;f.make=c}),null);
__d("MWV2ComposerAttachmentButton.bs",["fbt","CometFileSelector.re","CometPressable.react","MWChatComposerIcons.bs","MWPTooltip.react","bs_caml_option","bs_curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react"),j={button:{paddingTop:"ecm0bbzt",paddingEnd:"ph5uu5jm",paddingBottom:"e5nlhep0",paddingStart:"b3onmgus"}},k=g._("Adjunta una foto o un video");function l(a){return i.useCallback(function(c){c=Array.from(c);if(c.length>0)return b("bs_curry")._1(a,c)},[a])}function a(a){var c=a.color,d=a.onAttachmentsAdded,e=a.supportedFileTypes,f=a.disabled;a=l(d);d={children:function(a){return i.jsx(b("MWPTooltip.react"),{tooltip:k,align:"middle",position:"above",children:i.jsx(b("CometPressable.react"),{"aria-label":k,disabled:f,testid:"composer_file_uploader",onPress:function(c){return b("bs_curry")._1(a,void 0)},overlayRadius:"50%",xstyle:function(a){return[j.button]},children:i.jsx(b("MWChatComposerIcons.bs").Photo.make,{size:20,fill:f?void 0:c})}),forceInlineDisplay:!0})},multiple:!0,onFilesSelected:a};e!==void 0&&(d.accept=b("bs_caml_option").valFromOption(e));return i.jsx(b("CometFileSelector.re").make,d)}c=a;f.label=k;f.useOnFilesSelected=l;f.make=c}),null);
__d("OutlineSelectionHelpers",["cr:1967616"],(function(a,b,c,d,e,f){e.exports=b("cr:1967616")}),null);
__d("cometUFIAddEmojiToComposerForOutline",["CometUFIOutlineEmojiNode","FBEmojiResource","OutlineSelectionHelpers"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a.map(function(a){return String.fromCodePoint(a)}).join("")}function a(a,b){b.focus(),b.update(function(b){b=b.getSelection();if(b!==null){var e=h(a),f=a.map(function(a){return String.fromCodePoint(a)});f=c("FBEmojiResource").fromCodepoints(f);if(f==null)return;f=f.getImageURL(d("CometUFIOutlineEmojiNode").size);if(f==null)return;var g=e;e=d("CometUFIOutlineEmojiNode").createEmojiNode(e,g,f);d("OutlineSelectionHelpers").insertNodes(b,[e],!0);e.isAttached()&&e.selectNext(0,0)}},"cometUFIAddEmojiToComposerForOutline")}g["default"]=a}),98);
__d("MWV2ComposerEmojiButton.bs",["fbt","CometLazyPopoverTrigger.react","CometPopoverLoadingState.react","CometPressable.react","JSResourceForInteraction","MWChatComposerIcons.bs","MWPTooltip.react","bs_curry","cometUFIAddEmojiToComposerForOutline","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react"),j=g._("Elegir un emoji"),k={button:{paddingTop:"ecm0bbzt",paddingEnd:"ph5uu5jm",paddingBottom:"e5nlhep0",paddingStart:"b3onmgus"}};function a(a){var c=a.editor,d=a.color;a=function(a){b("cometUFIAddEmojiToComposerForOutline")(a,c)};return i.jsx(b("CometLazyPopoverTrigger.react"),{fallback:i.jsx(b("CometPopoverLoadingState.react"),{withArrow:!0}),onVisibilityChange:function(a){},popoverResource:b("JSResourceForInteraction")("MWV2ComposerEmojiPickerForJSResource",{name:"MWV2ComposerEmojiPicker","class":"fluid"}).__setRef("MWV2ComposerEmojiButton.bs"),popoverProps:{onSelect:a},align:"end",children:function(a,c,e,f,g,h,l){return i.jsx(b("MWPTooltip.react"),{tooltip:j,align:"middle",position:"above",children:i.jsx(b("CometPressable.react"),{"aria-label":j,ref:a,testid:"composer_emoji_picker",onHoverIn:b("bs_curry").__1(f),onHoverOut:function(a){return b("bs_curry")._1(g,void 0)},onPressIn:b("bs_curry").__1(h),onPress:function(a){return b("bs_curry")._1(c,void 0)},overlayRadius:"50%",xstyle:function(a){return[k.button]},children:i.jsx(b("MWChatComposerIcons.bs").Emoji.make,{size:20,fill:d})})})}})}c=a;f.label=j;f.styles=k;f.make=c}),null);
__d("MWV2ComposerGifButton.bs",["fbt","CometLazyPopoverTrigger.react","CometPressable.react","JSResource","LSDict","MWChatComposerIcons.bs","MWPTooltip.react","bs_caml_format","bs_caml_int64","bs_caml_option","bs_curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react"),j={button:{paddingTop:"ecm0bbzt",paddingEnd:"ph5uu5jm",paddingBottom:"e5nlhep0",paddingStart:"b3onmgus"}},k=g._("Elegir un GIF");function l(a,c,d,e){return b("LSDict").fromObject({playable_url:void 0,playable_url_fallback:void 0,playable_url_expiration_timestamp_ms:void 0,playable_url_mime_type:void 0,preview_url:a,preview_url_fallback:void 0,preview_url_expiration_timestamp_ms:void 0,preview_url_mime_type:void 0,preview_width:d,preview_height:c})}function m(a){return i.useCallback(function(c){var d=b("bs_caml_format").caml_int64_of_string(c.platformFBID),e=c.source.url;return b("bs_curry").app(a,[void 0,void 0,void 0,void 0,d,e,b("bs_caml_option").some(l(e,b("bs_caml_int64").of_int32(c.source.height),b("bs_caml_int64").of_int32(c.source.width),void 0)),void 0,void 0,void 0])},[a])}function a(a){var c=a.color,d=a.onSendMessage,e=a.disabled;a=m(d);return i.jsx(b("CometLazyPopoverTrigger.react"),{popoverResource:b("JSResource")("CometAnimatedImagePickerCardContainer.react").__setRef("MWV2ComposerGifButton.bs"),disableAutoFlip:!0,popoverProps:{onSelect:b("bs_curry").__1(a),testid:"mw_gif_picker"},align:"middle",position:"above",children:function(a,d,f,g,h,l,m){return i.jsx(b("MWPTooltip.react"),{tooltip:k,align:"middle",position:"above",children:i.jsx(b("CometPressable.react"),{"aria-label":k,disabled:e,ref:a,onHoverIn:b("bs_curry").__1(g),onHoverOut:function(a){return b("bs_curry")._1(h,void 0)},onPressIn:b("bs_curry").__1(l),onPress:function(a){return b("bs_curry")._1(d,void 0)},overlayRadius:"50%",xstyle:function(a){return[j.button]},children:i.jsx(b("MWChatComposerIcons.bs").Gif.make,{size:20,fill:e?void 0:c})}),forceInlineDisplay:!0})}})}c=a;f.label=k;f.useOnGifSelect=m;f.make=c}),null);
__d("MWV2ComposerHasContentContext.bs",["react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.createContext({hasContentRef:void 0,shouldClearDraftMessageRef:void 0});function a(a){a=a.children;var b=h.useRef(!1),c=h.useRef(!1),d=h.useMemo(function(){return{hasContentRef:b,shouldClearDraftMessageRef:c}},[b,c]);return h.createElement(i.Provider,{value:d,children:a})}function c(a){return h.useContext(i)}d=a;f.make=d;f.useContext=c}),null);
__d("MWV2ComposerMediaStaging.bs",["fbt","ix","CometImage.react","CometImageCover.react","MWChatFileIcon.bs","MWPTextCommon.react","MWV2ComposerMediaProgressBar.bs","MessagingAttachmentType.bs","TetraCircleButton.react","bs_caml","bs_curry","fbicon","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react"),l={button:{position:"pmk7jnqg",top:"nezaghv5",end:"e712q9ov"}};function m(a){var c=a.onPress;return k.jsx("div",{className:(j||(j=b("stylex")))(l.button),children:k.jsx(b("TetraCircleButton.react"),{icon:b("fbicon")._(h("478231"),12),label:g._("Eliminar archivo adjunto"),onPress:function(a){return b("bs_curry")._1(c,void 0)},size:24,type:"overlay"})})}c={styles:l,make:m};var n={video:{objectFit:"bixrwtb6"},playIcon:{position:"pmk7jnqg",start:"kfkz5moi",top:"rk01pc8j",marginStart:"fnu23jab",marginTop:"gy6hb44f"},file:{display:"j83agx80",alignItems:"bp9cbjyn",userSelect:"abiwlrkh",paddingTop:"ecm0bbzt",paddingBottom:"e5nlhep0",paddingEnd:"dflh9lhu",paddingStart:"scb9dxdr"},fileContent:{flexGrow:"buofh1pr"}};function o(a){a=a.mediaStaging;var c=a.c;if(b("bs_caml").i64_eq(c,b("MessagingAttachmentType.bs").video)){var d=a.j;if(d!==void 0)return k.jsxs(k.Fragment,{children:[k.jsx("video",{src:d,width:"48",height:"48",className:(j||(j=b("stylex")))(n.video)}),k.jsx("div",{className:j(n.playIcon),children:k.jsx(b("CometImage.react"),{src:h("354763")})})]});else return null}if(!b("bs_caml").i64_eq(c,b("MessagingAttachmentType.bs").image))return k.jsxs("div",{className:(j||(j=b("stylex")))(n.file),children:[k.jsx(b("MWChatFileIcon.bs").make,{}),k.jsx("div",{className:j(n.fileContent),children:k.jsx(b("MWPTextCommon.react"),{type:"headline4",numberOfLines:2,children:a.e})})]});d=a.j;if(d!==void 0)return k.jsx(b("CometImageCover.react"),{alt:"",src:d});else return null}d={styles:n,make:o};var p={itemContainer:{flexGrow:"kb5gq1qc",flexShrink:"pfnyh3mw",height:"m7zwrmfr",width:"tmrshh9y",marginTop:"rs0gx3tq",marginEnd:"tvfksri0",marginBottom:"w0hvl6rk",marginStart:"hcukyx3x",position:"l9j0dhe7"},previewContainer:{position:"l9j0dhe7",overflowX:"ni8dbmo4",overflowY:"stjgntxs",height:"m7zwrmfr",width:"tmrshh9y",borderTopStartRadius:"fni8adji",borderTopEndRadius:"hgaippwi",borderBottomEndRadius:"fykbt5ly",borderBottomStartRadius:"ns4ygwem"},fileContainer:{width:"k5ud4834"},filePreviewContainer:{width:"k5ud4834",backgroundColor:"acsorfik"}};function q(a){var c=a.mediaStaging,d=a.onAttachmentRemoved;a=k.useState(function(){return!1});var e=a[1],f=k.useCallback(function(a){return b("bs_curry")._1(d,c.a)},[]),g=b("bs_caml").i64_neq(c.c,b("MessagingAttachmentType.bs").video)&&b("bs_caml").i64_neq(c.c,b("MessagingAttachmentType.bs").image);return k.jsxs("div",{className:(j||(j=b("stylex")))(p.itemContainer,g?p.fileContainer:!1),onMouseEnter:function(a){return b("bs_curry")._1(e,function(a){return!0})},onMouseLeave:function(a){return b("bs_curry")._1(e,function(a){return!1})},children:[k.jsxs("div",{className:j(p.previewContainer,g?p.filePreviewContainer:!1),children:[k.jsx(o,{mediaStaging:c}),k.jsx(b("MWV2ComposerMediaProgressBar.bs").make,{mediaStaging:c,height:4})]}),a[0]?k.jsx(m,{onPress:f}):null]})}e={styles:p,make:q};var r={container:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"jifvfom9",flexWrap:"lhclo0ds",paddingTop:"pybr56ya",paddingEnd:"d1544ag0",paddingBottom:"f10w8fjw",paddingStart:"tw6a2znq",width:"k4urcfbm",boxSizing:"rq0escxv"}};function a(a){var c=a.mediaStaging,d=a.onAttachmentRemoved;if(c.length===0)return null;else return k.jsx("div",{className:(j||(j=b("stylex")))(r.container),children:c.map(function(a){return k.jsx(q,{mediaStaging:a,onAttachmentRemoved:d},a.a)})})}a=a;f.CloseButton=c;f.Preview=d;f.StagingItem=e;f.styles=r;f.make=a}),null);
__d("MWV2ComposerPersistentMenuButton.bs",["fbt","CometLazyPopoverTrigger.react","CometPressable.react","FBID.bs","JSResource","MWChatChatButtonColorConstants.bs","MWPTooltip.react","bs_curry","bs_int64","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=g._("Ver opciones del men\u00fa"),l={button:{flexShrink:"pfnyh3mw",paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr",marginEnd:"cgat1ltu",marginStart:"kkf49tns"}};function a(a){var c=a.thread,d=a.color,e=a.onSendMessage;a=function(a){var c=a.title;a=a.id;return b("bs_curry").app(e,[c,void 0,void 0,void 0,void 0,void 0,void 0,void 0,a,void 0])};return j.jsx(b("CometLazyPopoverTrigger.react"),{popoverResource:b("JSResource")("LSComposerPersistentMenu.react").__setRef("MWV2ComposerPersistentMenuButton.bs"),popoverProps:{onClose:function(a){},onSelect:a,pageId:b("FBID.bs").ofStringExn(b("bs_int64").to_string(c.a))},align:"end",children:function(a,c,e,f,g,h,m){return j.jsx(b("MWPTooltip.react"),{tooltip:k,position:"above",children:j.jsx(b("CometPressable.react"),{label:k,ref:a,onPress:function(a){return b("bs_curry")._1(c,void 0)},overlayRadius:"50%",xstyle:function(a){return[l.button]},children:j.jsx("svg",{className:(i||(i=b("stylex")))(b("MWChatChatButtonColorConstants.bs").styles.strokeGrey),width:"20",height:"20",viewBox:"0 0 24 18",children:j.jsxs("g",{stroke:d,strokeWidth:"2.5",strokeLinecap:"round",children:[j.jsx("path",{d:"M1.5,1.5 H22.5"}),j.jsx("path",{d:"M1.5,9 H22.5"}),j.jsx("path",{d:"M1.5,16.5 H22.5"})]})})}),forceInlineDisplay:!0})}})}c=a;f.make=c}),null);
__d("MWV2ComposerPlusButton.bs",["fbt","CometLazyPopoverTrigger.react","CometPressable.react","JSResourceForInteraction","MWChatAudioLog.bs","MWChatComposerIcons.bs","MWPTooltip.react","Navigator.bs","Promise","bs_caml_option","bs_curry","react","useCometLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function j(a){var c=i.useState(function(){return 0}),d=c[1],e=c[0];c=b("useCometLazyDialog")(b("JSResourceForInteraction")("MWChatAudioRecorderPermissionsDialog").__setRef("MWV2ComposerPlusButton.bs"));var f=c[0],g=function(a){return f({onClose:function(a){},onAllow:function(a){},showNoPermissionsContent:!0},function(a){})},h=function(c){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(c){d(function(a){return 1});b("bs_curry")._1(a.start,c);return b("Promise").resolve(void 0)})["catch"](function(a){a.name==="NotAllowedError"?(d(function(a){return 2}),g(void 0)):d(function(a){return 3});b("MWChatAudioLog.bs").logBrowserDenyAccess(void 0);return b("Promise").resolve(void 0)})},j=function(a){return f({onClose:function(a){},onAllow:function(a){return h(void 0)},showNoPermissionsContent:!1},function(a){})};return function(a){if(e>=3)return h(void 0);switch(e){case 0:a=b("Navigator.bs").query({name:"microphone"});if(a!==void 0){b("bs_caml_option").valFromOption(a).then(function(a){a=a.state;switch(a){case"denied":d(function(a){return 2});g(void 0);break;case"granted":h(void 0);break;case"prompt":j(void 0);break;default:j(void 0)}return b("Promise").resolve(void 0)})["catch"](function(a){j(void 0);return b("Promise").resolve(void 0)});return}else{h(void 0);return b("MWChatAudioLog.bs").logMicAccessCheckFailed(void 0)}case 1:return h(void 0);case 2:return g(void 0)}}}var k={plusButton:{paddingTop:"ecm0bbzt",paddingEnd:"ph5uu5jm",paddingBottom:"e5nlhep0",paddingStart:"b3onmgus",marginTop:"aahdfvyu",marginBottom:"tvmbv18p",marginEnd:"cgat1ltu",marginStart:"kkf49tns"}};function a(a){var c=a.thread,d=a.color,e=a.onSendMessage,f=a.onAttachmentsAdded,h=a.voiceRecorder;a=a.supportedFileTypes;var l=i.useState(function(){return!1}),m=l[1],n=function(a){return b("bs_curry")._1(m,function(b){return a})},o=j(h),p=h.state!==0,q=p?g._("Cerrar"):l[0]?g._("Cerrar m\u00e1s acciones"):g._("Abrir m\u00e1s acciones");return i.jsx(b("CometLazyPopoverTrigger.react"),{onVisibilityChange:n,popoverResource:b("JSResourceForInteraction")("MWV2ComposerOverflowMenu").__setRef("MWV2ComposerPlusButton.bs"),popoverProps:{threadKey:c.a,color:d,onSendMessage:e,onAttachmentsAdded:f,onPressVoiceClip:o,supportedFileTypes:a,onClose:function(a){}},align:"start",position:"above",preloadTrigger:"button",children:function(a,c,e,f,g,j,l){return i.jsx(b("MWPTooltip.react"),{tooltip:q,align:"middle",position:"above",children:i.jsx(b("CometPressable.react"),{"aria-label":q,ref:a,testid:"composer_actions_button",onHoverIn:b("bs_curry").__1(f),onHoverOut:function(a){return b("bs_curry")._1(g,void 0)},onPressIn:b("bs_curry").__1(j),onPress:function(a){if(p){b("bs_curry")._1(h.reset,void 0);return b("MWChatAudioLog.bs").logDeleteRecording(void 0)}else return b("bs_curry")._1(c,void 0)},overlayRadius:"50%",xstyle:function(a){return[k.plusButton]},children:i.jsx(b("MWChatComposerIcons.bs").MoreActions.make,{size:20,fill:d,isRotated:p})})})}})}c=a;f.styles=k;f.make=c}),null);
__d("MWV2ComposerRoundedCorners.bs",["Locale","react","stylex","useUniqueID"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={roundedCornerTopRight:{fill:"qbubdy2e",position:"pmk7jnqg",top:"kr520xx4",end:"n7fi1qx3",pointerEvents:"hzruof5a"},roundedCornerBottomRight:{fill:"qbubdy2e",position:"pmk7jnqg",bottom:"i09qtzwb",end:"n7fi1qx3",pointerEvents:"hzruof5a"},roundedCornerRtl:{transform:"c3knoul3"},svg:{display:"a8c37x1j"}};function a(a){a=b("useUniqueID")();return i.jsx("div",{className:(h||(h=b("stylex")))(j.roundedCornerTopRight,b("Locale").isRTL()?j.roundedCornerRtl:!1),children:i.jsxs("svg",{width:"18px",height:"18px",className:h(j.svg),children:[i.jsx("defs",{children:i.jsxs("mask",{id:a,children:[i.jsx("rect",{fill:"white",x:"-18",y:"0",width:"36",height:"36"}),i.jsx("circle",{fill:"black",cx:"0",cy:"18",r:"18"})]})}),i.jsx("rect",{x:"0",y:"0",width:"18",height:"18",mask:"url(#"+(a+")")})]})})}d={make:a};function c(a){a=b("useUniqueID")();return i.jsx("div",{className:(h||(h=b("stylex")))(j.roundedCornerBottomRight,b("Locale").isRTL()?j.roundedCornerRtl:!1),children:i.jsxs("svg",{width:"18px",height:"18px",className:h(j.svg),children:[i.jsx("defs",{children:i.jsxs("mask",{id:a,children:[i.jsx("rect",{fill:"white",x:"-18",y:"0",width:"36",height:"36"}),i.jsx("circle",{fill:"black",cx:"0",cy:"0",r:"18"})]})}),i.jsx("rect",{x:"0",y:"0",width:"18",height:"18",mask:"url(#"+(a+")")})]})})}e={make:c};f.styles=j;f.TopRight=d;f.BottomRight=e}),null);
__d("MWV2ComposerSendButton.bs",["fbt","CometPressable.react","MWChatChatButtonColorConstants.bs","MWPTooltip.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=g._("Presiona \"Enter\" para enviar"),l={button:{flexShrink:"pfnyh3mw",flexGrow:"kb5gq1qc",paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr",marginEnd:"cgat1ltu",marginStart:"kkf49tns"}};function a(a){var c=a.color;a=a.onPress;return j.jsx(b("MWPTooltip.react"),{tooltip:k,align:"middle",position:"above",children:j.jsx(b("CometPressable.react"),{label:k,testid:"chat_send_button",onPress:a,overlayRadius:"50%",xstyle:function(a){return[l.button]},children:j.jsx("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",className:(i||(i=b("stylex")))(b("MWChatChatButtonColorConstants.bs").styles.fillGrey),children:j.jsx("path",{d:"M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 C22.8132856,11.0605983 22.3423792,10.4322088 21.714504,10.118014 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.8376543,3.0486314 1.15159189,3.99121575 L3.03521743,10.4322088 C3.03521743,10.5893061 3.34915502,10.7464035 3.50612381,10.7464035 L16.6915026,11.5318905 C16.6915026,11.5318905 17.1624089,11.5318905 17.1624089,12.0031827 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z",fill:c})})}),forceInlineDisplay:!0})}c=a;f.make=c}),null);
__d("MWV2ComposerStickerButton.bs",["fbt","CometLazyPopoverTrigger.react","CometPressable.react","JSResource","LSDict","MWChatComposerIcons.bs","MWPTooltip.react","bs_belt_Option","bs_caml_format","bs_caml_option","bs_curry","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={button:{paddingTop:"ecm0bbzt",paddingEnd:"ph5uu5jm",paddingBottom:"e5nlhep0",paddingStart:"b3onmgus"},flyoutRoot:{width:"tjny6qan"}},l=g._("Elegir un sticker");function m(a,c,d,e){return b("LSDict").fromObject({playable_url:void 0,playable_url_fallback:void 0,playable_url_expiration_timestamp_ms:void 0,playable_url_mime_type:void 0,preview_url:a,preview_url_fallback:void 0,preview_url_expiration_timestamp_ms:void 0,preview_url_mime_type:void 0,preview_width:d,preview_height:c})}function n(a,c){return j.useCallback(function(d){return function(e,f){e=f.animated_uri;e=b("bs_belt_Option").isSome(e)?e:f.uri;if(c)return b("bs_curry").app(a,[void 0,void 0,void 0,void 0,void 0,b("bs_belt_Option").getExn(e),void 0,void 0,void 0,void 0]);else return b("bs_curry").app(a,[void 0,void 0,b("bs_caml_format").caml_int64_of_string(d),void 0,void 0,void 0,b("bs_caml_option").some(m(e,[0,128],[0,128],void 0)),void 0,void 0,void 0])}},[a,c])}function a(a){var c=a.color,d=a.onSendMessage,e=a.disabled;a=a.useSecureSend;d=n(d,a);return j.jsx(b("CometLazyPopoverTrigger.react"),{onVisibilityChange:function(a){},popoverResource:b("JSResource")("MWChatStickersFlyoutForJSResource.react").__setRef("MWV2ComposerStickerButton.bs"),disableAutoFlip:!0,popoverProps:{className:(i||(i=b("stylex")))(k.flyoutRoot),onClose:function(a){},onStickerSelect:d,shouldHideDefaultPacks:a},align:"middle",position:"above",children:function(a,d,f,g,h,i,m){return j.jsx(b("MWPTooltip.react"),{tooltip:l,align:"middle",position:"above",children:j.jsx(b("CometPressable.react"),{"aria-label":l,disabled:e,ref:a,testid:"chat_sticker_button",onHoverIn:b("bs_curry").__1(g),onHoverOut:function(a){return b("bs_curry")._1(h,void 0)},onPressIn:b("bs_curry").__1(i),onPress:function(a){return b("bs_curry")._1(d,void 0)},overlayRadius:"50%",xstyle:function(a){return[k.button]},children:j.jsx(b("MWChatComposerIcons.bs").Sticker.make,{size:20,fill:e?void 0:c})}),forceInlineDisplay:!0})}})}c=a;f.styles=k;f.label=l;f.useOnStickerSelect=n;f.make=c}),null);
__d("MWV2ComposerVoiceRecorder.bs",["fbt","CometComponentWithKeyCommands.react","CometKeys","CometPressable.react","MWChatAudioLog.bs","MWV2Theme.bs","bs_caml_option","bs_curry","cancelAnimationFrame","formatDurationSeconds","react","requestAnimationFrameAcrossTransitions","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react");function k(a){var b=a.currentTime;a=a.duration;return j.jsx("div",{style:{position:"absolute"},role:"slider",tabIndex:0,"aria-label":g._("Barra de arrastre de audio"),"aria-valuenow":b,"aria-valuemin":0,"aria-valuemax":a})}c={make:k};function l(a){var c=a.audioEl;a=a.children;var d=j.useCallback(function(a){if(a>30)return 5;else if(a>10)return 3;else if(a>5)return 2;else if(a>2)return 1;else return.5},[]),e=j.useCallback(function(a){a=c.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a);var e=a.duration;a.currentTime=a.currentTime-b("bs_curry")._1(d,e)},[d]),f=j.useCallback(function(a){a=c.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a);var e=a.duration;a.currentTime=a.currentTime+b("bs_curry")._1(d,e)},[d]),h=j.useCallback(function(a){a=c.current;if(a!==void 0){b("bs_caml_option").valFromOption(a).currentTime=0;return}},[]),i=j.useCallback(function(a){a=c.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a);var d=a.duration;a.currentTime=d},[]),k=j.useMemo(function(){var a;return[{command:{key:(a=b("CometKeys")).UP},description:g._("Aumenta el valor del control deslizante un espacio."),handler:f},{command:{key:a.DOWN},description:g._("Reduce el valor del control deslizante un espacio."),handler:e},{command:{key:a.LEFT},description:g._("Reduce el valor del control deslizante un espacio."),handler:e},{command:{key:a.RIGHT},description:g._("Aumenta el valor del control deslizante un espacio."),handler:f},{command:{key:a.HOME},description:g._("Establece el control deslizante en su valor m\u00ednimo."),handler:h},{command:{key:a.END},description:g._("Establece el control deslizante en su valor m\u00e1ximo."),handler:i}]},[e,f,h,i]);return j.jsx(b("CometComponentWithKeyCommands.react"),{commandConfigs:k,children:a})}d={make:l};var m={timer:{marginEnd:"fv0vnmcu",marginStart:"ggphbty4",height:"oeo4gz9l",width:"chsygg5i",backgroundColor:"q2y6ezfg",borderTopStartRadius:"pdihbav5",borderTopEndRadius:"fo8ltl2p",borderBottomEndRadius:"b8f6b1oh",borderBottomStartRadius:"q0b78ich",display:"j83agx80",justifyContent:"taijpn5t",alignItems:"bp9cbjyn",fontSize:"e9vueds3",fontWeight:"lrazzd5p",cursor:"nhd2j8a9",userSelect:"abiwlrkh",position:"l9j0dhe7"}},n=j.memo(function(a){var c=a.time;a=a.color;a=a!==void 0?a:"black";c=b("formatDurationSeconds")(c);a={color:a};return j.jsx("div",{"data-testid":"mw_recorder_timestamp",className:(i||(i=b("stylex")))(m.timer),style:a,children:c})});e={styles:m,make:n};var o={pressable:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",width:"b73ngqbp",height:"rgmg9uty",backgroundColor:"q2y6ezfg",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv"}};function p(a){var c=a.onPress,d=a.onHoverMove,e=a.label;a=a.icon;e={"aria-label":e,disabled:c===void 0,overlayRadius:"50%",xstyle:function(a){return[o.pressable]},children:a};d!==void 0&&(e.onHoverMove=b("bs_caml_option").valFromOption(d));c!==void 0&&(e.onPress=b("bs_caml_option").valFromOption(c));return j.jsx(b("CometPressable.react"),e)}var q={styles:o,make:p},r={highlight:{height:"datstx6m",width:"k4urcfbm",start:"j9ispegn",top:"kr520xx4",position:"pmk7jnqg",transform:"hp24h0cv"},outgoing:{opacity:"lupvgy83",backgroundColor:"q2y6ezfg"},incoming:{opacity:"h34q056n",backgroundColor:"rn3djb20"}},s=j.forwardRef(function(a,c){var d=a.style;a=a.outgoing;d=d!==void 0?b("bs_caml_option").valFromOption(d):{};var e=j.useRef(void 0);j.useImperativeHandle(c,function(){return{updateHighlight:function(a){var b=e.current;if(!(b==null)){b.style.transform="translateX("+(a-100).toFixed(1)+"%)";return}}}},[e]);return j.jsx("div",{ref:e,className:(i||(i=b("stylex")))(r.highlight,a?r.outgoing:r.incoming),style:d})}),t={styles:r,make:s};function u(a){var c=a.duration,d=a.audioEl,e=a.currentTime,f=a.isProgressing,g=a.isCompleted;a=a.outgoing;a=a!==void 0?a:!0;var h=j.useRef(void 0);j.useEffect(function(){var a=function(a){var b=h.current;if(!(b==null))return b.updateHighlight(a)};if(g){a(0);return}if(f){var e={contents:void 0},i={contents:void 0},j=function f(g){var h=d.current;if(h!==void 0){h=b("bs_caml_option").valFromOption(h);h=h.currentTime/h.duration}else{var j=e.contents;j=j!==void 0?g-j:(e.contents=g,0);h=j/(c*1e3)}g=Math.min(h*100,100);a(g);if(g<100){i.contents=b("bs_caml_option").some(b("requestAnimationFrameAcrossTransitions")(f));return}};i.contents=b("bs_caml_option").some(b("requestAnimationFrameAcrossTransitions")(j));return function(a){a=i.contents;if(a!==void 0){b("cancelAnimationFrame")(b("bs_caml_option").valFromOption(a));return}}}j=d.current;if(j!==void 0){j=b("bs_caml_option").valFromOption(j);j=j.currentTime/j.duration;a(j*100)}},[c,f,g,h,d,e]);return j.jsx(s,{style:{transform:"translateX(-100%)"},outgoing:a,ref:h})}var v={make:u};function w(a,b,c){return Math.min(Math.max(b,a),c)}var x={container:{flexGrow:"buofh1pr",display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"i1fnvgqd",height:"tv7at329",overflowX:"ni8dbmo4",overflowY:"stjgntxs",position:"l9j0dhe7"}};function y(a){var c=a.scrubberRef,d=a.hasScrubber,e=a.audioEl,f=a.color,g=a.testid,h=a.style;a=a.children;h=h!==void 0?b("bs_caml_option").valFromOption(h):{};var k=j.useRef(void 0),l=function(a,b){b=b.getBoundingClientRect();a=a.clientX-b.left;a=a/b.width;return w(a,0,1)},m=function(a){var c=e.current,d=k.current;if(c===void 0)return;if(d==null)return;c=b("bs_caml_option").valFromOption(c);c.currentTime=l(a,d)*c.duration*100/100},n=function(a){var b=k.current,d=c.current;if(!(b==null)&&!(d==null))return d.updateHighlight(l(a,b)*100)},o=function(a){a=c.current;if(!(a==null))return a.updateHighlight(0)};return j.jsx("div",{ref:k,"data-testid":g,className:(i||(i=b("stylex")))(x.container),style:Object.assign({},{backgroundColor:f},h),onMouseMove:d?n:void 0,onMouseLeave:d?o:void 0,onClick:d?m:void 0,children:a})}var z={clamp:w,styles:x,make:y};function A(a){a=a.color;return j.jsx("svg",{width:"24px",height:"24px",viewBox:"0 0 36 36",children:j.jsx("path",{d:"M10 25.5v-15a1.5 1.5 0 012.17-1.34l15 7.5a1.5 1.5 0 010 2.68l-15 7.5A1.5 1.5 0 0110 25.5z",fill:a})})}var B={make:A};function C(a){a=a.color;return j.jsx("svg",{width:"24px",height:"24px",viewBox:"0 0 36 36",children:j.jsx("rect",{x:"9",y:"9",width:"18",height:"18",rx:"2",fill:a})})}var D={make:C};function E(a){a=a.color;return j.jsx("svg",{width:"24px",height:"24px",viewBox:"0 0 36 36",children:j.jsx("path",{d:"M11 8.5c-.83 0-1.5.67-1.5 1.5v16c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5V10c0-.83-.67-1.5-1.5-1.5h-4zM21 8.5c-.83 0-1.5.67-1.5 1.5v16c0 .83.67 1.5 1.5 1.5h4c.83 0 1.5-.67 1.5-1.5V10c0-.83-.67-1.5-1.5-1.5h-4z",fill:a})})}var F={make:E},G=g._("Reproducir"),H=g._("Detener grabaci\u00f3n"),I=g._("Pausar"),J={playbackButtonContainer:{marginEnd:"fv0vnmcu",marginStart:"ggphbty4"}};function a(a){var c=a.voiceRecorder;a=b("MWV2Theme.bs").useBottom(void 0);var d=c.audioEl,e=c.state,f;if(typeof e==="number")f=!1;else switch(e.TAG|0){case 0:f=!1;break;case 1:case 2:f=!0;break}var g=j.useRef(void 0),h=function(a){var b=g.current;if(!(b==null)){a.stopPropagation();return b.updateHighlight(0)}},m=function(a){b("bs_curry")._1(c.toggle,e);if(typeof e==="number")return;switch(e.TAG|0){case 0:return b("MWChatAudioLog.bs").logClickStopRecording(0);case 1:a=e._1;var d=e._0;if(a===0)return b("MWChatAudioLog.bs").logPlaybackStart(d);else return b("MWChatAudioLog.bs").logPlaybackResume(d,a);case 2:return b("MWChatAudioLog.bs").logPlaybackPause(e._0,e._1)}},o;if(typeof e==="number")o=0;else switch(e.TAG|0){case 0:o=60;break;case 1:case 2:o=e._0;break}var q;if(typeof e==="number")q=void 0;else switch(e.TAG|0){case 0:q=void 0;break;case 1:case 2:q=e._1;break}var r;if(typeof e==="number")r=!1;else switch(e.TAG|0){case 1:r=!1;break;case 0:case 2:r=!0;break}var t;t=typeof e==="number"||e.TAG!==1?!1:e._1===0;t={duration:o,audioEl:d,isProgressing:r,isCompleted:t,outgoing:!0};q!==void 0&&(t.currentTime=b("bs_caml_option").valFromOption(q));var v,w=0;if(typeof e==="number")v=null;else switch(e.TAG|0){case 0:v=null;break;case 1:case 2:w=1;break}w===1&&(v=j.jsx(k,{currentTime:e._1,duration:e._0}));var x;if(typeof e==="number")x=G;else switch(e.TAG|0){case 0:x=H;break;case 1:x=G;break;case 2:x=I;break}var z;if(typeof e==="number")z=j.jsx(A,{color:a});else switch(e.TAG|0){case 0:z=j.jsx(C,{color:a});break;case 1:z=j.jsx(A,{color:a});break;case 2:z=j.jsx(E,{color:a});break}var B;w=0;if(typeof e==="number")B=0;else switch(e.TAG|0){case 0:B=e._1;break;case 1:case 2:w=1;break}w===1&&(B=Math.max(e._0-e._1,0));return j.jsx(y,{scrubberRef:g,hasScrubber:f,audioEl:d,color:a,testid:"mw_audio_recorder",style:{cursor:f?"pointer":"default",borderRadius:"18px"},children:j.jsxs(l,{audioEl:d,children:[j.jsx(u,t),v,j.jsx(s,{outgoing:!0,ref:g}),j.jsx("div",{onMouseMove:f?h:void 0,className:(i||(i=b("stylex")))(J.playbackButtonContainer),children:j.jsx(p,{onPress:m,label:x,icon:z})}),j.jsx(n,{time:B,color:a})]})})}a=a;f.ScreenreaderLabel=c;f.KeyCommands=d;f.Timer=e;f.PlaybackButton=q;f.Highlight=t;f.Progress=v;f.Container=z;f.PlayIcon=B;f.StopIcon=D;f.PauseIcon=F;f.playLabel=G;f.stopLabel=H;f.pauseLabel=I;f.styles=J;f.make=a}),null);
__d("MWV2UseVoiceRecorder.bs",["MWChatAudioLog.bs","MWChatRecorderUtilsWorkerResource","MWConsole","Promise","WebWorker","bs_caml_option","bs_curry","clearTimeout","react","setTimeout","useIsMountedRef","usePrevious"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,b){if(typeof b==="number")switch(b){case 0:if(typeof a==="number")return a;switch(a.TAG|0){case 0:return{TAG:1,_0:a._1,_1:0};case 1:return{TAG:2,_0:a._0,_1:a._1};case 2:return{TAG:1,_0:a._0,_1:a._1}}case 1:return{TAG:1,_0:60,_1:0};case 2:return 0}else switch(b.TAG|0){case 0:return{TAG:0,_0:b._0,_1:0};case 1:var c=b._0;if(typeof a==="number")return a;switch(a.TAG|0){case 0:return{TAG:0,_0:a._0,_1:c};case 1:return{TAG:1,_0:c,_1:a._1};case 2:return{TAG:2,_0:c,_1:a._1}}case 2:c=b._0;if(typeof a==="number")return a;switch(a.TAG|0){case 0:return a;case 1:b=a._0;if(c===b)return{TAG:1,_0:b,_1:0};else return{TAG:1,_0:b,_1:c};case 2:b=a._0;if(c===b)return{TAG:1,_0:b,_1:0};else return{TAG:2,_0:b,_1:c}}}}function j(a){if(window.AudioContext!==void 0)return b("bs_caml_option").some(new window.AudioContext());else if(window.webkitAudioContext!==void 0)return b("bs_caml_option").some(new window.webkitAudioContext());else return}function a(a){a=h.useReducer(i,0);var c=a[1],d=a[0],e=b("useIsMountedRef")(),f=h.useRef(void 0),g=h.useRef([]),k=h.useRef([]),l=h.useRef(void 0),m=h.useRef(void 0),n=h.useRef(void 0),o=h.useRef(void 0),p=h.useRef(void 0),q=h.useCallback(function(a){if(!e.current)return;var d=URL.createObjectURL(a);n.current=d;var f=new Audio(d);f.addEventListener("canplay",function(d){m.current=b("bs_caml_option").some(f);d=f.duration;c({TAG:1,_0:d});d={file:a,duration:d};o.current=d;var e=p.current;if(e!==void 0)return b("bs_curry")._1(e,d)});f.addEventListener("timeupdate",function(a){a=m.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a).currentTime;return c({TAG:2,_0:a})});f.addEventListener("durationchange",function(a){a=m.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a).duration;if(!Number.isNaN(a))return c({TAG:1,_0:a})})},[]),r=h.useCallback(function(a){a=f.current;var c=l.current;if(a===void 0)return;if(c===void 0)return;var d=g.current,e=k.current;d={buffersL:d,buffersR:e,sampleRate:a};b("bs_caml_option").valFromOption(c).postMessage(d)},[]),s;s=typeof d==="number"||d.TAG!==0?!1:!0;var t=h.useCallback(function(a){if(!s)return;a=a.inputBuffer;var b=a.getChannelData(0).slice();a=a.getChannelData(1).slice();g.current.push(b);k.current.push(a)},[s]);h.useEffect(function(){if(typeof d==="number")return;if(d.TAG!==0)return;var a=d._0;g.current=[];k.current=[];var c={contents:void 0},e={contents:void 0};e.contents=j(void 0);var h=e.contents;if(h!==void 0){h=b("bs_caml_option").valFromOption(h);var i=h.destination;f.current=h.sampleRate;var m=h.createScriptProcessor(4096,2,2);c.contents=b("bs_caml_option").some(m);h=h.createMediaStreamSource(a);l.current=b("bs_caml_option").some(new(b("WebWorker"))(b("MWChatRecorderUtilsWorkerResource")).setMessageHandler(b("bs_curry").__1(q)).setAllowCrossPageTransition(!0).execute());m.addEventListener("audioprocess",t);h.connect(m);m.connect(i)}b("MWChatAudioLog.bs").logClickStartRecording(void 0);return function(d){a.getAudioTracks().forEach(function(a){if(a.readyState!=="ended"){a.stop();return}});d=e.contents;d!==void 0&&b("bs_caml_option").valFromOption(d).close();d=c.contents;if(d!==void 0){b("bs_caml_option").valFromOption(d).removeEventListener("audioprocess",t);return}}},[s]);var u=b("usePrevious")(d);h.useEffect(function(){!(u==null)&&typeof u!=="number"&&u.TAG===0&&typeof d!=="number"&&d.TAG===1&&b("bs_curry")._1(r,void 0)},[u,d]);h.useEffect(function(){if(!s)return;var a=Date.now(),d={contents:void 0},e=function e(f){f=(Date.now()-a)/1e3;if(f>=60)return c(1);else{c({TAG:1,_0:f});d.contents=b("bs_caml_option").some(b("setTimeout")(e,1e3));return}};d.contents=b("bs_caml_option").some(b("setTimeout")(e,1e3));return function(a){a=d.contents;if(a!==void 0){b("clearTimeout")(b("bs_caml_option").valFromOption(a));return}}},[s]);a=h.useCallback(function(a){return c({TAG:0,_0:a})},[]);var v=h.useCallback(function(a){c(2);m.current=void 0;o.current=void 0;f.current=void 0;a=n.current;if(a!==void 0){URL.revokeObjectURL(a);n.current=void 0;return}},[]),w=h.useCallback(function(a){var d=m.current;if(d===void 0)return c(0);d=b("bs_caml_option").valFromOption(d);if(typeof a==="number")return c(0);switch(a.TAG|0){case 0:return c(0);case 1:d.play().then(function(a){c(0);return b("Promise").resolve(void 0)})["catch"](function(a){b("MWChatAudioLog.bs").logBrowserDenyAccess(void 0);return b("Promise").resolve(void 0)});return;case 2:d.pause();return c(0)}},[m]),x=h.useCallback(function(a){return new(b("Promise"))(function(d,c){c=o.current;if(c!==void 0)return d(c);p.current=function(a){return d(a)};if(typeof a==="number"||a.TAG!==0)return;else return b("bs_curry")._1(w,a)})},[]);return{state:d,start:a,reset:v,toggle:w,audioEl:m,getVoiceClip:x}}f.useVoiceRecorder=a}),null);
__d("MWV2ComposerEditor.bs",["CometMessengerComposerInner.react","FBID.bs","LS.bs","LSMailboxUpdateDraftMessageStoredProcedure","LSMessagingThreadTypeUtil.bs","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","LSTransaction.bs","Locale","MAWGating.bs","MWChatFocusComposerContext.bs","MWChatUseLatch.bs","MWLSActor.bs","MWPTooltipGroup.react","MWV2ChatComposerGetViewContent","MWV2ChatGrowingHotlikeButton.bs","MWV2ComposerAttachmentButton.bs","MWV2ComposerEmojiButton.bs","MWV2ComposerGifButton.bs","MWV2ComposerHasContentContext.bs","MWV2ComposerMediaStaging.bs","MWV2ComposerPersistentMenuButton.bs","MWV2ComposerPlusButton.bs","MWV2ComposerRoundedCorners.bs","MWV2ComposerSendButton.bs","MWV2ComposerStickerButton.bs","MWV2ComposerVoiceRecorder.bs","MWV2IsTabFocusedContext.bs","MWV2ReplyContext.bs","MWV2Theme.bs","MWV2UseVoiceRecorder.bs","Outline","OutlineParagraphNode","Promise","ReQL.bs","ReQLSubscription.bs","ReQLSuspense.bs","ReQLTable","ReStore.bs","bs_caml","bs_caml_obj","bs_caml_option","bs_curry","bs_int64","gkx","killswitch","promiseDone","react","requireDeferred","stylex","useCometOutlineComposition","useCometOutlineFocusListeners","useCometOutlineIsEmpty","useCometOutlineKeyBindings","useDebounced","useDeferredModuleOnReady","useOutlinePlainText","usePrevious"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={container:{position:"l9j0dhe7",flexGrow:"buofh1pr",overflowX:"ni8dbmo4",overflowY:"stjgntxs"},button:{position:"pmk7jnqg",marginEnd:"cgat1ltu",marginStart:"hcukyx3x",marginBottom:"tvmbv18p",bottom:"i09qtzwb",display:"j83agx80",justifyContent:"taijpn5t",alignItems:"bp9cbjyn"},buttonHidden:{transform:"qpbg1qsm",transitionProperty:"flx89l3n",transitionDuration:"mb8dcdod"},buttonShown:{transform:"g3zh7qmp",transitionProperty:"flx89l3n",transitionDuration:"mb8dcdod"},fileButtonHidden:{transitionDelay:"lbhrjshz"},stickerButtonHidden:{transitionDelay:"awe8hfj4"},gifButtonHidden:{transitionDelay:"lxbcnve3"},fileButtonShown:{transitionDelay:"lbhrjshz"},stickerButtonShown:{transitionDelay:"tntlmw5q"},gifButtonShown:{transitionDelay:"chkx7lpg"},composer:{flexGrow:"buofh1pr",display:"j83agx80",transitionProperty:"flx89l3n",transitionDuration:"dpja2al7"},emojiButton:{right:"kwrap0ej"},outlineParagraph:{marginBottom:"oygrvhab",marginTop:"kvgmc6g5"}},k=b("requireDeferred")("getUpgradedCometUFIEmojiComposerHandler").__setRef("MWV2ComposerEditor.bs");function l(a){return i.useMemo(function(){return b("Outline").createEditor({paragraph:(h||(h=b("stylex")))(j.outlineParagraph)})},[])}function m(a,c){i.useEffect(function(){b("bs_curry")._1(c,a.getViewModel())},[a,c]),i.useEffect(function(){return a.addListener("update",c)},[c,a])}function n(a,c){c=b("bs_curry")._3(b("MWChatUseLatch.bs").useLatch,c,!0,5e3);var d=c[1],e=c[0],f=i.useRef("");i.useEffect(function(){var c=function(c){c=a.getTextContent();if(c!==f.current){f.current=c;if(c==="")return b("bs_curry")._1(d,void 0);else return b("bs_curry")._1(e,void 0)}};return a.addListener("update",c)},[e,d,a])}function o(a,c){var d=b("ReStore.bs").useHook(void 0);return i.useCallback(function(a){b("promiseDone")(b("LSTransaction.bs").run(d,function(d){return b("LSMailboxUpdateDraftMessageStoredProcedure")(c.a,a,b("LS.bs").make(d))},"readWrite"),void 0,void 0)},[d,JSON.stringify(c.a)])}function p(a,c,d){i.useLayoutEffect(function(){return d(function(d){if(!c&&d.keyCode===13&&!d.ctrlKey&&!d.metaKey&&!d.shiftKey&&!d.altKey){d.preventDefault();d.stopImmediatePropagation();b("bs_curry")._1(a,void 0);return"handled"}else return"not-handled"},"EDITOR")},[a,c,d])}function q(a){var c=b("useDeferredModuleOnReady")(k);i.useEffect(function(){if(!(c==null))return b("bs_curry")._1(c,a)},[a,c])}function r(a){var c=b("MWV2ReplyContext.bs").useContext(void 0),d=c.reply,e=b("usePrevious")(d);i.useEffect(function(){var c=e==null?d!==void 0:b("bs_caml_obj").caml_notequal(e,d)?!0:!1;c&&a.focus(function(a){})},[a,d,e==null?void 0:b("bs_caml_option").some(e)])}function s(a,b){return function(a,b){return a instanceof b}(a,b)}function t(a,c){i.useLayoutEffect(function(){a.update(function(a){var d=c.current;if(d===void 0)return;var e=b("bs_curry")._1(a.getRoot,void 0).getFirstChild();if(e!==null){if(!s(e,b("Outline").BlockNode))return;e.clear();var f=b("Outline").createTextNode(d);e.append(f);f.selectEnd();return}e=b("OutlineParagraphNode").createParagraphNode();f=b("Outline").createTextNode(d);e.append(f);b("bs_curry")._1(a.getRoot,void 0).append(e);f.select(void 0,void 0)},"MWV2ComposerEditor.prepopulate",function(a){})},[a,c])}function u(a){var c=b("MWLSActor.bs").useActor(void 0),d=b("ReStore.bs").useHook(void 0),e=b("ReQLSubscription.bs").useArray(i.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"participants").asc,{hd:a.a,tl:0}),function(a){return[b("ReQLSuspense.bs").first(b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"contacts").asc,{hd:a.b,tl:0})),a]})},[d,JSON.stringify(a.a)]));e=e.reduce(function(a,d){var e=d[0];if(e!==void 0&&b("bs_caml").i64_neq(e.a,c))return a.concat([[e,d[1]]]);else return a},[]);return new Map(e.map(function(a){var c=a[1];a=a[0];var d=c.f,e=b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.a)),f=a.h,g=a.h;c=c.e;var h=a.b;d=d!==void 0?d:!1;var i=a.C,j=a.K;e={contactId:e,name:f,actualName:g,nickname:c,profileUrl:void 0,profilePictureUrl:h,isContact:!0,isAdmin:d,jobTitle:i,secondaryName:j};return[b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.a)),e]}))}function v(a){var c=a.thread,d=a.isPreviewThread,e=a.mediaStaging,f=a.onChange,g=a.onSendMessage,k=a.onAttachmentsAdded,s=a.onAttachmentRemoved,v=a.color,w=a.supportedFileTypes;a=a.onTypingStateChanged;var x=c.H,y=i.useRef(null);x=i.useRef(x);var z=l(y),A={contents:function(a){}},B=o(z,c),C=b("useDebounced")(B,2e3,void 0),D=i.useRef(void 0),E=b("MWV2ComposerHasContentContext.bs").useContext(void 0),F=E.shouldClearDraftMessageRef,G=E.hasContentRef;i.useEffect(function(){return function(a){if(F!==void 0&&F.current)return b("bs_curry")._1(B,"");a=D.current;if(a!==void 0)return b("bs_curry")._1(B,a)}},[]);E=i.useCallback(function(a){var c=z.getTextContent();D.current=c;G!==void 0&&(G.current=c!=="");C(c);return b("bs_curry")._1(f,a)},[z,B]);m(z,E);n(z,a);E=b("useCometOutlineKeyBindings")(z);a=b("useCometOutlineFocusListeners").useCometOutlineFocusListeners(z);var H=b("useCometOutlineComposition")(z),I=b("useCometOutlineIsEmpty")(z,H),J=e.length>0,K=!I||J;I=i.useContext(b("MWChatFocusComposerContext.bs").context);var L=I.setFocusComposer;i.useEffect(function(){b("bs_curry")._1(L,function(a){return z.focus(function(a){})})},[z]);var M=b("MWV2IsTabFocusedContext.bs").useContext(void 0);i.useEffect(function(){M&&!d&&z.focus(function(a){})},[z,M,d]);r(z);t(z,x);var N=function(a,c,d,e,f,h,i,j,k,l){b("bs_curry").app(g,[a,c,d,e,f,h,i,j,k,void 0]);return z.focus(function(a){})},O=i.useCallback(function(a){if(!K)return;a=b("MWV2ChatComposerGetViewContent").getRanges(z);N(z.getTextContent(),a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);return b("bs_curry")._1(A.contents,void 0)},[z,N,K]);p(O,H,E);A.contents=b("useOutlinePlainText")(z,!1);q(z);J=u(c);I=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").mentions,c);x=b("Locale").isRTL();H=b("MAWGating.bs").isStickerEnabled(void 0)&&b("LSMessagingThreadTypeUtil.bs").isSecure(c.c);var P=!b("gkx")("1787596")&&(b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").sticker,c)||H),Q=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").gif,c)&&!b("gkx")("1787594"),R=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").filePicker,c)&&!b("gkx")("1787595"),S=32,T=S+32|0,U=x?{right:0..toString()+"px"}:{left:0..toString()+"px"};S=x?{right:S.toString()+"px"}:{left:S.toString()+"px"};T=x?{right:T.toString()+"px"}:{left:T.toString()+"px"};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:(h||(h=b("stylex")))(j.container),children:[i.jsxs(b("MWPTooltipGroup.react"),{children:[i.jsx("div",{className:h(j.button,K?j.buttonHidden:j.buttonShown,K?j.fileButtonHidden:j.fileButtonShown),style:U,children:i.jsx(b("MWV2ComposerAttachmentButton.bs").make,{color:v,onAttachmentsAdded:k,supportedFileTypes:w,disabled:!R})}),i.jsx("div",{className:h(j.button,K?j.buttonHidden:j.buttonShown,K?j.stickerButtonHidden:j.stickerButtonShown),style:S,children:i.jsx(b("MWV2ComposerStickerButton.bs").make,{color:v,onSendMessage:N,disabled:!P,useSecureSend:H})}),i.jsx("div",{className:h(j.button,K?j.buttonHidden:j.buttonShown,K?j.gifButtonHidden:j.gifButtonShown),style:T,children:i.jsx(b("MWV2ComposerGifButton.bs").make,{color:v,onSendMessage:N,disabled:!Q})})]}),i.jsx("div",{className:h(j.composer),style:{transform:"translateX("+(K?"0":(x?"-":"")+"100px")+")"},children:i.jsx(b("CometMessengerComposerInner.react"),{contentEditableRef:y,editor:z,testId:"chat_input:rich-input",topContent:i.jsx(b("MWV2ComposerMediaStaging.bs").make,{thread:c,mediaStaging:e,onAttachmentRemoved:s}),addKeyBinding:E,addFocusListener:a,threadID:b("bs_int64").to_string(c.a),participants:J,handlePastedFiles:k,useMentionsPlugin:I&&b("LSMessagingThreadTypeUtil.bs").isGroup(c.c)})}),i.jsx("div",{className:h(j.button,j.emojiButton),children:i.jsx(b("MWV2ComposerEmojiButton.bs").make,{editor:z,color:v})}),i.jsx(b("MWV2ComposerRoundedCorners.bs").TopRight.make,{}),i.jsx(b("MWV2ComposerRoundedCorners.bs").BottomRight.make,{})]}),K?i.jsx(b("MWV2ComposerSendButton.bs").make,{color:v,onPress:function(a){return b("bs_curry")._1(O,void 0)}}):c.J&&!b("killswitch")("MESSENGER_WEB_PERSISTENT_MENU")?i.jsx(b("MWV2ComposerPersistentMenuButton.bs").make,{thread:c,color:v,onSendMessage:N}):i.jsx(b("MWV2ChatGrowingHotlikeButton.bs").make,{onSendMessage:N,color:v,thread:c})]})}c={make:v};var w={root:{display:"j83agx80",alignItems:"aovydwv3",paddingTop:"pybr56ya",paddingBottom:"f10w8fjw"}};function x(a){}function a(a){var c=a.thread,d=a.isPreviewThread,e=a.mediaStaging,f=a.onChange,g=a.onSendMessage,j=a.onAttachmentsAdded,k=a.onAttachmentRemoved,l=a.onTypingStateChanged;a=a.supportedFileTypes;f=f!==void 0?f:x;l=l!==void 0?l:x;var m=b("MWV2UseVoiceRecorder.bs").useVoiceRecorder(void 0),n=m.state!==0,o=b("MWV2IsTabFocusedContext.bs").useContext(void 0),p=b("MWV2Theme.bs").useBottom(void 0);o=o?p:void 0;p=function(a){b("bs_curry")._1(m.getVoiceClip,m.state).then(function(a){b("bs_curry")._1(m.reset,void 0);b("bs_curry").app(g,[void 0,void 0,void 0,void 0,void 0,void 0,void 0,a,void 0,void 0]);return b("Promise").resolve(void 0)})};return i.jsxs("div",{className:(h||(h=b("stylex")))(w.root),children:[i.jsx(b("MWV2ComposerPlusButton.bs").make,{thread:c,color:o,onSendMessage:g,onAttachmentsAdded:j,voiceRecorder:m,supportedFileTypes:a}),n?i.jsxs(i.Fragment,{children:[i.jsx(b("MWV2ComposerVoiceRecorder.bs").make,{voiceRecorder:m}),i.jsx(b("MWV2ComposerSendButton.bs").make,{color:o,onPress:p})]}):i.jsx(v,{thread:c,isPreviewThread:d,mediaStaging:e,onChange:f,onSendMessage:g,onAttachmentsAdded:j,onAttachmentRemoved:k,color:o,supportedFileTypes:a,onTypingStateChanged:l})]})}d=a;f.Inner=c;f.styles=w;f.noOp=x;f.make=d}),null);
__d("MWV2ComposerMediaUploadUtil.bs",["MessagingAttachmentType.bs","URI","XComposerPhotoUploader","bs_caml","bs_caml_array","bs_caml_int64","bs_caml_option","bs_curry","cometIsMimeTypeForMedia","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g;function a(a,c,d,e,f,h){a=a!==void 0?a:function(a,b){};var i=d!==void 0?d:function(a,b){};d=e!==void 0?e:!1;e=new(b("XComposerPhotoUploader"))({concurrentLimit:3,onUploadFailure:function(a,c){b("bs_curry")._2(i,a,c);return!0},onUploadProgress:b("bs_curry").__2(a),onUploadStart:function(a){},onUploadSuccess:function(a,d){d=b("bs_caml_array").get(d.response.payload.metadata,0);var e=d.fbid,f=d.video_id,g=d.audio_id,h=d.gif_id;d=d.file_id;e=e!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(e)):f!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(f)):g!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(g)):h!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(h)):d!==void 0?b("bs_caml_option").some(b("bs_caml_option").valFromOption(d)):void 0;e!==void 0?b("bs_curry")._2(c,a,e):b("unrecoverableViolation")("Unrecognized file upload success payload","messenger_comet")},retryLimit:1,uploadEndpoint:new(g||(g=b("URI")))("/ajax/mercury/upload.php")});a=d?{data:{voice_clip:!0}}:void 0;e.getAsyncFileUploadRequest(f,h,a).send()}function c(a){a=a.type;if(b("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a))return b("MessagingAttachmentType.bs").image;else if(a==="audio/wav")return b("MessagingAttachmentType.bs").audio;else if(a==="image/gif")return b("MessagingAttachmentType.bs").animatedImage;else if(b("cometIsMimeTypeForMedia").isMimeTypeForVideo(a))return b("MessagingAttachmentType.bs").video;else return b("MessagingAttachmentType.bs").file}function d(a,c){return{attachment_fbid:a.a,offline_attachment_id:a.a,attachment_type:a.c,attachment_index:b("bs_caml_int64").of_int32(c),filename:a.e,filesize:void 0,has_media:!0,has_xma:!1,playable_url:a.j,playable_url_mime_type:a.d,playable_duration_ms:void 0,preview_url:a.j,preview_url_mime_type:void 0,mini_preview:void 0,preview_width:[0,200],preview_height:[0,200],xma_layout_type:void 0,xmas_template_type:void 0,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,image_url:void 0,action_url:void 0,title_text:void 0,subtitle_text:void 0,description_text:void 0,source_text:void 0,original_file_hash:void 0}}function e(a,c,d){return{attachment_fbid:a,offline_attachment_id:a,attachment_type:b("MessagingAttachmentType.bs").audio,attachment_index:b("bs_caml_int64").zero,filename:void 0,filesize:void 0,has_media:!0,has_xma:!1,playable_url:URL.createObjectURL(c),playable_url_mime_type:c.type,playable_duration_ms:b("bs_caml_int64").of_float(d*1e3),preview_url:void 0,preview_url_mime_type:void 0,mini_preview:void 0,preview_width:void 0,preview_height:void 0,xma_layout_type:void 0,xmas_template_type:void 0,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,image_url:void 0,action_url:void 0,title_text:void 0,subtitle_text:void 0,description_text:void 0,source_text:void 0,original_file_hash:void 0}}function h(a){var c=[],d=[];a.forEach(function(a){b("bs_caml").i64_eq(a.attachment_type,b("MessagingAttachmentType.bs").image)?d.push(a):c.push([a])});d.length>0&&c.unshift(d);return c}f.startUpload=a;f.getAttachmentType=c;f.getAttachment=d;f.getAudioAttachment=e;f.partition=h}),null);
__d("MWV2FileDropzone.bs",["fbt","MWPTextCommon.react","bs_curry","gkx","react","recoverableViolation","stylex","useFileDragEvents"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k=j.createContext(null);function l(a){var b=a.fileUploadHandlerRef;a=a.children;return j.createElement(k.Provider,{value:b,children:a})}c={make:l};var m={root:{flexGrow:"buofh1pr",display:"j83agx80",flexDirection:"cbu4d94t",maxWidth:"d2edcug0",position:"l9j0dhe7"},dropzone:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",position:"pmk7jnqg",bottom:"i09qtzwb",end:"n7fi1qx3",start:"j9ispegn",top:"kr520xx4",backgroundColor:"ms7hmo2b",zIndex:"tkr6xdv7"}};function n(a){if(a==null)return[];a=a.dataTransfer;if(a==null)return[];else return a.types}function a(a){a=a.children;var c=j.useRef(null),d=!b("gkx")("1835569"),e=d||c.current==null;d=function(a){var b=c.current;if(b==null)return!1;var d=new Set(["text/plain","text/html","text/uri-list"]);return n(a).every(function(a){return!d.has(a)})};d=b("useFileDragEvents")(function(a){return!1},void 0,d);var f=j.useCallback(function(a){var d=c.current;d==null?b("recoverableViolation")("Could not find fileUploadHandlerRef to handle dropped file!","messenger_comet"):e||b("bs_curry")._1(d,Array.from(a))},[e]),h=j.useRef(null);b("useFileDragEvents")(f,h.current,function(a){return!0});return j.jsxs("div",{className:(i||(i=b("stylex")))(m.root),ref:h,children:[j.jsx(l,{fileUploadHandlerRef:c,children:a}),!e&&d?j.jsx("div",{className:(i||(i=b("stylex")))(m.dropzone),children:j.jsx(b("MWPTextCommon.react"),{type:"body1",children:g._("Coloca los archivos aqu\u00ed")})}):null]})}d=a;f.context=k;f.ContextProvider=c;f.styles=m;f.getMediaTypes=n;f.make=d}),null);
__d("MAWSecureComposer.bs",["fbt","BootloaderResource","FBID.bs","FileInputAcceptValues.bs","JSResource","LS.bs","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSCoreIssueNewErrorStoredProcedure","LSMailboxType.bs","LSMessagingThreadTypeUtil.bs","LSTransaction.bs","MAWAudioUtils","MAWBackendBridge.bs","MAWChatState","MAWComposerUserMessageRequestInfoText.bs","MAWImagePreProcess","MAWJob.bs","MAWMessageRequestUtil.bs","MAWSecureFileUploadErrorDialog.bs","MAWSecureThreadNonAddressableContactBanner.bs","MAWSendMessage.bs","MAWThreadId.bs","MAWVideoPreProcess","MAWVideoUtils","MWChatViewerChatVisibilityHook","MWLSActor.bs","MWLSFeatureLimitedStatus.bs","MWV2ComposerEditor.bs","MWV2ComposerMediaUploadUtil.bs","MWV2FileDropzone.bs","MessagingThreadType.bs","OfflineThreadingId.bs","Promise","ReQL.bs","ReQLSubscription.bs","ReQLSuspense.bs","ReQLTable","ReStore.bs","bs_belt_Option","bs_caml","bs_caml_int64","bs_caml_option","bs_curry","bs_int64","cometIsMimeTypeForMedia","promiseDone","react","unrecoverableViolation","useCometAlertDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react"),j=b("JSResource")("MWChatFeatureLimitsBlockedComposer.bs").__setRef("MAWSecureComposer.bs");function a(a){return{}}function k(a){return i.createElement(b("BootloaderResource").read(j).make,a)}d={reasonResource:j,makeProps:a,make:k};function l(a,c){return(c?b("MAWImagePreProcess").imageTranscode(a,"image/webp"):a.type==="image/gif"||a.type==="image/webp"?b("Promise").resolve(a):b("MAWImagePreProcess").imageTranscode(a,"image/jpeg")).then(function(a){return b("Promise").all([b("MAWImagePreProcess").getJpegThumbnailInfo(a,400),b("MAWImagePreProcess").getImageSpec(a),b("Promise").resolve(a)])}).then(function(a){return b("Promise").resolve({TAG:0,_0:a[2],_1:{imageSpec:a[1],thumbnailUrlAndSpec:a[0]}})})}var m=["audio/*"].concat(b("FileInputAcceptValues.bs").allowedVideoTypes);function n(a){a=i.useState(function(){});var c=a[1],d=b("useCometAlertDialog")(),e=d[0],f=104857600;d=function(a){var d=a.some(function(a){return a.size>f});if(d)return b("bs_curry")._2(e,b("MAWSecureFileUploadErrorDialog.bs").maxFileSizeExceeded(100),function(a){});d=b("Promise").all(a.map(function(a){if(a.type==="image/gif"||a.type==="image/webp"||b("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a.type))return l(a,!1);else if(b("cometIsMimeTypeForMedia").isMimeTypeForVideo(a.type))return b("MAWVideoPreProcess").processRawVideo(a,!1).then(function(a){return b("Promise").all([b("Promise").resolve(a),b("MAWVideoUtils").getVideoThumbnailUrlAndSpec(a)])}).then(function(a){return b("Promise").resolve({TAG:1,_0:a[0],_1:{thumbnailUrlAndSpec:a[1]}})});else return b("MAWAudioUtils").getAudioDurationInSeconds(a).then(function(c){return b("Promise").resolve({TAG:2,_0:a,_1:{durations:c,isPtt:!0}})})})).then(function(a){var d=a.map(function(a){return[a,b("OfflineThreadingId.bs").make(void 0)]});b("bs_curry")._1(c,function(a){return d});a.forEach(function(a){switch(a.TAG|0){case 0:case 1:case 2:return b("bs_curry")._1(b("MAWBackendBridge.bs").optimisticUploadMedia({file:a._0}).fireAndForget,void 0)}});return b("Promise").resolve(void 0)});b("promiseDone")(d,void 0,void 0)};var g=function(a){return b("bs_curry")._1(c,function(b){if(b!==void 0)return b.filter(function(b){return b[1]!==a})})},h=function(a){return b("bs_curry")._1(c,function(a){})};return[a[0],d,g,h]}e={useMediaManager:n};function o(a){}function p(a,c,d,e){if(b("bs_caml").i64_eq(d,b("MessagingThreadType.bs").secureMessageOverWaOneToOne)){return(d=b("ReQL.bs")).first(d.map(d.filter(d.getKeyRange(b("ReQLTable").table(a,"participants").asc,{hd:c,tl:0}),function(a){return b("bs_caml").i64_neq(a.b,e)}),function(c){return b("bs_belt_Option").mapWithDefault(b("ReQLSuspense.bs").first(b("ReQL.bs").getKeyRange(b("ReQLTable").table(a,"contacts").asc,{hd:c.b,tl:0})),!1,function(a){return b("bs_caml").i64_eq(a.n,b("LSContactBlockedByViewerStatus.bs").unblocked)})})).then(function(a){return b("Promise").resolve(b("bs_belt_Option").getWithDefault(a,!1))})}else return b("Promise").resolve(!1)}function q(a){var c=b("ReStore.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0),e=b("MWChatViewerChatVisibilityHook")();return i.useCallback(function(f){if(!(b("bs_caml").i64_ge(a.Z,b("LSAuthorityLevel.bs").authoritative)&&b("LSMessagingThreadTypeUtil.bs").isSecure(a.c)&&e))return;var g=p(c,a.a,a.c,d).then(function(c){if(c){c=b("MAWThreadId.bs").ofThreadKey(a.a);c&&b("bs_curry")._1(b("MAWBackendBridge.bs").sendChatStateFromComposer({threadId:c._0,state:f?b("MAWChatState").TYPING:b("MAWChatState").IDLE}).fireAndForget,void 0)}return b("Promise").resolve(void 0)});b("promiseDone")(g,void 0,void 0)},[c,JSON.stringify(a.Z),JSON.stringify(a.a),JSON.stringify(a.c),e,d])}function c(a){var c=a.thread,d=a.isPreviewThread;a=a.afterSendMessage;var e=a!==void 0?a:o;a=b("MWLSFeatureLimitedStatus.bs").useIsReadOnlyFeatureLimited(void 0);var f=b("ReStore.bs").useHook(void 0),h=n(void 0),j=h[3],p=h[1],r=h[0],s=i.useMemo(function(){return b("bs_belt_Option").getWithDefault(r,[]).map(function(a){var d=a[0]._0;return{a:a[1],b:b("LSMailboxType.bs").messenger,c:b("MWV2ComposerMediaUploadUtil.bs").getAttachmentType(d),d:d.type,e:d.name,f:b("bs_caml_int64").of_int32(d.size),g:void 0,h:c.a,i:void 0,j:URL.createObjectURL(d),k:void 0,l:void 0,m:void 0,n:0,o:!1,p:!1}})},[r]),t=i.useMemo(function(){if(b("bs_caml").i64_eq(c.Z,b("LSAuthorityLevel.bs").optimistic))return b("bs_caml").i64_eq(c.c,b("MessagingThreadType.bs").secureMessageOverWaGroup);else return!1},[c]),u=b("ReQLSubscription.bs").useArray(i.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").filter(b("ReQLTable").table(f,"participants").asc,function(a){return b("bs_caml").i64_eq(a.a,c.a)}),function(a){return b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.b))})},[c])),v=b("MAWSendMessage.bs").use(void 0),w=function(a,d,h,i,k,m,n,o,p,q){d=r!==void 0?r.length!==0||o!==void 0?!0:m!==void 0:o!==void 0?!0:m!==void 0;var s=a!==void 0?a.trim():d?"":"\ud83d\udc4d";h=function(a){if(t)return b("MAWJob.bs").createGroup.waitUntilCompleted(void 0,u,b("bs_int64").to_string(c.a)).then(function(c){var a=c.error;c=c.value;var d,e=0;a!==void 0||c===void 0?e=1:d=b("MAWThreadId.bs").toThreadKey(c.threadId);if(e===1){var h=g._("No se pudo crear el grupo").toString();a=b("LSTransaction.bs").run(f,function(a){return b("LSCoreIssueNewErrorStoredProcedure")(void 0,void 0,h,h,b("LS.bs").make(a))},"readWrite");b("promiseDone")(a,void 0,void 0);d=b("unrecoverableViolation")("Unable to create group","messenger_e2ee_web")}return b("Promise").resolve(d)});else return b("Promise").resolve(c.a)};var w=function(a){if(s!==""){a=b("MAWThreadId.bs").ofThreadKey(a);if(a)return b("bs_curry")._2(v,a._0,s);else return}},x=function(a){var c=o!==void 0?[[{TAG:2,_0:o.file,_1:{durations:o.duration|0,isPtt:!0}},""]]:[],d=r!==void 0?r:[],e=m!==void 0?window.fetch(m).then(function(a){return a.blob()}).then(function(a){var b=m.includes(".webp?");return l(new File([a],"stickerFromPicker",{type:b?"image/webp":"image/png"}),!b)}).then(function(a){return b("Promise").resolve([[a,""]])}):b("Promise").resolve([]);e=e.then(function(e){e=d.concat(c,e);e.forEach(function(c){c=c[0];var d=b("MAWThreadId.bs").ofThreadKey(a);if(!d)return;d=d._0;switch(c.TAG|0){case 0:var e=c._1;return b("MAWJob.bs").sendMediaMsg.fireAndForget(d,c._0,b("bs_caml_option").some(e.thumbnailUrlAndSpec.jpegThumbnail),e.imageSpec.width,e.imageSpec.height,e.thumbnailUrlAndSpec.width,e.thumbnailUrlAndSpec.height,void 0,void 0);case 1:e=c._1;return b("MAWJob.bs").sendMediaMsg.fireAndForget(d,c._0,b("bs_caml_option").some(e.thumbnailUrlAndSpec.jpegThumbnail),e.thumbnailUrlAndSpec.width,e.thumbnailUrlAndSpec.height,e.thumbnailUrlAndSpec.width,e.thumbnailUrlAndSpec.height,void 0,void 0);case 2:e=c._1;return b("MAWJob.bs").sendMediaMsg.fireAndForget(d,c._0,void 0,void 0,void 0,void 0,void 0,e.durations,e.isPtt)}});return b("Promise").resolve(void 0)});b("promiseDone")(e,void 0,void 0)};i=h(void 0).then(function(a){w(a);return b("Promise").resolve(a)}).then(function(a){x(a);b("bs_curry")._1(e,void 0);return b("Promise").resolve(void 0)});b("promiseDone")(i,void 0,void 0);return b("bs_curry")._1(j,void 0)},x=function(a){if(!b("LSMessagingThreadTypeUtil.bs").isSecure(c.c))return;a=b("MAWThreadId.bs").ofThreadKey(c.a);if(a)return b("bs_curry")._1(b("MAWBackendBridge.bs").deleteThread({threadId:a._0}).fireAndForget,void 0)},y=b("MAWMessageRequestUtil.bs").isOneOnOneMessageRequest(c),z=q(c),A=i.useContext(b("MWV2FileDropzone.bs").context);i.useImperativeHandle(A,function(){return b("bs_curry").__1(p)},[p]);return i.jsxs("div",{children:[i.jsx(b("MAWSecureThreadNonAddressableContactBanner.bs").make,{thread:c}),y?i.jsx(b("MAWComposerUserMessageRequestInfoText.bs").make,{thread:c,size:"large",onDeleteThread:x}):null,a?i.jsx(k,{}):i.jsx(b("MWV2ComposerEditor.bs").make,{thread:c,isPreviewThread:d,mediaStaging:s,onSendMessage:w,onAttachmentsAdded:p,onAttachmentRemoved:h[2],onTypingStateChanged:z,supportedFileTypes:m})]})}a=c;f.MWChatFeatureLimitsBlockedComposerLazy=d;f.MediaManager=e;f.make=a}),null);
__d("useArmadilloDogfoodingUpsellNUX",["CometDismissFBNuxMutation","CometLogImpressionFBNuxMutation","CometRelay","RelayHooks","promiseDone","react","useArmadilloDogfoodingUpsellNUXQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react").useCallback,j=9564,k=h!==void 0?h:h=b("useArmadilloDogfoodingUpsellNUXQuery.graphql");function a(){var a=d("RelayHooks").useRelayEnvironment(),b=i(function(b){c("promiseDone")(d("CometRelay").fetchQuery(a,k,{id:j}).toPromise(),function(a){a=(a=a==null?void 0:(a=a.nux)==null?void 0:a.should_show)!=null?a:!1;b(a)},null)},[a]),e=i(function(){d("CometDismissFBNuxMutation").commit(a,j)},[a]),f=i(function(){d("CometLogImpressionFBNuxMutation").commit(a,j)},[a]);return[b,e,f]}g["default"]=a}),98);
__d("MDSSvgDocumentCompleteIcon.bs",["MDSSvgIcon.bs","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.color;a=a.size;return h.jsxs(b("MDSSvgIcon.bs").make,{size:a,color:c,children:[h.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 8c0-.6-.4-1-1-1h-6a2 2 0 00-2 2v18c0 1.1.9 2 2 2h14a2 2 0 002-2V17c0-.6-.4-1-1-1h-4a4 4 0 01-4-4V8zm-6 7c0-.6.4-1 1-1h2a1 1 0 110 2h-2a1 1 0 01-1-1zm1 3.5a1 1 0 100 2h10a1 1 0 100-2H13zm0 4.5a1 1 0 100 2h10a1 1 0 100-2H13z"}),h.jsx("path",{d:"M22 14h4a1 1 0 00.7-1.7l-5-5A1 1 0 0020 8v4c0 1.1.9 2 2 2z"})]})}c=a;f.make=c}),null);
__d("MWChatFileIconV2.bs",["MDSSvgDocumentCompleteIcon.bs","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={icon:{display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",paddingTop:"ecm0bbzt",paddingEnd:"ph5uu5jm",paddingBottom:"e5nlhep0",paddingStart:"b3onmgus",backgroundColor:"ktb7bhlx",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv"}};function a(a){return i.jsx("div",{className:(h||(h=b("stylex")))(j.icon),children:i.jsx(b("MDSSvgDocumentCompleteIcon.bs").make,{color:"primary",size:"24"})})}c=a;f.styles=j;f.make=c}),null);
__d("MWChatFilePreview.bs",["CometImageCover.react","MWChatFileIconV2.bs","bs_belt_Option","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={icon:{paddingStart:"tw6a2znq"}};function a(a){var c=a.attachment,d=a.fileName;a=a.withPreview;var e={maxHeight:"148px",objectPosition:"top"},f=i.jsx("div",{className:(h||(h=b("stylex")))(j.icon),children:i.jsx(b("MWChatFileIconV2.bs").make,{})});c=b("bs_belt_Option").flatMap(c,function(a){return a.F});if(c===void 0)return f;if(!a)return f;a=b("bs_belt_Option").getWithDefault(d,"");return i.jsx(b("CometImageCover.react"),{alt:a,src:c,style:e})}c=a;f.styles=j;f.make=c}),null);
__d("WAResultOrError",[],(function(a,b,c,d,e,f){function a(a){return{success:!1,error:a}}function b(a){return{success:!0,value:a}}f.makeError=a;f.makeSuccess=b}),66);
__d("WABinary",["WAHex"],(function(a,b,c,d,e,f,g){var h=65533,i=10,j=new Uint8Array(i),k=new Uint8Array(0);a=function(){function a(b,c){var d=this;b===void 0&&(b=k);c===void 0&&(c=!1);this.write=function(){for(var b=0;b<arguments.length;b++){var c=b<0||arguments.length<=b?void 0:arguments[b];typeof c==="string"?d.writeString(c):typeof c==="number"?d.writeUint8(c):c instanceof a?d.writeBinary(c):c instanceof ArrayBuffer?d.writeBuffer(c):c instanceof Uint8Array&&d.writeByteArray(c)}};b instanceof ArrayBuffer?(this.$1=new Uint8Array(b),this.$2=this.$4=b.byteLength):b instanceof Uint8Array&&(this.$1=b,this.$2=this.$4=b.length);this.$5=0;this.$6=this.$3=0;this.$7=null;this.$8=c;this.$9=0;this.$10=0}var b=a.prototype;b.size=function(){return this.$2-this.$3};b.peek=function(a,b){this.$9++;var c=this.$3,d=this.$5;try{return a(this,b)}finally{this.$9--,this.$3=c-(this.$5-d)}};b.advance=function(a){this.$11(a)};b.readWithViewParser=function(a,b,c,d){return b(this.$12(),this.$11(a),a,c,d)};b.readWithBytesParser=function(a,b,c,d){return b(this.$1,this.$11(a),a,c,d)};b.readUint8=function(){return p(this,1,r,!1)};b.readInt8=function(){return p(this,1,r,!0)};b.readUint16=function(a){a===void 0&&(a=this.$8);return p(this,2,s,a)};b.readInt32=function(a){a===void 0&&(a=this.$8);return p(this,4,t,a)};b.readUint32=function(a){a===void 0&&(a=this.$8);return p(this,4,u,a)};b.readInt64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,U,a)};b.readUint64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,V,a)};b.readLong=function(a,b){b===void 0&&(b=this.$8);return p(this,8,v,a,b)};b.readFloat32=function(a){a===void 0&&(a=this.$8);return p(this,4,w,a)};b.readFloat64=function(a){a===void 0&&(a=this.$8);return p(this,8,x,a)};b.readVarInt=function(a){var b=this.size();b=q(this,0,y,b);return q(this,b,z,a)};b.readBuffer=function(a){a===void 0&&(a=this.size());return a===0?new ArrayBuffer(0):q(this,a,A)};b.readByteArray=function(a){a===void 0&&(a=this.size());return a===0?new Uint8Array(0):q(this,a,B)};b.readBinary=function(b,c){b===void 0&&(b=this.size());c===void 0&&(c=this.$8);if(b===0)return new a(void 0,c);b=q(this,b,B);return new a(b,c)};b.indexOf=function(a){if(a.length===0)return 0;var b=this.$1,c=this.$2,d=this.$3,e=0,f=d;for(var g=d;g<c;g++)if(b[g]===a[e]){e===0&&(f=g);e++;if(e===a.byteLength)return g-d-a.byteLength+1}else e>0&&(e=0,g=f);return-1};b.readString=function(a){return q(this,a,C)};b.ensureCapacity=function(a){this.$13(this.$3+a)};b.ensureAdditionalCapacity=function(a){this.$13(this.$4+a)};b.writeToView=function(a,b,c,d){var e=this.$14(a);return b(this.$12(),e,a,c,d)};b.writeToBytes=function(a,b,c,d){var e=this.$14(a);return b(this.$1,e,a,c,d)};b.writeUint8=function(a){S(a,0,256,"uint8"),E(this,1,F,a,!1)};b.writeInt8=function(a){S(a,-128,128,"signed int8"),E(this,1,F,a,!0)};b.writeUint16=function(a,b){b===void 0&&(b=this.$8),S(a,0,65536,"uint16"),D(this,2,G,a,b)};b.writeInt16=function(a,b){b===void 0&&(b=this.$8),S(a,-32768,32768,"signed int16"),D(this,2,H,a,b)};b.writeUint32=function(a,b){b===void 0&&(b=this.$8),S(a,0,4294967296,"uint32"),D(this,4,I,a,b)};b.writeInt32=function(a,b){b===void 0&&(b=this.$8),S(a,-2147483648,2147483648,"signed int32"),D(this,4,J,a,b)};b.writeUint64=function(a,b){b===void 0&&(b=this.$8),S(a,0,18446744073709552e3,"uint64"),D(this,8,K,a,b)};b.writeInt64=function(a,b){b===void 0&&(b=this.$8),S(a,-9223372036854776e3,9223372036854776e3,"signed int64"),D(this,8,K,a,b)};b.writeFloat32=function(a,b){b===void 0&&(b=this.$8),D(this,4,L,a,b)};b.writeFloat64=function(a,b){b===void 0&&(b=this.$8),D(this,8,M,a,b)};b.writeVarInt=function(a){S(a,-9223372036854776e3,9223372036854776e3,"varint (signed int64)");var b=a<0;a=b?-a:a;var c=Math.floor(a/4294967296);a=a-c*4294967296;b&&(c=~c,a===0?c++:a=-a);b=R(c,a);E(this,b,N,c,a)};b.writeVarIntFromHexLong=function(a){var b=d("WAHex").hexLongIsNegative(a);a=b?d("WAHex").negateHexLong(a):a;a=d("WAHex").hexLongToHex(a);var c=0,e=0;for(var f=0;f<d("WAHex").NUM_HEX_IN_LONG;f++)c=c<<4|e>>>28,e=e<<4|d("WAHex").hexAt(a,f);b&&(c=~c,e===0?c++:e=-e);a=R(c,e);E(this,a,N,c,e)};b.writeBinary=function(a){a=a.peek(function(a){return a.readByteArray()});if(a.length){var b=this.$14(a.length);this.$1.set(a,b)}};b.writeBuffer=function(a){this.writeByteArray(new Uint8Array(a))};b.writeByteArray=function(a){var b=this.$14(a.length);this.$1.set(a,b)};b.writeBufferView=function(a){this.writeByteArray(new Uint8Array(a.buffer,a.byteOffset,a.byteLength))};b.writeString=function(a){E(this,n(a),O,a)};b.writeHexLong=function(a,b){b===void 0&&(b=this.$8),D(this,8,P,a,b)};b.writeBytes=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];for(var d=0;d<b.length;d++)S(b[d],0,256,"byte");E(this,b.length,Q,b)};b.writeAtomically=function(a,b){this.$10++;var c=this.$4,d=this.$5;try{a=a(this,b);c=this.$4;d=this.$5;return a}finally{this.$10--,this.$4=c-(this.$5-d)}};b.writeWithVarIntLength=function(a,b){var c=this.$4;a=this.writeAtomically(a,b);b=this.$4;this.writeVarInt(b-c);var d=this.$4-b,e=this.$1;for(var f=0;f<d;f++)j[f]=e[b+f];for(var f=b-1;f>=c;f--)e[f+d]=e[f];for(var b=0;b<d;b++)e[c+b]=j[b];return a};a.build=function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=0;for(var f=0;f<c.length;f++){var g=c[f];typeof g==="string"?e+=n(g):typeof g==="number"?e++:g instanceof a?e+=g.size():g instanceof ArrayBuffer?e+=g.byteLength:g instanceof Uint8Array&&(e+=g.length)}var h=new a();h.ensureCapacity(e);h.write.apply(h,arguments);return h};b.$12=function(){return this.$7||(this.$7=new DataView(this.$1.buffer,this.$1.byteOffset))};b.$11=function(a){if(a<0)throw new Error("ReadError: given negative number of bytes to read");var b=this.$3;a=b+a;if(a>this.$2)throw new Error(b===this.$2?"ReadError: tried to read from depleted binary":"ReadError: tried to read beyond end of binary");this.$3=a;this.$9||(this.$6=a);return b};b.$13=function(a){var b=this.$1;if(a<=b.length)return a;else{var c=this.$6;a=a-c;var d=Math.max(a,2*(b.length-c),64);d=new Uint8Array(d);c?(d.set(b.subarray(c)),this.$5+=c,this.$3-=c,this.$2-=c,this.$4-=c,this.$6=0):d.set(b);this.$1=d;this.$7=null;return a}};b.$14=function(a){a=this.$13(this.$4+a);var b=this.$4;this.$4=a;this.$10||(this.$2=a);return b};return a}();var l="",m=0;function n(a){if(a===l)return m;var b=a.length,c=0;for(var d=0;d<b;d++){var e=a.charCodeAt(d);if(e<128)c++;else if(e<2048)c+=2;else if(e<55296||57344<=e&&e<=65535)c+=3;else if(55296<=e&&e<56320&&d+1!==b){e=a.charCodeAt(d+1);56320<=e&&e<57344?(d++,c+=4):c+=3}else c+=3}l=a;return m=c}function o(a,b,c){var d=b>>21;if(!a)return d===0;else{a=b&2097151;b=Boolean(a||c);return d===0||d===-1&&b}}function p(a,b,c,d,e){return a.readWithViewParser(b,c,d,e)}function q(a,b,c,d,e){return a.readWithBytesParser(b,c,d,e)}function r(a,b,c,d){return d?a.getInt8(b):a.getUint8(b)}function s(a,b,c,d){return a.getUint16(b,d)}function t(a,b,c,d){return a.getInt32(b,d)}function u(a,b,c,d){return a.getUint32(b,d)}function v(a,b,c,d,e){c=a.getInt32(e?b+4:b,e);a=a.getInt32(e?b:b+4,e);return d(c,a)}function w(a,b,c,d){return a.getFloat32(b,d)}function x(a,b,c,d){return a.getFloat64(b,d)}function y(a,b,c,d){c=Math.min(d,i);d=0;var e=128;while(d<c&&e&128)e=a[b+d++];if(d===i&&e>1)throw new Error("ParseError: varint exceeds 64 bits");else if(e&128)return d+1;return d}function z(b,c,d,a){var e=0,f=0,g=d;d===i&&(g--,f=b[c+g]&1);for(var d=g-1;d>=0;d--)e=e<<7|f>>>25,f=f<<7|b[c+d]&127;return a(e,f)}function A(a,b,c){b=b+a.byteOffset;a=a.buffer;return b===0&&c===a.byteLength?a:a.slice(b,b+c)}function B(a,b,c){return a.subarray(b,b+c)}function C(a,b,c){c=b+c;var d=[],e=null;for(var b=b;b<c;b++){d.length>5e3&&(e||(e=[]),e.push(String.fromCharCode.apply(String,d)),d=[]);var f=a[b]|0;if((f&128)===0)d.push(f);else if((f&224)===192){var g=W(a,b+1,c);if(g){b++;g=(f&31)<<6|g&63;g>=128?d.push(g):d.push(h)}else d.push(h)}else if((f&240)===224){g=W(a,b+1,c);var i=W(a,b+2,c);if(g&&i){b+=2;i=(f&15)<<12|(g&63)<<6|i&63;i>=2048&&!(55296<=i&&i<57344)?d.push(i):d.push(h)}else g?(b++,d.push(h)):d.push(h)}else if((f&248)===240){i=W(a,b+1,c);g=W(a,b+2,c);var j=W(a,b+3,c);if(i&&g&&j){b+=3;f=(f&7)<<18|(i&63)<<12|(g&63)<<6|j&63;if(f>=65536&&f<=1114111){j=f-65536;d.push(55296|j>>10,56320|j&1023)}else d.push(h)}else i&&g?(b+=2,d.push(h)):i?(b++,d.push(h)):d.push(h)}else d.push(h)}f=String.fromCharCode.apply(String,d);if(e){e.push(f);return e.join("")}else return f}function D(a,b,c,d,e){return a.writeToView(b,c,d,e)}function E(a,b,c,d,e){return a.writeToBytes(b,c,d,e)}function F(a,b,c,d){a[b]=d}function G(a,b,c,d,e){a.setUint16(b,d,e)}function H(a,b,c,d,e){a.setInt16(b,d,e)}function I(a,b,c,d,e){a.setUint32(b,d,e)}function J(a,b,c,d,e){a.setInt32(b,d,e)}function K(a,b,c,d,e){c=d<0;d=c?-d:d;var f=Math.floor(d/4294967296);d=d-f*4294967296;c&&(f=~f,d===0?f++:d=-d);a.setUint32(e?b+4:b,f,e);a.setUint32(e?b:b+4,d,e)}function L(a,b,c,d,e){a.setFloat32(b,d,e)}function M(a,b,c,d,e){a.setFloat64(b,d,e)}function N(a,b,c,d,e){d=d;e=e;c=b+c-1;for(var b=b;b<c;b++)a[b]=128|e&127,e=d<<25|e>>>7,d>>>=7;a[c]=e}function O(a,b,c,d){c=b;b=d.length;for(var e=0;e<b;e++){var f=d.charCodeAt(e);if(f<128)a[c++]=f;else if(f<2048)a[c++]=192|f>>6,a[c++]=128|f&63;else if(f<55296||57344<=f)a[c++]=224|f>>12,a[c++]=128|f>>6&63,a[c++]=128|f&63;else if(55296<=f&&f<56320&&e+1!==b){var g=d.charCodeAt(e+1);if(56320<=g&&g<57344){e++;f=65536+((f&1023)<<10|g&1023);a[c++]=240|f>>18;a[c++]=128|f>>12&63;a[c++]=128|f>>6&63;a[c++]=128|f&63}else a[c++]=239,a[c++]=191,a[c++]=189}else a[c++]=239,a[c++]=191,a[c++]=189}}function P(a,b,c,e,f){c=d("WAHex").hexLongIsNegative(e);e=d("WAHex").hexLongToHex(e);var g=0,h=0;for(var i=0;i<16;i++)g=g<<4|h>>>28,h=h<<4|d("WAHex").hexAt(e,i);c&&(g=~g,h===0?g++:h=-h);a.setUint32(f?b+4:b,g,f);a.setUint32(f?b:b+4,h,f)}function Q(a,b,c,d){for(var e=0;e<c;e++)a[b+e]=d[e]}function R(a,b){var c;a?(c=5,a=a>>>3):(c=1,a=b>>>7);while(a)c++,a>>>=7;return c}function S(a,b,c,d){if(typeof a!=="number"||a!==a||Math.floor(a)!==a||a<b||a>=c)throw new TypeError(typeof a==="string"?'WriteError: string "'+a+'" is not a valid '+d:"WriteError: "+String(a)+" is not a valid "+d)}function T(a,b,c){var d=o(a,b,c),e;b>=0?e=b:e=a?b:4294967296+b;a=c>=0?c:4294967296+c;b=e*4294967296+a;if(!d)throw new Error("ReadError: integer exceeded 53 bits ("+b+")");return b}function U(a,b){return T(!0,a,b)}function V(a,b){return T(!1,a,b)}function W(a,b,c){if(b>=c)return 0;c=a[b]|0;return(c&192)===128?c:0}g.Binary=a;g.numUtf8Bytes=n;g.longFitsInDouble=o;g.parseInt64OrThrow=U;g.parseUint64OrThrow=V}),98);
__d("WACryptoUtils",[],(function(a,b,c,d,e,f){function a(a,b){return g(new Uint8Array(a),new Uint8Array(b))}function g(a,b){if(a.length!==b.length)return!1;var c=1,d=a.length;for(var e=0;e<d;e++)c&=a[e]===b[e]?1:0;return c!==0}function b(a){if(a!==(a|0))throw new Error("bound must be int32");if(a<=0)throw new Error("bound must not be positive");var b=new Int32Array(1),c=-1>>>1;c=a*Math.floor(c/a);var d=-1;while(d===-1){self.crypto.getRandomValues(b);var e=b[0]>>>1;e<c&&(d=e%a)}return d}f.areBuffersEqual=a;f.areBytesEqual=g;f.randomNumberLessThan=b}),66);
__d("WAHasProperty",[],(function(a,b,c,d,e,f){function a(a,b){return Object.prototype.hasOwnProperty.call(a,b)}f["default"]=a}),66);
__d("WAProtoConst",[],(function(a,b,c,d,e,f){a={REPEATED:1<<6,PACKED:1<<7,REQUIRED:1<<8};b=31;c={INT32:1,INT64:2,UINT32:3,UINT64:4,SINT32:5,SINT64:6,BOOL:7,ENUM:8,FIXED64:9,SFIXED64:10,DOUBLE:11,STRING:12,BYTES:13,MESSAGE:14,FIXED32:15,SFIXED32:16,FLOAT:17};d={VARINT:0,BIT64:1,BINARY:2,BIT32:5};e={ONEOF:"__oneofs__",RESERVED:"__reserved__",RESERVED_TAGS:"tags",RESERVED_FIELDS:"fields"};f.FLAGS=a;f.TYPE_MASK=b;f.TYPES=c;f.ENC=d;f.KEYS=e}),66);
__d("WAProtoCompile",["WAProtoConst"],(function(a,b,c,d,e,f,g){var h=function(a,b,c,d,e,f,g,h,i){this.names=a,this.fields=b,this.types=c,this.defaults=d,this.meta=e,this.oneofToFields=f,this.fieldToOneof=g,this.reservedTags=h?h.reduce(function(a,b){a[b]=!0;return a},{}):{},this.reservedFields=i?i.reduce(function(a,b){a[b]=!0;return a},{}):{}};function a(a){if(a.internalCompiledSpec)return a.internalCompiledSpec;var b=a.internalSpec;if(!b)throw new Error("Message Class "+String(a)+" does not have internalSpec");var c=a.internalDefaults||{},e=Object.keys(b).filter(function(a){return a!==d("WAProtoConst").KEYS.ONEOF}),f=new Array(e.length),g=[],j=[],k=new Array(e.length),l=b[d("WAProtoConst").KEYS.ONEOF]||{};e.sort(function(a,c){a=i(b,a);c=i(b,c);return a[0]-c[0]});for(var m=0;m<e.length;m++){var n=e[m],o=i(b,n);k[m]=c[n];n=o[1];var p=o[0];g.push(p);j.push(n);if((n&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE)f[m]=o[2];else if((n&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.ENUM){p=o[2];if(typeof p.cast==="function")f[m]=p;else{n=!0;o=0;for(var q in p)n&&q!==o++&&(n=!1);var r=void 0;if(n){r=[];for(var n=0;n<o;n++)r.push(!0)}else{r={};for(var s in p)r[p[s]]=!0}f[m]=r}}else f[m]=null}var t={};n=function(a){l[a].forEach(function(b){t[b]||(t[b]=[]),t[b].push(a)})};for(var u in l)n(u);o=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_TAGS];p=b[d("WAProtoConst").KEYS.RESERVED]&&b[d("WAProtoConst").KEYS.RESERVED][d("WAProtoConst").KEYS.RESERVED_FIELDS];r=new h(e,g,j,k,f,l,t,o,p);a.internalCompiledSpec=r;return r}function i(a,b){a=a[b];if(a==null)throw new Error("fieldData of "+b+" is missing");return a}g.Spec=h;g.compileSpec=a}),98);
__d("WAProtoUtils",["WAProtoConst"],(function(a,b,c,d,e,f,g){function a(a){if(a&d("WAProtoConst").FLAGS.PACKED)return d("WAProtoConst").ENC.BINARY;a=a&d("WAProtoConst").TYPE_MASK;if(a<=d("WAProtoConst").TYPES.ENUM)return d("WAProtoConst").ENC.VARINT;else if(a<=d("WAProtoConst").TYPES.DOUBLE)return d("WAProtoConst").ENC.BIT64;else if(a<=d("WAProtoConst").TYPES.MESSAGE)return d("WAProtoConst").ENC.BINARY;else return d("WAProtoConst").ENC.BIT32}g.typeToEncType=a}),98);
__d("WAProtoValidate",["WAHasProperty","WALogger","WAProtoCompile","WAProtoConst"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not an array']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not ',""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is out of range']);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid int']);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid long']);l=function(){return a};return a}var m=Number.MAX_SAFE_INTEGER;function n(a,b){a=o(a,b);if(a){a.reverse();throw new TypeError("Message missing required value "+a.join("."))}}function a(a,b){n(a,b);b=u(b,a);if(b){b.path.reverse();throw new TypeError("Invalid value at "+b.path.join(".")+": "+b.error)}}function o(a,b){a=d("WAProtoCompile").compileSpec(a);var e=a.names,f=a.types;a=a.meta;var g=void 0;for(var h=0;h<f.length&&!g;h++){var i=f[h],j=e[h],k=c("WAHasProperty")(b,j)?b[j]:void 0;if(i&d("WAProtoConst").FLAGS.REQUIRED&&k===void 0)g=[j];else if((i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&i&d("WAProtoConst").FLAGS.REPEATED&&k!==void 0){var l=a[h],m=void 0;for(m=0;m<k.length&&!g;m++)g=o(l,k[m]);g&&g.push(j+"["+m+"]")}else(i&d("WAProtoConst").TYPE_MASK)===d("WAProtoConst").TYPES.MESSAGE&&k!==void 0&&(g=o(a[h],k),g&&g.push(j))}return g}function p(a,b,c){if(typeof a==="string")if(/^-?0x[0-9a-f]{16}$/i.test(a))return!1;else{d("WALogger").LOG(l(),s(a)).color("red");return{path:[],error:"value must be a hex string of the form '0x123...' or '-0x123...' where the tail is always 16 characters long"}}else return q(a,b,c)}function q(a,b,c){if(typeof a!=="number"||a!==a||Math.floor(a)!==a){d("WALogger").LOG(k(),s(a)).color("red");return{path:[],error:"value must be an int"}}else if(a<b||a>=c){d("WALogger").LOG(j(),s(a)).color("red");return{path:[],error:"value is out of range"}}else return!1}function r(a,b,c){if(a)return void 0;else{d("WALogger").LOG(i(),s(c),b).color("red");return{path:[],error:"value is invalid"}}}function s(a){if(typeof a==="string")return'"'+a+'"';else if(Array.isArray(a))return"["+a.join(", ")+"]";else return""+a}var t=[void 0,function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return q(a,0,4294967296)},function(a){return p(a,0,m+1)},function(a){return q(a,-2147483648,2147483648)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="boolean","boolean",a)},function(a,b){return r(typeof a==="number"&&(b[a]||b.cast(a)!==void 0),"in enum",a)},function(a){return p(a,0,m+1)},function(a){return p(a,-m,m+1)},function(a){return r(typeof a==="number","number",a)},function(a){return r(typeof a==="string","string",a)},function(a){return r(a instanceof ArrayBuffer||a instanceof Uint8Array,"ArrayBuffer or Uint8Array",a)},u,function(a){return q(a,0,4294967296)},function(a){return q(a,-2147483648,2147483648)},function(a){return r(typeof a==="number","number",a)}];function u(a,b){b=d("WAProtoCompile").compileSpec(b);var c=b.names,e=b.fields,f=b.types,g=b.meta,i=b.oneofToFields,j=b.fieldToOneof,k=b.reservedTags,l=b.reservedFields,m=void 0;b=function(b){var n=c[b],o=f[b],p=a[n],q=o&d("WAProtoConst").TYPE_MASK,r=t[q];if(r===void 0)throw new Error("Can not find the validator for type "+q);if(o&(d("WAProtoConst").FLAGS.PACKED|d("WAProtoConst").FLAGS.REPEATED)&&p!==void 0)if(!Array.isArray(p))d("WALogger").LOG(h(),s(p)).color("red"),m={path:[n],error:"repeated field must be array"};else{q=g[b];for(var o=0;o<p.length&&!m;o++)m=r(p[o],q),m&&m.path.push(n+"["+o+"]")}else if(p!==void 0){m=r(p,g[b]);m&&m.path.push(n);o=j[n];o&&o.forEach(function(b){var c=i[b].filter(function(a){return a!==n});c.forEach(function(c){typeof a[c]!=="undefined"&&(m={path:[b],error:"oneof has fields '"+n+"' and '"+c+"' set"})})});k[e[b]]&&(m={path:[n],error:"tag "+e[b]+" is reserved"});l[n]&&(m={path:[n],error:"field name is reserved"})}};for(var n=0;n<c.length&&!m;n++)b(n);return m}g.checkRequirements=n;g.checkValid=a}),98);
__d("WAProtoDecode",["WABinary","WAHasProperty","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){function a(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!1);d("WAProtoValidate").checkRequirements(a,b);return b}function b(a,b){b=new(d("WABinary").Binary)(b);b=n(a,b,void 0,!0);d("WAProtoValidate").checkRequirements(a,b);return b}function e(a){if(c("WAHasProperty")(a,"unsafeUnknownFields"))return a.unsafeUnknownFields;else return null}function h(a,b,c){if(a!==d("WAProtoUtils").typeToEncType(b))throw new Error("FormatError: "+c+" encoded with wire type "+a)}function i(a,b,c){switch(b){case d("WAProtoConst").TYPES.INT32:return j(c,-2147483648,2147483648,a,d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.INT64:return c.readVarInt(k);case d("WAProtoConst").TYPES.UINT32:return j(c,0,4294967296,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.UINT64:return c.readVarInt(l);case d("WAProtoConst").TYPES.SINT32:b=j(c,0,4294967296,a,d("WABinary").parseInt64OrThrow);return b&1?~(b>>>1):b>>>1;case d("WAProtoConst").TYPES.SINT64:return c.readVarInt(m);case d("WAProtoConst").TYPES.BOOL:return!!j(c,0,2,a,d("WABinary").parseUint64OrThrow);case d("WAProtoConst").TYPES.ENUM:return c.readVarInt(d("WABinary").parseInt64OrThrow);case d("WAProtoConst").TYPES.FIXED64:return c.readLong(l,!0);case d("WAProtoConst").TYPES.SFIXED64:return c.readLong(k,!0);case d("WAProtoConst").TYPES.DOUBLE:return c.readFloat64(!0);case d("WAProtoConst").TYPES.STRING:return c.readString(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.BYTES:return c.readBuffer(c.readVarInt(d("WABinary").parseUint64OrThrow));case d("WAProtoConst").TYPES.FIXED32:return c.readUint32(!0);case d("WAProtoConst").TYPES.SFIXED32:return c.readInt32(!0);case d("WAProtoConst").TYPES.FLOAT:return c.readFloat32(!0)}}function j(a,b,c,d,e){a=a.readVarInt(e);if(a<b||a>=c)throw new Error("FormatError: "+d+" encoded with out-of-range value "+a);return a}function k(a,b){var c=d("WABinary").longFitsInDouble(!0,a,b);if(c){c=o(b);return a*4294967296+c}else{c=a<0;var e;c?e=b===0?-a:~a:e=a;a=c?-b:b;return d("WAHex").createHexLongFrom32Bits(e,a,c)}}function l(a,b){var c=d("WABinary").longFitsInDouble(!1,a,b);if(c){c=o(a);var e=o(b);return c*4294967296+e}else return d("WAHex").createHexLongFrom32Bits(a,b)}function m(a,b){var c=a>>>1;a=a<<31|b>>>1;b&1&&(c=~c,a=~a);return k(c,a)}function n(a,b,c,e){var f=d("WAProtoCompile").compileSpec(a),g=f.names,k=f.fields,l=f.types,m=f.meta,o=f.oneofToFields,p=f.fieldToOneof,q=f.reservedTags,r=f.reservedFields;f=a.internalDefaults;var s=c||babelHelpers["extends"]({},f)||{};for(var a=0;a<g.length;a++)l[a]&d("WAProtoConst").FLAGS.REPEATED&&(s[g[a]]=[]);var t=0;c=k[0];while(b.size()){f=j(b,0,4294967296,"field and enc type",d("WABinary").parseInt64OrThrow);var u=f&7,v=f>>>3;if(v!==c){a=t;do++t===k.length&&(t=0),c=k[t];while(v!==c&&t!==a)}if(v===c)(function(){var a=g[t],c=l[t];h(u,c,a);var f=c&d("WAProtoConst").TYPE_MASK,j=m[t];if(c&d("WAProtoConst").FLAGS.PACKED){var k=b.readVarInt(d("WABinary").parseUint64OrThrow);k=b.readBinary(k);while(k.size()){var w=i(a,f,k);(f!==d("WAProtoConst").TYPES.ENUM||j[w]||j.cast(w)!==void 0)&&s[a].push(w)}}else if(f===d("WAProtoConst").TYPES.MESSAGE){w=b.readVarInt(d("WABinary").parseUint64OrThrow);k=b.readBinary(w);if(c&d("WAProtoConst").FLAGS.REPEATED)s[a].push(n(j,k,void 0,e));else{w=s[a];s[a]=n(j,k,w,e)}}else{k=i(a,f,b);(f!==d("WAProtoConst").TYPES.ENUM||j[k]||j.cast(k)!==void 0)&&(c&d("WAProtoConst").FLAGS.REPEATED?s[a].push(k):s[a]=k)}w=p[a];w&&typeof s[a]!=="undefined"&&w.forEach(function(b){b=o[b].filter(function(b){return b!==a});b.forEach(function(a){delete s[a]})});(q[v]||r[a])&&delete s[a]})();else if(e){s.unsafeUnknownFields||(s.unsafeUnknownFields={});f=void 0;switch(u){case d("WAProtoConst").ENC.VARINT:f=b.readVarInt(d("WABinary").parseInt64OrThrow);break;case d("WAProtoConst").ENC.BIT64:f=b.readBinary(8);break;case d("WAProtoConst").ENC.BINARY:f=b.readBinary(b.readVarInt(d("WABinary").parseUint64OrThrow));break;case d("WAProtoConst").ENC.BIT32:f=b.readBinary(4);break}s.unsafeUnknownFields[v]=f}else u===d("WAProtoConst").ENC.VARINT?b.readVarInt(d("WABinary").parseInt64OrThrow):u===d("WAProtoConst").ENC.BIT64?b.advance(8):u===d("WAProtoConst").ENC.BINARY?b.advance(b.readVarInt(d("WABinary").parseUint64OrThrow)):u===d("WAProtoConst").ENC.BIT32&&b.advance(4)}return s}function o(a){return a>=0?a:4294967296+a}g.decodeProto=a;g.decodeProtoWithUnknowns=b;g.getUnknownFields=e}),98);
__d("WAProtoEncode",["WABinary","WAHex","WAProtoCompile","WAProtoConst","WAProtoUtils","WAProtoValidate"],(function(a,b,c,d,e,f,g){var h=void 0,i=128;function a(a,b,c){c===void 0&&(c=new(d("WABinary").Binary)());d("WAProtoValidate").checkValid(a,b);o(c,b,a);h=void 0;return c}function b(){return h!==void 0?"Last encoded value for "+h:"No information known"}function c(a,b){a.writeVarInt(b)}function e(a,b){if(typeof b==="number"&&b<4503599627370496&&b>=-4503599627370496)a.writeVarInt(b>=0?2*b:2*-b-1);else{var c=new(d("WABinary").Binary)(),e;typeof b==="number"?(e=b<0,c.writeVarInt(e?-b:b)):(e=d("WAHex").hexLongIsNegative(b),c.writeVarIntFromHexLong(e?d("WAHex").negateHexLong(b):b));b=c.peek(function(){return c.readByteArray()});var f=b.byteLength;if(e){var g=0,h;do h=b[g],b[g]=h&i|(h&127)-1&127,g++;while(b[g-1]===255)}h=e?1:0;for(var g=0;g<f;g++){e=b[g];var j=e&i|(e&63)<<1|h;h=(e&64)>>6;b[g]=j}h===1&&(b[f-1]|=i,c.writeInt8(1));a.writeBinary(c)}}function f(a,b){typeof b==="number"?a.writeVarInt(b):a.writeVarIntFromHexLong(b)}function j(a,b){a.writeVarInt(d("WABinary").numUtf8Bytes(b)),a.writeString(b)}function k(a,b){a.writeVarInt(b.byteLength),a.writeBuffer(b)}function l(a,b,c){a.writeWithVarIntLength(function(a,b){return o(a,b,c)},b)}var m=[void 0,c,f,c,f,e,e,function(a,b){a.writeVarInt(b?1:0)},c,function(a,b){typeof b==="number"?a.writeUint64(b,!0):a.writeHexLong(b,!0)},function(a,b){typeof b==="number"?a.writeInt64(b,!0):a.writeHexLong(b,!0)},function(a,b){a.writeFloat64(b,!0)},j,k,l,function(a,b){a.writeUint32(b,!0)},function(a,b){a.writeInt32(b,!0)},function(a,b){a.writeFloat32(b,!0)}];f=function(a){if(a==null)return void 0;function b(b,c){for(var d=0;d<c.length;d++)a(b,c[d])}return function(a,c){a.writeWithVarIntLength(b,c)}};var n=m.map(f);function o(a,b,c){var e=d("WAProtoCompile").compileSpec(c),f=e.names,g=e.fields,i=e.types;e=e.meta;c=c.internalDefaults;for(var j=0;j<f.length;j++){var k=f[j],l=b[k];l===void 0&&c&&(l=c[k]);if(l!==void 0){h=k;k=g[j];var o=i[j],p=o&d("WAProtoConst").TYPE_MASK,q=e[j];k=k*8|d("WAProtoUtils").typeToEncType(o);if(o&d("WAProtoConst").FLAGS.PACKED){if(l.length>0){a.writeVarInt(k);var r=n[p];r(a,l,q)}}else if(o&d("WAProtoConst").FLAGS.REPEATED)for(var r=0;r<l.length;r++){a.writeVarInt(k);o=m[p];o(a,l[r],q)}else{a.writeVarInt(k);o=m[p];o(a,l,q)}}}}g.encodeProto=a;g.encodeErrorInfo=b}),98);
__d("WASignalLocalStorageProtocol.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={},i={},j={},k={},l={},m={},n={},o={},p={},q={};a.internalSpec={sessionVersion:[1,d("WAProtoConst").TYPES.UINT32],localIdentityPublic:[2,d("WAProtoConst").TYPES.BYTES],remoteIdentityPublic:[3,d("WAProtoConst").TYPES.BYTES],rootKey:[4,d("WAProtoConst").TYPES.BYTES],previousCounter:[5,d("WAProtoConst").TYPES.UINT32],senderChain:[6,d("WAProtoConst").TYPES.MESSAGE,e],receiverChains:[7,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,e],pendingKeyExchange:[8,d("WAProtoConst").TYPES.MESSAGE,c],pendingPreKey:[9,d("WAProtoConst").TYPES.MESSAGE,b],remoteRegistrationId:[10,d("WAProtoConst").TYPES.UINT32],localRegistrationId:[11,d("WAProtoConst").TYPES.UINT32],needsRefresh:[12,d("WAProtoConst").TYPES.BOOL],aliceBaseKey:[13,d("WAProtoConst").TYPES.BYTES]};b.internalSpec={preKeyId:[1,d("WAProtoConst").TYPES.UINT32],signedPreKeyId:[3,d("WAProtoConst").TYPES.INT32],baseKey:[2,d("WAProtoConst").TYPES.BYTES]};c.internalSpec={sequence:[1,d("WAProtoConst").TYPES.UINT32],localBaseKey:[2,d("WAProtoConst").TYPES.BYTES],localBaseKeyPrivate:[3,d("WAProtoConst").TYPES.BYTES],localRatchetKey:[4,d("WAProtoConst").TYPES.BYTES],localRatchetKeyPrivate:[5,d("WAProtoConst").TYPES.BYTES],localIdentityKey:[7,d("WAProtoConst").TYPES.BYTES],localIdentityKeyPrivate:[8,d("WAProtoConst").TYPES.BYTES]};e.internalSpec={senderRatchetKey:[1,d("WAProtoConst").TYPES.BYTES],senderRatchetKeyPrivate:[2,d("WAProtoConst").TYPES.BYTES],chainKey:[3,d("WAProtoConst").TYPES.MESSAGE,h],messageKeys:[4,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,f]};f.internalSpec={index:[1,d("WAProtoConst").TYPES.UINT32],cipherKey:[2,d("WAProtoConst").TYPES.BYTES],macKey:[3,d("WAProtoConst").TYPES.BYTES],iv:[4,d("WAProtoConst").TYPES.BYTES]};h.internalSpec={index:[1,d("WAProtoConst").TYPES.UINT32],key:[2,d("WAProtoConst").TYPES.BYTES]};i.internalSpec={currentSession:[1,d("WAProtoConst").TYPES.MESSAGE,a],previousSessions:[2,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,a]};j.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT32],publicKey:[2,d("WAProtoConst").TYPES.BYTES],privateKey:[3,d("WAProtoConst").TYPES.BYTES]};k.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT32],publicKey:[2,d("WAProtoConst").TYPES.BYTES],privateKey:[3,d("WAProtoConst").TYPES.BYTES],signature:[4,d("WAProtoConst").TYPES.BYTES],timestamp:[5,d("WAProtoConst").TYPES.FIXED64]};l.internalSpec={publicKey:[1,d("WAProtoConst").TYPES.BYTES],privateKey:[2,d("WAProtoConst").TYPES.BYTES]};m.internalSpec={senderKeyId:[1,d("WAProtoConst").TYPES.UINT32],senderChainKey:[2,d("WAProtoConst").TYPES.MESSAGE,p],senderSigningKey:[3,d("WAProtoConst").TYPES.MESSAGE,n],senderMessageKeys:[4,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,o]};n.internalSpec={"public":[1,d("WAProtoConst").TYPES.BYTES],"private":[2,d("WAProtoConst").TYPES.BYTES]};o.internalSpec={iteration:[1,d("WAProtoConst").TYPES.UINT32],seed:[2,d("WAProtoConst").TYPES.BYTES]};p.internalSpec={iteration:[1,d("WAProtoConst").TYPES.UINT32],seed:[2,d("WAProtoConst").TYPES.BYTES]};q.internalSpec={senderKeyStates:[1,d("WAProtoConst").FLAGS.REPEATED|d("WAProtoConst").TYPES.MESSAGE,m]};g.SessionStructureSpec=a;g.PendingPreKeySpec=b;g.PendingKeyExchangeSpec=c;g.ChainSpec=e;g.MessageKeySpec=f;g.ChainKeySpec=h;g.RecordStructureSpec=i;g.PreKeyRecordStructureSpec=j;g.SignedPreKeyRecordStructureSpec=k;g.IdentityKeyPairStructureSpec=l;g.SenderKeyStateStructureSpec=m;g.SenderSigningKeySpec=n;g.SenderMessageKeySpec=o;g.SenderChainKeySpec=p;g.SenderKeyRecordStructureSpec=q}),98);
__d("WACryptoHkdf",["Promise","WABinary"],(function(a,b,c,d,e,f,g){var h=32,i=new Uint8Array(h),j=255*h,k={name:"HMAC",hash:"SHA-256"};function l(a){return self.crypto.subtle.importKey("raw",a,k,!1,["sign"])}function m(a,b){return self.crypto.subtle.sign(k,a,b)}function a(a,b){return l(a).then(function(a){return m(a,b)})}function n(a,b){return l(a||i).then(function(a){return m(a,b)})}function o(a,c,e){if(e<0||e>j)return b("Promise").reject(new Error("HKDF::expand given bad length "+e));var f,g=Math.ceil(e/h),i=d("WABinary").Binary.build(c).readByteArray(),k=new(d("WABinary").Binary)(),n=l(a).then(function(a){f=a;return new Uint8Array(0)});c=function(a){n=n.then(function(b){return m(f,d("WABinary").Binary.build(b,i,a).readByteArray())}).then(function(a){a=new Uint8Array(a);k.writeByteArray(a);return a})};for(var a=1;a<=g;a++)c(a);return n.then(function(){return k.readBuffer(e)})}function c(a,b,c){return n(null,a).then(function(a){return o(new Uint8Array(a),b,c)})}function e(a,b,c,d){return n(b,a).then(function(a){return o(new Uint8Array(a),c,d)})}g.encodeKey=l;g.hmacSha256=a;g.extract=n;g.expand=o;g.extractAndExpand=c;g.extractWithSaltAndExpand=e}),98);
__d("WASignalOther",["WACryptoHkdf","WACryptoUtils","WAProtoDecode","WAProtoEncode"],(function(a,b,c,d,e,f,g){var h={name:"AES-CBC"},i={name:"HMAC",hash:"SHA-256"};function j(a,b){if(a.length!==b)throw new Error("Signal expected "+b+" bytes, given "+a.length);return a}function a(a,b){return j(new Uint8Array(a),b)}function b(a){var b=a.buffer,c=a.byteOffset;a=a.length;return c===0&&a===b.byteLength?b:b.slice(c,c+a)}function c(a,b){return a.readByteArray(b)}function e(a){return new Uint8Array(a)}function f(a,b,c){if(a.length-b<c)throw new Error("Can not split off "+c+" bytes from index "+b+" of "+a.length+" bytes");return a.slice(b,b+c)}function k(a){a=a==="extendedRange"?(-1>>>1)-1:16380;return d("WACryptoUtils").randomNumberLessThan(a)+1}function l(a){return o(a)}function m(){var a=-1>>>1;return d("WACryptoUtils").randomNumberLessThan(a)+1}function n(a){return o(a)}function o(a,b,c){b===void 0&&(b=0);c===void 0&&(c=4294967296);if(typeof a==="number"&&b<=a&&a<c&&Math.floor(a)===a)return a;else throw new Error("Expected integer in range ["+b+", "+c+"), given "+String(a))}function p(a,b){return d("WAProtoEncode").encodeProto(a,b).readByteArray()}function q(a,b,c){return c(d("WAProtoDecode").decodeProto(a,b))}function r(a,b,c,e){return d("WACryptoHkdf").extractWithSaltAndExpand(a,b,c,e).then(function(a){return new Uint8Array(a)})}function s(a,b){var c,d;b==="hmac-sha256"?(c=i,d=["sign"]):(b,c=h,d=["encrypt","decrypt"]);return self.crypto.subtle.importKey("raw",a,c,!1,d)}g.AES_CBC=h;g.HMAC_SHA256=i;g.ensureSize=j;g.toBytes=a;g.toBuffer=b;g.readBytes=c;g.makeBytes=e;g.sliceBytes=f;g.makeRegistrationId=k;g.castRegistrationId=l;g.makeSenderKeyId=m;g.castSenderKeyId=n;g.ensureIntInRange=o;g.encodeSignalProto=p;g.decodeSignalProto=q;g.hkdf=r;g.makeCryptoKey=s}),98);
__d("WASignalKeys",["WAProtoDecode","WAProtoEncode","WASignalLocalStorageProtocol.pb","WASignalOther","tweetnacl.dist"],(function(a,b,c,d,e,f,g){var h=5,i=16777215;function j(a,b){return{publicKey:a,privateKey:b}}function a(a){a=d("tweetnacl.dist").box.keyPair.fromSecretKey(a);var b=a.publicKey;a=a.secretKey;return j(d("WASignalOther").ensureSize(b,32),d("WASignalOther").ensureSize(a,32))}function k(){var a=d("tweetnacl.dist").box.keyPair(),b=a.publicKey;a=a.secretKey;a[0]&=248;a[31]=64|a[31]&63;return j(d("WASignalOther").ensureSize(b,32),d("WASignalOther").ensureSize(a,32))}function l(a,b){return j(d("WASignalOther").sliceBytes(b,1,32),a)}function m(a,b){return{serializedPubKey:b,privateKey:a}}function b(){var a=k();return m(a.privateKey,n(a))}function n(a){var b=d("WASignalOther").makeBytes(33);b[0]=h;b.set(a.publicKey,1);return b}function c(a){var b=d("WASignalOther").makeBytes(33);b[0]=h;b.set(d("WASignalOther").ensureSize(a,32),1);return b}function e(a){return m(a.privateKey,n(a))}function f(a,b){a=(a-1)%i;a<=0&&(a+=i);var c=[];for(var e=0;e<b;e++){var f=a===i?1:a+1,g=k(),h=d("WAProtoEncode").encodeProto(d("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,{id:f,publicKey:n(g),privateKey:g.privateKey}).readByteArray();c.push({plainObject:{id:f,keyPair:g},record:h});a=f}return c}function o(a){try{a=d("WAProtoDecode").decodeProto(d("WASignalLocalStorageProtocol.pb").PreKeyRecordStructureSpec,a);var b=a.id,c=a.publicKey;a=a.privateKey;return b==null||c==null||a==null?null:{id:p(b),keyPair:l(d("WASignalOther").toBytes(a,32),q(new Uint8Array(c)))}}catch(a){return null}}function p(a){return d("WASignalOther").ensureIntInRange(a,1,i)}function q(a){if(a.length===0||a[0]!==h)throw new Error("Unrecognized public key type");return d("WASignalOther").ensureSize(a,33)}function r(){var a=d("WASignalOther").makeBytes(32);self.crypto.getRandomValues(a);return a}function s(a,b){return d("tweetnacl.dist").scalarMult(a,b.subarray(1)).buffer}g.KEY_TYPE=h;g.makeKeyPairFrom=a;g.makeKeyPair=k;g.makeKeyPairFromSerialized=l;g.makeSerializedKeyPairFrom=m;g.makeSerializedKeyPair=b;g.serializePubKey=n;g.serializeIdentity=c;g.toSerializeKeyPair=e;g.makePreKeys=f;g.deserializePreKey=o;g.castToPreKeyId=p;g.castToSerializedPubKey=q;g.makeRawSenderKey=r;g.ecdh=s}),98);
__d("WASignalSessions",["WABinary","WASignalKeys","WASignalOther"],(function(a,b,c,d,e,f,g){var h=3;function a(a,b){return i(a,0,b,[])}function i(a,b,c,d){return{ratchetPubKey:a,nextMsgIndex:b,chainKey:c,unusedMsgKeys:d}}function b(a,b){return j(a,0,b)}function j(a,b,c){return{ratchetKey:a,nextMsgIndex:b,chainKey:c}}function k(a,b,c){return{remoteOneTimeId:a,remoteSignedId:b,localOneTimePubKey:c}}function c(a,b){return m(a.local,a.remote,a.rootKey,a.recvChains,a.sendChain,a.initialExchangeInfo,a.prevSendChainHighestIndex,b,a.aliceBaseKey)}function e(a,b,c){return m(a.local,a.remote,a.rootKey,b,c,a.initialExchangeInfo,a.prevSendChainHighestIndex,a.prevSessions,a.aliceBaseKey)}function f(a,b,c,d){c===void 0&&(c=a.sendChain);return m(a.local,a.remote,d,b,c,null,Math.max(a.sendChain.nextMsgIndex-1,0),a.prevSessions,a.aliceBaseKey)}function l(a,b,c,d,e,f){return m(a,b,c,d,e,f,0,[])}function m(a,b,c,d,e,f,g,h,i){return{local:a,remote:b,rootKey:c,sendChain:e,recvChains:d,initialExchangeInfo:f,prevSendChainHighestIndex:g,prevSessions:h,aliceBaseKey:i}}function n(a,b){b=new(d("WABinary").Binary)(b);var c=d("WASignalOther").readBytes(b,32),e=d("WASignalOther").readBytes(b,32);b=d("WASignalOther").readBytes(b,16);return o(a,c,e,b)}function o(a,b,c,d){return{index:a,cipherKey:b,macKey:c,iv:d}}function p(a){return{senderRatchetKey:a.ratchetPubKey,chainKey:{index:a.nextMsgIndex,key:a.chainKey},messageKeys:a.unusedMsgKeys}}function q(a){var b=a.ratchetKey;return{senderRatchetKey:b.serializedPubKey,senderRatchetKeyPrivate:b.privateKey,chainKey:{index:a.nextMsgIndex,key:a.chainKey}}}function r(a){var b=a.local,c=a.remote,d=a.initialExchangeInfo,e=void 0;if(d){var f=d.remoteOneTimeId;e={preKeyId:f!=null?f:void 0,signedPreKeyId:d.remoteSignedId,baseKey:d.localOneTimePubKey}}return{currentSession:{sessionVersion:h,localIdentityPublic:b.pubKey,remoteIdentityPublic:c.pubKey,rootKey:a.rootKey,previousCounter:a.prevSendChainHighestIndex,senderChain:q(a.sendChain),receiverChains:a.recvChains.map(p),pendingPreKey:e,remoteRegistrationId:c.regId,localRegistrationId:b.regId,aliceBaseKey:a.aliceBaseKey},previousSessions:a.prevSessions}}function s(a){var b=a.local,c=a.remote,e=a.sendChain,f=a.initialExchangeInfo,g=void 0;if(f){var i=f.remoteOneTimeId;g={preKeyId:i!=null?i:void 0,signedPreKeyId:f.remoteSignedId,baseKey:d("WASignalOther").toBuffer(f.localOneTimePubKey)}}return{sessionVersion:h,localIdentityPublic:d("WASignalOther").toBuffer(b.pubKey),remoteIdentityPublic:d("WASignalOther").toBuffer(c.pubKey),rootKey:d("WASignalOther").toBuffer(a.rootKey),previousCounter:a.prevSendChainHighestIndex,senderChain:{senderRatchetKey:d("WASignalOther").toBuffer(e.ratchetKey.serializedPubKey),senderRatchetKeyPrivate:d("WASignalOther").toBuffer(e.ratchetKey.privateKey),chainKey:{index:e.nextMsgIndex,key:d("WASignalOther").toBuffer(e.chainKey)},messageKeys:[]},receiverChains:a.recvChains.map(function(a){return{senderRatchetKey:d("WASignalOther").toBuffer(a.ratchetPubKey),chainKey:{index:a.nextMsgIndex,key:d("WASignalOther").toBuffer(a.chainKey)},messageKeys:a.unusedMsgKeys.map(function(a){return{index:a.index,cipherKey:d("WASignalOther").toBuffer(a.cipherKey),macKey:d("WASignalOther").toBuffer(a.macKey),iv:d("WASignalOther").toBuffer(a.iv)}})}}),pendingPreKey:g,remoteRegistrationId:c.regId,localRegistrationId:b.regId,aliceBaseKey:a.aliceBaseKey||void 0}}function t(a){var b=z(a.currentSession,"currentSession");return v(b,a.previousSessions)}function u(a){return v(a,[])}function v(a,b){var c=z(a.sessionVersion,"sessionVersion");if(c!==h)throw new Error("Signal: bad session version "+c);c=z(a.senderChain,"senderChain");var e=z(c.chainKey,"senderChain.chainKey");c=j(d("WASignalKeys").makeSerializedKeyPairFrom(y(c.senderRatchetKeyPrivate,32,"senderRatchetKeyPrivate"),x(c.senderRatchetKey,"senderRatchetKey")),z(e.index,"senderChain.chainKey.index"),y(e.key,32,"senderChain.chainKey.key"));e=z(a.receiverChains,"receiverChains").map(function(a){var b=z(a.chainKey,"receiverChains[].chainKey");return i(x(a.senderRatchetKey,"receiverChains[].senderRatchetKey"),z(b.index,"receiverChains[].chainKey.index"),y(b.key,32,"receiverChains[].chainKey.key"),w(a.messageKeys))});var f={regId:d("WASignalOther").castRegistrationId(z(a.localRegistrationId,"localRegistrationId")),pubKey:x(a.localIdentityPublic,"localIdentityPublic")},g={regId:d("WASignalOther").castRegistrationId(z(a.remoteRegistrationId,"remoteRegistrationId")),pubKey:x(a.remoteIdentityPublic,"remoteIdentityPublic")},l=a.pendingPreKey,n=null;if(l){var o=l.preKeyId;n=k(o!=null?d("WASignalKeys").castToPreKeyId(o):null,d("WASignalKeys").castToPreKeyId(z(l.signedPreKeyId,"pendingPreKey.signedPreKeyId")),x(l.baseKey,"pendingPreKey.baseKey"))}return m(f,g,y(a.rootKey,32,"rootKey"),e,c,n,a.previousCounter||0,b,a.aliceBaseKey)}function w(a){return a.map(function(a){return{index:z(a.index,"messageKeys[].index"),cipherKey:y(a.cipherKey,32,"messageKeys[].cipherKey"),macKey:y(a.macKey,32,"messageKeys[].macKey"),iv:y(a.iv,16,"messageKeys[].iv")}})}function x(a,b){return d("WASignalKeys").castToSerializedPubKey(new Uint8Array(z(a,b)))}function y(a,b,c){return d("WASignalOther").toBytes(z(a,c),b)}function z(a,b){if(a==null)throw new Error("Signal: protobuf is missing "+b);return a}g.FORMAT_VERSION=h;g.makeFreshRecvChain=a;g.makeRecvChain=i;g.makeFreshSendChain=b;g.makeSendChain=j;g.makeInitialExchangeInfo=k;g.setPrevSessions=c;g.updateChains=e;g.ratchetSession=f;g.makeFreshSession=l;g.makeSession=m;g.splitMsgKey=n;g.serializeSession=r;g.detachSession=s;g.parseSessionFromRecord=t;g.parseSession=u;g._parseSession=v;g.bytesOrThrow=y;g.definedOrThrow=z}),98);
__d("WACryptoEd25519",["tweetnacl.dist"],(function(a,b,c,d,e,f,g){var h=null;function i(a){var b=h;h=[];try{return a()}finally{((a=h)!=null?a:[]).forEach(function(a){return void a.fill(0)});h=b}}function j(a,b){if(h==null)throw new Error("allocate called outside of active scope");return new a(b)}function a(a,b,c){d("tweetnacl.dist").lowlevel.crypto_hash(a,b,c)}function b(a,b){for(var c=0;c<64;++c)b[c]=a[c],a[c]=0;l(a,b);b.fill(0)}function c(a,b){var c=[k(),k(),k(),k()];d("tweetnacl.dist").lowlevel.scalarbase(c,b);Q(a,c)}function k(a){var b=j(Float64Array,16);if(a){if(a.length>16)throw new Error("Incorrect initialiser array provided to the fieldElement");for(var c=0;c<a.length;c++)b[c]=a[c]}return b}function l(a,b){d("tweetnacl.dist").lowlevel.modL(a,b)}var m=function(){return k([0])},n=function(){return k([1])},o=function(){return k([2])},p=function(){return k([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139])};function q(){return[k(),k(),k(),k()]}function r(){return[k(),k(),k(),k()]}function s(){return[k(),k(),k()]}function t(a,b){var c=0;b=b;while(b>0){var d=b%65536;a[c]=d;b=(b-d)/65536;c++}}function u(a,b){return S(a,b)?0:1}function v(a){var b=d("tweetnacl.dist").lowlevel.pack25519,c=j(Uint8Array,32);b(c,a);return c[0]&1}function w(a,b){var c=d("tweetnacl.dist").lowlevel.S,e=d("tweetnacl.dist").lowlevel.M,f=o(),g=k();c(g,b);e(a,f,g)}function x(a,b){var c=d("tweetnacl.dist").lowlevel.S,e=d("tweetnacl.dist").lowlevel.M,f=d("tweetnacl.dist").lowlevel.A,g=m(),h=n(),i=k(),j=k(),l=k(),o=k();t(g,486662);c(i,b);e(j,g,b);f(l,i,j);f(o,l,h);e(a,b,o)}function y(a,b,c){c===1&&a.set(b)}var z=new Uint8Array([176,160,14,74,39,27,238,196,120,228,47,173,6,24,67,47,167,215,251,61,153,0,77,43,11,223,193,79,128,36,131,43]);function A(a,b){var c=d("tweetnacl.dist").lowlevel.unpack25519,e=d("tweetnacl.dist").lowlevel.pow2523,f=d("tweetnacl.dist").lowlevel.M,g=d("tweetnacl.dist").lowlevel.S,h=k();c(h,z);c=k();e(c,b);e=k();f(e,b,c);c=k();g(c,e);g=k();f(g,e,h);y(e,g,1^u(c,b));a.set(e)}function B(a,b){var c=d("tweetnacl.dist").lowlevel.Z,e=d("tweetnacl.dist").lowlevel.A,f=d("tweetnacl.dist").lowlevel.M,g=n(),h=k(),i=k(),j=k();c(h,b,g);e(i,b,g);R(j,i);f(a,h,j)}function C(a,b){var c=d("tweetnacl.dist").lowlevel.Z,e=m();c(a,e,b)}function D(a,b){var c=d("tweetnacl.dist").lowlevel.M;c(a[0],b[0],b[3]);c(a[1],b[1],b[2]);c(a[2],b[2],b[3])}function E(a,b){var c=d("tweetnacl.dist").lowlevel.M;c(a[0],b[0],b[3]);c(a[1],b[1],b[2]);c(a[2],b[2],b[3]);c(a[3],b[0],b[1])}function F(a,b){var c=d("tweetnacl.dist").lowlevel.S,e=d("tweetnacl.dist").lowlevel.A,f=d("tweetnacl.dist").lowlevel.Z;c(a[0],b[0]);c(a[2],b[1]);w(a[3],b[2]);e(a[1],b[0],b[1]);b=k();c(b,a[1]);e(a[1],a[2],a[0]);f(a[2],a[2],a[0]);f(a[0],b,a[1]);f(a[3],a[3],a[2])}var G=new Uint8Array([6,126,69,255,170,4,110,204,130,26,125,75,209,211,161,197,126,79,252,3,220,8,123,210,187,6,160,96,244,237,38,15]);function H(a,b,c){var e=d("tweetnacl.dist").lowlevel.unpack25519,f=d("tweetnacl.dist").lowlevel.M,g=k();e(g,G);e=k();B(e,b);var h=k();x(h,b);var i=k();A(i,h);h=k();f(h,b,g);b=k();R(b,i);g=k();f(g,h,b);i=k();C(i,g);y(g,i,v(g)^c);a[0].set(g);a[1].set(e);a[2].set(n());f(a[3],a[0],a[1])}function I(a,b){a[0].set(b[0]),a[1].set(b[1]),a[2].set(b[2])}function J(a,b){var c=s();I(c,b);F(a,c)}function K(a,b){var c=r(),d=s();J(c,b);D(d,c);F(c,d);D(d,c);F(c,d);E(a,c)}function L(a){var b=d("tweetnacl.dist").lowlevel.S,c=d("tweetnacl.dist").lowlevel.M,e=d("tweetnacl.dist").lowlevel.pow2523,f=d("tweetnacl.dist").lowlevel.pack25519,g=k(),h=k(),i=k(),j=k(),l=k();e(g,a);b(h,g);b(i,h);c(j,i,a);c(l,j,a);e=new Uint8Array(32);f(e,l);return 1&e[31]}function M(a,b){C(a[0],b[0]),a[1].set(b[1]),a[2].set(b[2]),C(a[3],b[3])}function e(a,b){var c=q();b=T(c,b);if(b!==0)return-1;M(a,c);return 0}function N(a,b){var c=d("tweetnacl.dist").lowlevel.M,e=d("tweetnacl.dist").lowlevel.A;b=b;var f=n(),g=m();t(g,486662);var h=k();w(h,b);b=k();e(b,h,f);h=k();R(h,b);f=k();c(f,h,g);b=k();C(b,f);c=k();x(c,b);h=L(c);f=k([0]);y(f,g,h);c=k();e(c,b,f);g=k();C(g,c);y(c,g,h);a.set(c)}function O(a){var b=d("tweetnacl.dist").lowlevel.unpack25519;a=d("tweetnacl.dist").hash(a);var c=(a[31]&128)>>7;a[31]&=127;var e=k();b(e,a);b=k();P(b,e);a=q();H(a,b,c);e=q();K(e,a);return e}function P(a,b){return i(function(){return N(a,b)})}function f(a){return i(function(){return O(a)})}function Q(a,b){var c=k(),e=k(),f=k(),g=d("tweetnacl.dist").lowlevel.M,h=d("tweetnacl.dist").lowlevel.pack25519;R(f,b[2]);g(c,b[0],f);g(e,b[1],f);h(a,e);g=new Uint8Array(32);h(g,c);a[31]^=(g[0]&1)<<7}function R(a,b){var c=k();c.set(b);var e=d("tweetnacl.dist").lowlevel.M,f=d("tweetnacl.dist").lowlevel.S;for(var g=253;g>=0;--g)f(c,c),g!==2&&g!==4&&e(c,c,b);a.set(c)}function S(a,b){var c=d("tweetnacl.dist").lowlevel.pack25519,e=d("tweetnacl.dist").lowlevel.crypto_verify_32,f=new Uint8Array(32),g=new Uint8Array(32);c(f,a);c(g,b);return e(f,0,g,0)}function T(a,b){var c=d("tweetnacl.dist").lowlevel.set25519,e=d("tweetnacl.dist").lowlevel.S,f=d("tweetnacl.dist").lowlevel.M,g=d("tweetnacl.dist").lowlevel.Z,h=d("tweetnacl.dist").lowlevel.A,i=d("tweetnacl.dist").lowlevel.D,j=d("tweetnacl.dist").lowlevel.unpack25519,l=d("tweetnacl.dist").lowlevel.pow2523,o=k(),q=k(),r=k(),s=k(),t=k(),u=k(),v=k();c(a[2],n());j(a[1],b);e(r,a[1]);f(s,r,i);g(r,r,a[2]);h(s,a[2],s);e(t,s);e(u,t);f(v,u,t);f(o,v,r);f(o,o,s);l(o,o);f(o,o,r);f(o,o,s);f(o,o,s);f(a[0],o,s);e(q,a[0]);f(q,q,s);S(q,r)&&f(a[0],a[0],p());e(q,a[0]);f(q,q,s);if(S(q,r))return-1;U(a[0])===b[31]>>7&&g(a[0],m(),a[0]);f(a[3],a[0],a[1]);return 0}function U(a){var b=d("tweetnacl.dist").lowlevel.pack25519,c=new Uint8Array(32);b(c,a);return c[0]&1}g.runInAllocationScope=i;g.allocate=j;g.hashSha512=a;g.reduce=b;g.scalarmultBase=c;g.fieldElement=k;g.modL=l;g.p3Element=q;g.unpack=e;g.elligator=P;g.hashToPoint=f;g.pack=Q;g.inv25519=R;g.unpackneg=T}),98);
__d("WASignalSignatures",["Promise","WACryptoEd25519","WAProtoDecode","WAProtoEncode","WASignalKeys","WASignalLocalStorageProtocol.pb","WASignalOther","tweetnacl.dist"],(function(a,b,c,d,e,f,g){function h(a,b,c){return d("WACryptoEd25519").runInAllocationScope(function(){var e=b.length,f=a.privateKey,g=new Uint8Array(32);d("WACryptoEd25519").scalarmultBase(g,f);var h=g[31]&128,i=new Uint8Array(e+128);i[0]=254;i.fill(255,1,32);i.set(f,32);i.set(b,64);i.set(c,e+64);var j=d("WACryptoEd25519").allocate(Uint8Array,64);d("WACryptoEd25519").hashSha512(j,i,e+128);i.set(g,32);g=d("WACryptoEd25519").allocate(Float64Array,64);d("WACryptoEd25519").reduce(j,g);d("WACryptoEd25519").scalarmultBase(i,j);var k=d("WACryptoEd25519").allocate(Uint8Array,64);d("WACryptoEd25519").hashSha512(k,i,e+64);d("WACryptoEd25519").reduce(k,g);for(e=0;e<32;++e)g[e]=j[e];for(e=0;e<32;++e)for(j=0;j<32;++j)g[e+j]+=k[e]*f[j];d("WACryptoEd25519").modL(i.subarray(32,64),g);return{pubKeyNegative:h!==0,signedMsg:i}})}function a(a,c){return b("Promise").resolve().then(function(){var b=d("WASignalOther").makeBytes(64);self.crypto.getRandomValues(b);return i(a,c,b)})}function c(a,b,c){var e=c[63];return e&96?!1:d("WACryptoEd25519").runInAllocationScope(function(){var f=d("tweetnacl.dist").lowlevel.A,g=d("tweetnacl.dist").lowlevel.M,h=d("tweetnacl.dist").lowlevel.Z,i=d("tweetnacl.dist").lowlevel.pack25519,j=d("tweetnacl.dist").lowlevel.unpack25519,k=d("WACryptoEd25519").allocate(Uint8Array,64);k.set(c);k[63]=e&127;var l=d("WACryptoEd25519").fieldElement(),m=d("WACryptoEd25519").fieldElement(),n=d("WACryptoEd25519").fieldElement(),o=d("WACryptoEd25519").fieldElement(),p=d("WACryptoEd25519").fieldElement(),q=d("WACryptoEd25519").allocate(Uint8Array,32),r=d("WACryptoEd25519").fieldElement();r[0]=1;j(l,a.subarray(1));h(m,l,r);f(n,l,r);d("WACryptoEd25519").inv25519(o,n);g(p,m,o);i(q,p);q[31]=q[31]&127|e&128;return d("tweetnacl.dist").sign.detached.verify(b,k,q)})}function i(a,b,c){a=h(a,b,c);b=d("WASignalOther").sliceBytes(a.signedMsg,0,64);b[63]=b[63]&127|(a.pubKeyNegative?128:0);return b}function e(a,b,c){var e=d("WASignalKeys").makeKeyPair(),f=d("WASignalOther").makeBytes(64);self.crypto.getRandomValues(f);c=i(c,d("WASignalKeys").serializePubKey(e),f);if(!Number.isSafeInteger(b))throw new Error("Expected timestamp to be a safe integer, given "+String(b));return{id:d("WASignalKeys").castToPreKeyId(a),ts:b,keyPair:e,signature:c}}function f(a,b){var c=d("WASignalOther").makeBytes(64);self.crypto.getRandomValues(c);a=i(a,b,c);return a}function j(a){var b=a.id,c=a.keyPair;b=d("WAProtoEncode").encodeProto(d("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,{id:b,publicKey:d("WASignalKeys").serializePubKey(c),privateKey:c.privateKey,signature:a.signature,timestamp:a.ts});return b.readByteArray()}function k(a){try{a=d("WAProtoDecode").decodeProto(d("WASignalLocalStorageProtocol.pb").SignedPreKeyRecordStructureSpec,a);var b=a.id,c=a.publicKey,e=a.privateKey,f=a.signature;a=a.timestamp;return b==null||c==null||e==null||f==null||a==null?null:{id:d("WASignalKeys").castToPreKeyId(b),ts:a,keyPair:d("WASignalKeys").makeKeyPairFromSerialized(d("WASignalOther").toBytes(e,32),d("WASignalKeys").castToSerializedPubKey(new Uint8Array(c))),signature:d("WASignalOther").toBytes(f,64)}}catch(a){return null}}g.signMsg=a;g.verifyMsgSignalVariant=c;g.makeSignature=i;g.makeSignedPreKey=e;g.signSenderKeyMessage=f;g.serializeSignedPreKeyForPrivateStorage=j;g.deserializeSignedPreKey=k}),98);
__d("WASignalWhisperTextProtocol.pb",["WAProtoConst"],(function(a,b,c,d,e,f,g){a={};b={};c={};e={};f={};var h={};a.internalSpec={ratchetKey:[1,d("WAProtoConst").TYPES.BYTES],counter:[2,d("WAProtoConst").TYPES.UINT32],previousCounter:[3,d("WAProtoConst").TYPES.UINT32],ciphertext:[4,d("WAProtoConst").TYPES.BYTES]};b.internalSpec={registrationId:[5,d("WAProtoConst").TYPES.UINT32],preKeyId:[1,d("WAProtoConst").TYPES.UINT32],signedPreKeyId:[6,d("WAProtoConst").TYPES.UINT32],baseKey:[2,d("WAProtoConst").TYPES.BYTES],identityKey:[3,d("WAProtoConst").TYPES.BYTES],message:[4,d("WAProtoConst").TYPES.BYTES]};c.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT32],baseKey:[2,d("WAProtoConst").TYPES.BYTES],ratchetKey:[3,d("WAProtoConst").TYPES.BYTES],identityKey:[4,d("WAProtoConst").TYPES.BYTES],baseKeySignature:[5,d("WAProtoConst").TYPES.BYTES]};e.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT32],iteration:[2,d("WAProtoConst").TYPES.UINT32],ciphertext:[3,d("WAProtoConst").TYPES.BYTES]};f.internalSpec={id:[1,d("WAProtoConst").TYPES.UINT32],iteration:[2,d("WAProtoConst").TYPES.UINT32],chainKey:[3,d("WAProtoConst").TYPES.BYTES],signingKey:[4,d("WAProtoConst").TYPES.BYTES]};h.internalSpec={generation:[1,d("WAProtoConst").TYPES.UINT32],signature:[2,d("WAProtoConst").TYPES.BYTES]};g.SignalMessageSpec=a;g.PreKeySignalMessageSpec=b;g.KeyExchangeMessageSpec=c;g.SenderKeyMessageSpec=e;g.SenderKeyDistributionMessageSpec=f;g.DeviceConsistencyCodeMessageSpec=h}),98);
__d("WASignalGroupSession",["WASignalKeys","WASignalSessions"],(function(a,b,c,d,e,f,g){var h=5,i=3;function j(a){var b=d("WASignalSessions").definedOrThrow(a.senderSigningKey,"senderSigningKey"),c=d("WASignalSessions").definedOrThrow(a.senderMessageKeys,"senderMessageKeys"),e=d("WASignalSessions").definedOrThrow(a.senderChainKey,"senderChainKey");b={senderSigningKeyPublic:r(b["public"],"public"),senderSigningKeyPrivate:b["private"]?d("WASignalSessions").bytesOrThrow(b["private"],32,"private"):void 0,senderKeyId:d("WASignalSessions").definedOrThrow(a.senderKeyId,"senderKeyId"),unusedMsgKeys:c.map(function(a){return k(d("WASignalSessions").definedOrThrow(a.iteration,"iteration"),d("WASignalSessions").bytesOrThrow(a.seed,50,"seed"))}),senderKeyChainKey:l(d("WASignalSessions").definedOrThrow(e.iteration,"iteration"),d("WASignalSessions").bytesOrThrow(e.seed,32,"seed"))};return b}function a(a,b,c,d,e){return{senderSigningKeyPublic:a,senderSigningKeyPrivate:b,senderKeyChainKey:c,senderKeyId:d,unusedMsgKeys:e}}function b(a,b){var c=a.senderKeyStates.findIndex(function(a){return a.senderKeyId===b.senderKeyId});return{senderKeyStates:a.senderKeyStates.map(function(a,d){return d===c?b:a})}}function c(a,b){a=a.senderKeyStates.slice(a.senderKeyStates.length>h-1?1:0);a.push(b);return{senderKeyStates:a}}function e(a){return{senderKeyStates:[a]}}function k(a,b){return{iteration:a,seed:b}}function l(a,b){return{nextMsgIndex:a,chainKey:b}}function f(a){a=d("WASignalSessions").definedOrThrow(a.senderKeyStates,"senderKeyStates");return m(a)}function m(a){return n(a)}function n(a){a=a.map(function(a){return j(a)});return{senderKeyStates:a}}function o(a,b){var c=a.senderKeyStates.findIndex(function(a){return a.senderKeyId===b});if(c===-1)return void 0;a=a.senderKeyStates[c];return a}function p(a){return{senderKeyStates:a.senderKeyStates.map(function(a){return q(a)})}}function q(a){return{senderKeyId:a.senderKeyId,senderChainKey:{iteration:a.senderKeyChainKey.nextMsgIndex,seed:a.senderKeyChainKey.chainKey},senderSigningKey:{"public":a.senderSigningKeyPublic,"private":a.senderSigningKeyPrivate},senderMessageKeys:a.unusedMsgKeys?a.unusedMsgKeys.map(function(a){var b=a.iteration;a=a.seed;return{iteration:b,seed:a}}):[]}}function r(a,b){return d("WASignalKeys").castToSerializedPubKey(new Uint8Array(d("WASignalSessions").definedOrThrow(a,b)))}function s(a){return a}g.FORMAT_VERSION=i;g.makeSenderKeyState=a;g.updateSessionWithUpdatedSenderKeyState=b;g.updateSessionWithNewSenderKeyState=c;g.makeNewSenderKeySession=e;g.makeSenderKeyMsgKey=k;g.makeSenderKeyChainKey=l;g.parseSessionFromRecord=f;g._parseSession=m;g.makeSenderKeySessionFromRecord=n;g.findSenderKeyState=o;g.serializeSession=p;g.serializeSenderKeyState=q;g.convertFromRawToSenderKeyState=s}),98);
__d("WASignalWhitepaper",["Promise","WABinary","WASignalGroupSession","WASignalKeys","WASignalOther","WASignalSessions","regeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=new Uint8Array(32);h.fill(255);var i=new Uint8Array([1]),j=new Uint8Array([2]);function a(a,c,e){var f,g,i,j,k,l,p,q,r,s,t,u,v,w,x,y,z,A;return b("regeneratorRuntime").async(function(B){while(1)switch(B.prev=B.next){case 0:i=a.regId,j=a.staticKeyPair;k=c.identity;l=c.signedKey.publicKey;p=e.privateKey;q=j.privateKey;r=(f=c.oneTimeKey)==null?void 0:f.publicKey;s=d("WABinary").Binary.build(h,o(q,l),o(p,k),o(p,l),r&&o(p,r)).readByteArray();B.next=9;return b("regeneratorRuntime").awrap(n(s,"WhisperText"));case 9:t=B.sent;u=t[0];v=t[1];w=c.ratchetKey;x=d("WASignalSessions").makeFreshRecvChain(w,v);y=d("WASignalKeys").makeSerializedKeyPair();B.next=17;return b("regeneratorRuntime").awrap(m(u,y,w));case 17:z=B.sent;A=d("WASignalSessions").makeInitialExchangeInfo((g=c.oneTimeKey)==null?void 0:g.id,c.signedKey.id,d("WASignalKeys").serializePubKey(e));return B.abrupt("return",d("WASignalSessions").makeFreshSession({regId:i,pubKey:d("WASignalKeys").serializePubKey(j)},{regId:c.regId,pubKey:k},z.rootKey,[x],d("WASignalSessions").makeFreshSendChain(y,z.chainKey),A));case 20:case"end":return B.stop()}},null,this)}function c(a,c,e,f){var g,i,j,k,l,m,o,q,r,s,t,u,v,w;return b("regeneratorRuntime").async(function(x){while(1)switch(x.prev=x.next){case 0:i=a.regId,j=a.staticKeyPair;k=j.privateKey;l=f.signed.privateKey;m=e;o=c.pubKey;q=(g=f.oneTime)==null?void 0:g.privateKey;r=d("WABinary").Binary.build(h,p(o,l),p(m,k),p(m,l),q&&p(m,q)).readByteArray();x.next=9;return b("regeneratorRuntime").awrap(n(r,"WhisperText"));case 9:s=x.sent;t=s[0];u=s[1];v=f.ratchet;w=d("WASignalSessions").makeFreshSendChain(v,u);return x.abrupt("return",d("WASignalSessions").makeSession({regId:i,pubKey:d("WASignalKeys").serializePubKey(j)},c,t,[],w,null,0,[],d("WASignalOther").toBuffer(e)));case 15:case"end":return x.stop()}},null,this)}function e(a){a=d("WASignalGroupSession").makeSenderKeyState(d("WASignalKeys").serializePubKey(a),a.privateKey,d("WASignalGroupSession").makeSenderKeyChainKey(0,d("WASignalKeys").makeRawSenderKey()),d("WASignalOther").makeSenderKeyId(),[]);return b("Promise").resolve(d("WASignalGroupSession").makeNewSenderKeySession(a))}function f(a,c,e,f,g){e=d("WASignalGroupSession").makeSenderKeyState(e,void 0,d("WASignalGroupSession").makeSenderKeyChainKey(c,f),a,[]);c=null;g?c=d("WASignalGroupSession").updateSessionWithNewSenderKeyState(g,e):c=d("WASignalGroupSession").makeNewSenderKeySession(e);return b("Promise").resolve(c)}function k(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b("regeneratorRuntime").awrap(d("WASignalOther").makeCryptoKey(c,"hmac-sha256"));case 2:e=k.sent;f=function(a){return self.crypto.subtle.sign("HMAC",e,a)};g=f(i).then(function(a){return d("WASignalOther").hkdf(new Uint8Array(a),null,"WhisperMessageKeys",80)}).then(function(b){return d("WASignalSessions").splitMsgKey(a,b)});h=f(j).then(function(a){return d("WASignalOther").toBytes(a,32)});return k.abrupt("return",b("Promise").all([h,g]));case 7:case"end":return k.stop()}},null,this)}function l(a,c){var e,f,g,h;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:k.next=2;return b("regeneratorRuntime").awrap(d("WASignalOther").makeCryptoKey(c,"hmac-sha256"));case 2:e=k.sent;f=function(a){return self.crypto.subtle.sign("HMAC",e,a)};g=f(i).then(function(a){return d("WASignalOther").hkdf(new Uint8Array(a),null,"WhisperGroup",50)}).then(function(b){return d("WASignalGroupSession").makeSenderKeyMsgKey(a,b)});h=f(j).then(function(a){return d("WASignalOther").toBytes(a,32)});return k.abrupt("return",b("Promise").all([h,g]));case 7:case"end":return k.stop()}},null,this)}function m(a,c,e){var f,g,h,i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:f=c.privateKey;g=e;l.next=4;return b("regeneratorRuntime").awrap(d("WASignalKeys").ecdh(f,g));case 4:h=l.sent;l.next=7;return b("regeneratorRuntime").awrap(n(new Uint8Array(h),"WhisperRatchet",a));case 7:i=l.sent;j=i[0];k=i[1];return l.abrupt("return",{rootKey:j,chainKey:k});case 11:case"end":return l.stop()}},null,this)}function n(a,c,e){var f;return b("regeneratorRuntime").async(function(g){while(1)switch(g.prev=g.next){case 0:e===void 0&&(e=null);g.next=3;return b("regeneratorRuntime").awrap(d("WASignalOther").hkdf(a,e,c,64));case 3:f=g.sent;return g.abrupt("return",[d("WASignalOther").sliceBytes(f,0,32),d("WASignalOther").sliceBytes(f,32,32)]);case 5:case"end":return g.stop()}},null,this)}function o(a,b){return new Uint8Array(d("WASignalKeys").ecdh(a,b))}function p(a,b){return o(b,a)}g.initiateSessionOutgoing=a;g.initiateSessionIncoming=c;g.initiateSenderKeySessionOutgoing=e;g.initiateSenderKeySessionIncoming=f;g.deriveMsgKey=k;g.deriveSenderKeyMsgKey=l;g.calculateRatchet=m}),98);
__d("WASignalCipher",["Promise","WABinary","WACryptoUtils","WAProtoDecode","WAProtoEncode","WAResultOrError","WASignalKeys","WASignalOther","WASignalSessions","WASignalSignatures","WASignalWhisperTextProtocol.pb","WASignalWhitepaper","regeneratorRuntime"],(function(a,b,c,d,e,f,g){var h=40,i=8,j=2e3;function a(a,c){var e,f,g,h,j,k,l,m,n,o,p,r,u,v,w,x,y,z,A,B,C;return b("regeneratorRuntime").async(function(D){while(1)switch(D.prev=D.next){case 0:e=a.sendChain;D.next=3;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveMsgKey(e.nextMsgIndex,e.chainKey));case 3:f=D.sent;g=f[0];h=f[1];D.next=8;return b("regeneratorRuntime").awrap(t(h));case 8:j=D.sent;k=j.cipherKey;l=j.macKey;D.next=13;return b("regeneratorRuntime").awrap(self.crypto.subtle.encrypt({name:"AES-CBC",iv:h.iv},k,c));case 13:m=D.sent;n=new(d("WABinary").Binary)();n.writeByteArray(a.local.pubKey);n.writeByteArray(a.remote.pubKey);o=n.size();n.writeUint8(q(d("WASignalSessions").FORMAT_VERSION,d("WASignalSessions").FORMAT_VERSION));d("WAProtoEncode").encodeProto(d("WASignalWhisperTextProtocol.pb").SignalMessageSpec,{ratchetKey:e.ratchetKey.serializedPubKey,counter:h.index,previousCounter:a.prevSendChainHighestIndex,ciphertext:m},n);p=n.readByteArray();D.next=23;return b("regeneratorRuntime").awrap(s(l,p));case 23:r=D.sent;u=p.subarray(o);v=d("WABinary").Binary.build(u,new Uint8Array(r,0,i)).readByteArray();y=a.initialExchangeInfo;y!=null?(A=new(d("WABinary").Binary)(),A.writeUint8(q(d("WASignalSessions").FORMAT_VERSION,d("WASignalSessions").FORMAT_VERSION)),d("WAProtoEncode").encodeProto(d("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,{registrationId:a.local.regId,preKeyId:(z=y.remoteOneTimeId)!=null?z:void 0,signedPreKeyId:y.remoteSignedId,baseKey:y.localOneTimePubKey,identityKey:a.local.pubKey,message:v},A),w="pkmsg",x=A.readByteArray()):(w="msg",x=v);B=d("WASignalSessions").makeSendChain(e.ratchetKey,h.index+1,g);C=d("WASignalSessions").updateChains(a,a.recvChains,B);return D.abrupt("return",[C,{type:w,ciphertext:x}]);case 31:case"end":return D.stop()}},null,this)}function c(a,c){var e,f,g,h,i,j,k,l;return b("regeneratorRuntime").async(function(m){while(1)switch(m.prev=m.next){case 0:if(!(a==null)){m.next=2;break}return m.abrupt("return",d("WAResultOrError").makeError("errSignalNoSession"));case 2:m.next=4;return b("regeneratorRuntime").awrap(n(a,c));case 4:e=m.sent;if(e.success){m.next=17;break}f=a.prevSessions;g=0;case 8:if(!(!e.success&&g<f.length)){m.next=17;break}h=d("WASignalSessions").parseSession(f[g]);m.next=12;return b("regeneratorRuntime").awrap(n(h,c));case 12:e=m.sent,e.success&&((i=e.value,j=i[0],k=i[1]),l=d("WASignalSessions").setPrevSessions(j,[d("WASignalSessions").detachSession(a)].concat(f.slice(0,g),f.slice(g+1))),e=d("WAResultOrError").makeSuccess([l,k]));case 14:g++;m.next=8;break;case 17:if(e.success){m.next=19;break}return m.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidMsg"));case 19:return m.abrupt("return",e);case 20:case"end":return m.stop()}},null,this)}function e(a,c,e,f){var g,h,i,j,m,o,p,q,r,s;return b("regeneratorRuntime").async(function(t){while(1)switch(t.prev=t.next){case 0:g=c&&k(c,e.sessionBaseKey);if(!g){t.next=9;break}t.next=4;return b("regeneratorRuntime").awrap(n(g,e));case 4:h=t.sent;if(h.success){t.next=7;break}return t.abrupt("return",h);case 7:i=h.value,j=i[0],m=i[1];return t.abrupt("return",d("WAResultOrError").makeSuccess({newIdentity:null,updatedSession:j,usedPreKey:!1,plaintext:m}));case 9:t.next=11;return b("regeneratorRuntime").awrap(l(a,c,e,f));case 11:o=t.sent;if(o.success){t.next=14;break}return t.abrupt("return",o);case 14:p=o.value,q=p.newIdentity,r=p.updatedSession,s=p.plaintext;return t.abrupt("return",d("WAResultOrError").makeSuccess({newIdentity:q,updatedSession:r,usedPreKey:!0,plaintext:s}));case 16:case"end":return t.stop()}},null,this)}function k(a,b){if(u(a,b))return a;var c=a.prevSessions;for(var e=0;e<c.length;e++){var f=d("WASignalSessions").parseSession(c[e]);if(u(f,b))return d("WASignalSessions").setPrevSessions(f,[d("WASignalSessions").detachSession(a)].concat(c.slice(0,e),c.slice(e+1)))}return null}function l(a,c,e,f){var g,i,j,k,l,m,o,p,q,r,s;return b("regeneratorRuntime").async(function(t){while(1)switch(t.prev=t.next){case 0:i=f.localSignedPreKey;if(!(i==null)){t.next=3;break}return t.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidKeyId"));case 3:j=d("WASignalSignatures").deserializeSignedPreKey(i);if(!(j==null||j.id!==e.localSignedPreKeyId)){t.next=6;break}return t.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidKey"));case 6:k=null;if(!(e.localOneTimeKeyId!=null)){t.next=14;break}l=f.localOneTimeKey;if(!(l==null)){t.next=11;break}return t.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidKeyId"));case 11:k=d("WASignalKeys").deserializePreKey(l);if(!(k==null||k.id!==e.localOneTimeKeyId)){t.next=14;break}return t.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidKey"));case 14:t.next=16;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").initiateSessionIncoming(a,e.remote,e.sessionBaseKey,{signed:j.keyPair,oneTime:(g=k)==null?void 0:g.keyPair,ratchet:d("WASignalKeys").toSerializeKeyPair(j.keyPair)}));case 16:m=t.sent;c&&(m=d("WASignalSessions").setPrevSessions(m,[d("WASignalSessions").detachSession(c)].concat(c.prevSessions.slice(0,h-1))));t.next=20;return b("regeneratorRuntime").awrap(n(m,e));case 20:o=t.sent;if(o.success){t.next=23;break}return t.abrupt("return",o);case 23:p=o.value,q=p[0],r=p[1];s=q.remote.pubKey;return t.abrupt("return",d("WAResultOrError").makeSuccess({newIdentity:!c||!d("WACryptoUtils").areBytesEqual(s,c.remote.pubKey)?s:null,baseSession:m,updatedSession:q,plaintext:r}));case 26:case"end":return t.stop()}},null,this)}function m(a){var b,c,e=null;try{var f=p(a,d("WASignalSessions").FORMAT_VERSION,i);if(!f.success)return f;f=d("WAProtoDecode").decodeProto(d("WASignalWhisperTextProtocol.pb").SignalMessageSpec,f.value);var g=f.ratchetKey;e=f.counter;c=f.ciphertext;if(g==null||e==null||c==null)return d("WAResultOrError").makeError("errSignalInvalidMsg");b=d("WASignalKeys").castToSerializedPubKey(new Uint8Array(g))}catch(a){return d("WAResultOrError").makeError("errSignalInvalidMsg")}if(c==null)throw new Error("ciphertext should not be null here");f={ratchetPubKey:b,counter:e,ciphertext:new Uint8Array(c),versionContentMac:a};return d("WAResultOrError").makeSuccess(f)}function f(a){a=p(a,d("WASignalSessions").FORMAT_VERSION,0);if(!a.success)return a;var b,c,e,f,g;try{a=d("WAProtoDecode").decodeProto(d("WASignalWhisperTextProtocol.pb").PreKeySignalMessageSpec,a.value);var h=a.registrationId,i=a.preKeyId,j=a.signedPreKeyId,k=a.baseKey,l=a.identityKey;a=a.message;if(h==null||j==null||k==null||l==null||a==null)return d("WAResultOrError").makeError("errSignalInvalidMsg");f=d("WASignalKeys").castToSerializedPubKey(new Uint8Array(k));b={regId:d("WASignalOther").castRegistrationId(h),pubKey:d("WASignalKeys").castToSerializedPubKey(new Uint8Array(l))};e=i!=null?d("WASignalKeys").castToPreKeyId(i):null;c=d("WASignalKeys").castToPreKeyId(j);g=new Uint8Array(a)}catch(a){return d("WAResultOrError").makeError("errSignalInvalidMsg")}k=m(g);return!k.success?k:d("WAResultOrError").makeSuccess(babelHelpers["extends"]({},k.value,{remote:b,sessionBaseKey:f,localSignedPreKeyId:c,localOneTimeKeyId:e}))}function n(a,c){var e,f,g,h,j,k,l,m,n,p,q,r,u,v,w,x,y,z,A,B,C,D,E,F,G;return b("regeneratorRuntime").async(function(H){while(1)switch(H.prev=H.next){case 0:e=c.ratchetPubKey,f=c.counter,g=c.ciphertext,h=c.versionContentMac;j=a.recvChains;k=a.recvChains.findIndex(function(a){return d("WACryptoUtils").areBytesEqual(a.ratchetPubKey,e)});if(!(k===-1)){H.next=24;break}H.next=6;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").calculateRatchet(a.rootKey,a.sendChain.ratchetKey,e));case 6:n=H.sent;p=d("WASignalSessions").makeFreshRecvChain(e,n.chainKey);H.next=10;return b("regeneratorRuntime").awrap(o(p,f));case 10:q=H.sent;if(q.success){H.next=13;break}return H.abrupt("return",q);case 13:r=q.value;u=d("WASignalKeys").makeSerializedKeyPair();H.next=17;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").calculateRatchet(n.rootKey,u,e));case 17:v=H.sent;w=j.slice(-4);w.push(r.updatedChain);m=r.msgKey;l=d("WASignalSessions").ratchetSession(a,w,d("WASignalSessions").makeFreshSendChain(u,v.chainKey),v.rootKey);H.next=34;break;case 24:H.next=26;return b("regeneratorRuntime").awrap(o(j[k],f));case 26:x=H.sent;if(x.success){H.next=29;break}return H.abrupt("return",x);case 29:y=x.value,z=j.slice(),z[k]=y.updatedChain,m=y.msgKey,l=d("WASignalSessions").updateChains(a,z,a.sendChain);case 34:H.next=36;return b("regeneratorRuntime").awrap(t(m));case 36:A=H.sent;B=A.cipherKey;C=A.macKey;D=d("WABinary").Binary.build(a.remote.pubKey,a.local.pubKey,h.subarray(0,-i)).readByteArray();H.next=42;return b("regeneratorRuntime").awrap(s(C,D));case 42:E=H.sent;F=h.subarray(-i);if(d("WACryptoUtils").areBytesEqual(new Uint8Array(E,0,i),F)){H.next=46;break}return H.abrupt("return",d("WAResultOrError").makeError("errInvalidMac"));case 46:H.next=48;return b("regeneratorRuntime").awrap(self.crypto.subtle.decrypt({name:"AES-CBC",iv:m.iv},B,g));case 48:G=H.sent;return H.abrupt("return",d("WAResultOrError").makeSuccess([l,G]));case 50:case"end":return H.stop()}},null,this)}function o(a,c){var e,f,g,h,i,k,l,m,n,o,p;return b("regeneratorRuntime").async(function(q){while(1)switch(q.prev=q.next){case 0:e=c-a.nextMsgIndex;if(!(e>2e3)){q.next=3;break}return q.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidMsg"));case 3:f=a.unusedMsgKeys;if(!(e<0)){q.next=9;break}g=f.findIndex(function(a){return a.index===c});if(!(g===-1)){q.next=8;break}return q.abrupt("return",d("WAResultOrError").makeError("errDuplicateMsg"));case 8:return q.abrupt("return",d("WAResultOrError").makeSuccess({msgKey:f[g],updatedChain:d("WASignalSessions").makeRecvChain(a.ratchetPubKey,a.nextMsgIndex,a.chainKey,r(f,g))}));case 9:h=a.nextMsgIndex;q.next=12;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveMsgKey(h,a.chainKey));case 12:i=q.sent;k=i[0];l=i[1];m=null;if(!(e>0)){q.next=30;break}n=e+f.length-j;n>0?(m=f.slice(n),n-=f.length):m=f.slice();o=h+1;case 20:if(!(o<=c)){q.next=30;break}n>0?n--:m.push(l);q.next=24;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").deriveMsgKey(o,k));case 24:p=q.sent,k=p[0],l=p[1];case 27:o++;q.next=20;break;case 30:return q.abrupt("return",d("WAResultOrError").makeSuccess({msgKey:l,updatedChain:d("WASignalSessions").makeRecvChain(a.ratchetPubKey,c+1,k,m||f)}));case 31:case"end":return q.stop()}},null,this)}function p(a,b,c){if(a.length<1)return d("WAResultOrError").makeError("errSignalInvalidMsg");var e=a[0]>>>4;if(e!==b)return e<b?d("WAResultOrError").makeError("errSignalLegacyMsg"):d("WAResultOrError").makeError("errSignalInvalidVersion");e=a.length-c;return e<1?d("WAResultOrError").makeError("errSignalInvalidMsg"):d("WAResultOrError").makeSuccess(a.subarray(1,e))}function q(a,b){return(a<<4|b)&255}function r(a,b){var c=[];for(var d=0;d<a.length;d++)d!==b&&c.push(a[d]);return c}function s(a,b){return self.crypto.subtle.sign(d("WASignalOther").HMAC_SHA256,a,b)}function t(a){return b("Promise").all([d("WASignalOther").makeCryptoKey(a.cipherKey,"aes-cbc"),d("WASignalOther").makeCryptoKey(a.macKey,"hmac-sha256")]).then(function(a){var b=a[0];a=a[1];return{cipherKey:b,macKey:a}})}function u(a,b){a=a.aliceBaseKey;if(!a)return!1;a=new Uint8Array(a);var c=a.length===b.length;for(var d=0;c&&d<b.length;d++)c=a[d]===b[d];return c}g.MAX_UNUSED_KEYS=j;g.encryptMsg=a;g.decryptMsg=c;g.decryptPkMsg=e;g.findMatchingSession=k;g.decryptPkMsgWithNewSession=l;g.deserializeMsg=m;g.deserializePkMsg=f;g.decryptMsgFromSession=n;g.readContent=p;g.versionByte=q}),98);
__d("WAPromiseCallSync",["Promise"],(function(a,b,c,d,e,f){function a(a,c){try{for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];return b("Promise").resolve(a.apply(c,e))}catch(a){return b("Promise").reject(a)}}f.promiseCallSync=a}),66);
__d("WASignalEnv",["WAPromiseCallSync","WASignalKeys","WASignalLocalStorageProtocol.pb","WASignalOther","WASignalSessions"],(function(a,b,c,d,e,f,g){function a(a){var b=a.regId,c=a.identity,e=a.signedKey;a=a.oneTimeKey;var f=d("WASignalKeys").castToSerializedPubKey(e.publicKey);return{regId:d("WASignalOther").castRegistrationId(b),identity:d("WASignalKeys").castToSerializedPubKey(c),signedKey:{id:d("WASignalKeys").castToPreKeyId(e.id),publicKey:f,signature:d("WASignalOther").ensureSize(e.signature,64)},oneTimeKey:a&&{id:d("WASignalKeys").castToPreKeyId(a.id),publicKey:d("WASignalKeys").castToSerializedPubKey(a.publicKey)},ratchetKey:f}}function b(a){return babelHelpers["extends"]({},a)}function c(a){return a.regInfo}function e(a,b){return d("WAPromiseCallSync").promiseCallSync(a.loadSession,null,b).then(function(a){return!a?null:d("WASignalOther").decodeSignalProto(d("WASignalLocalStorageProtocol.pb").RecordStructureSpec,a,d("WASignalSessions").parseSessionFromRecord)})}function f(a,b,c,e){c=d("WASignalOther").encodeSignalProto(d("WASignalLocalStorageProtocol.pb").RecordStructureSpec,d("WASignalSessions").serializeSession(c));return d("WAPromiseCallSync").promiseCallSync(a.saveSession,null,b,c,e).then(function(){})}function h(a,b,c){return d("WAPromiseCallSync").promiseCallSync(a.saveIdentity,null,b,c)}function i(a,b,c,e){return d("WAPromiseCallSync").promiseCallSync(a.loadSessionAndPreKeyData,null,{target:b,signedKeyId:c,oneTimeKeyId:e}).then(function(a){var b=a.session,c=a.signed;a=a.oneTime;return{session:b?d("WASignalOther").decodeSignalProto(d("WASignalLocalStorageProtocol.pb").RecordStructureSpec,b,d("WASignalSessions").parseSessionFromRecord):null,signed:c,oneTime:a}})}g.sanitizeInitialSessionInfo=a;g.makeSignalEnv=b;g.getRegInfo=c;g.loadSession=e;g.saveSession=f;g.saveIdentity=h;g.loadSessionAndPreKeyData=i}),98);
__d("WAJsSignal",["Promise","WAResultOrError","WASignalCipher","WASignalEnv","WASignalKeys","WASignalOther","WASignalSignatures","WASignalWhitepaper","regeneratorRuntime","tweetnacl.dist"],(function(a,b,c,d,e,f,g){function a(){return b("Promise").resolve().then(function(){return d("WASignalKeys").makeKeyPair()})}function c(a,c){return b("Promise").resolve().then(function(){return d("tweetnacl.dist").scalarMult(d("WASignalOther").ensureSize(c,32),d("WASignalOther").ensureSize(a,32)).buffer})}function e(a){return b("Promise").resolve().then(function(){return{regId:d("WASignalOther").makeRegistrationId(a),staticKeyPair:d("WASignalKeys").makeKeyPair()}})}function f(a,c,e){return b("Promise").resolve().then(function(){var b=d("WASignalSignatures").makeSignedPreKey(a,c,e),f=d("WASignalSignatures").serializeSignedPreKeyForPrivateStorage(b);return{plainObject:b,record:f}})}function h(a,c){return b("Promise").resolve().then(function(){return d("WASignalKeys").makePreKeys(a,c)})}function i(a){return d("WASignalEnv").makeSignalEnv(a)}function j(a,c,e){var f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:j.next=2;return b("regeneratorRuntime").awrap(d("WASignalEnv").loadSession(a,c));case 2:f=j.sent;if(f){j.next=5;break}return j.abrupt("return",d("WAResultOrError").makeError("errSignalNoSession"));case 5:j.next=7;return b("regeneratorRuntime").awrap(d("WASignalCipher").encryptMsg(f,e));case 7:g=j.sent;h=g[0];i=g[1];j.next=12;return b("regeneratorRuntime").awrap(d("WASignalEnv").saveSession(a,c,h));case 12:return j.abrupt("return",d("WAResultOrError").makeSuccess(i));case 13:case"end":return j.stop()}},null,this)}function k(a,c,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B;return b("regeneratorRuntime").async(function(C){while(1)switch(C.prev=C.next){case 0:g=e.type,h=e.ciphertext;if(!(g==="pkmsg")){C.next=29;break}i=d("WASignalCipher").deserializePkMsg(h);if(i.success){C.next=5;break}return C.abrupt("return",i);case 5:j=i.value;C.next=8;return b("regeneratorRuntime").awrap(d("WASignalEnv").loadSessionAndPreKeyData(a,c,j.localSignedPreKeyId,j.localOneTimeKeyId));case 8:k=C.sent;l=k.session;m=k.signed;n=k.oneTime;C.next=14;return b("regeneratorRuntime").awrap(d("WASignalCipher").decryptPkMsg(d("WASignalEnv").getRegInfo(a),l,j,{localSignedPreKey:m,localOneTimeKey:n}));case 14:o=C.sent;if(o.success){C.next=17;break}return C.abrupt("return",o);case 17:p=o.value,q=p.newIdentity,r=p.updatedSession,s=p.usedPreKey,t=p.plaintext;if(!q){C.next=21;break}C.next=21;return b("regeneratorRuntime").awrap(d("WASignalEnv").saveIdentity(a,c,q));case 21:C.next=23;return b("regeneratorRuntime").awrap(f(t));case 23:u=C.sent;C.next=26;return b("regeneratorRuntime").awrap(d("WASignalEnv").saveSession(a,c,r,s?j.localOneTimeKeyId:null));case 26:return C.abrupt("return",d("WAResultOrError").makeSuccess(u));case 29:g;v=d("WASignalCipher").deserializeMsg(h);if(v.success){C.next=33;break}return C.abrupt("return",v);case 33:C.next=35;return b("regeneratorRuntime").awrap(d("WASignalEnv").loadSession(a,c));case 35:w=C.sent;C.next=38;return b("regeneratorRuntime").awrap(d("WASignalCipher").decryptMsg(w,v.value));case 38:x=C.sent;if(x.success){C.next=41;break}return C.abrupt("return",x);case 41:y=x.value,z=y[0],A=y[1];C.next=44;return b("regeneratorRuntime").awrap(f(A));case 44:B=C.sent;C.next=47;return b("regeneratorRuntime").awrap(d("WASignalEnv").saveSession(a,c,z));case 47:return C.abrupt("return",d("WAResultOrError").makeSuccess(B));case 48:case"end":return C.stop()}},null,this)}function l(a,c,e){var f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:if(!(a==null)){j.next=2;break}return j.abrupt("return",b("Promise").reject(new Error("signalCreateSession called with null signal")));case 2:f=d("WASignalEnv").sanitizeInitialSessionInfo(e);g=f.signedKey;j.next=6;return b("regeneratorRuntime").awrap(d("WASignalSignatures").verifyMsgSignalVariant(f.identity,g.publicKey,g.signature));case 6:h=j.sent;if(h){j.next=9;break}return j.abrupt("return",d("WAResultOrError").makeError("errSignalInvalidKey"));case 9:j.next=11;return b("regeneratorRuntime").awrap(d("WASignalWhitepaper").initiateSessionOutgoing(d("WASignalEnv").getRegInfo(a),f,d("WASignalKeys").makeKeyPair()));case 11:i=j.sent;j.next=14;return b("regeneratorRuntime").awrap(d("WASignalEnv").saveSession(a,c,i));case 14:return j.abrupt("return",d("WAResultOrError").makeSuccess());case 15:case"end":return j.stop()}},null,this)}g.generateIdentityKeyPair=a;g.calculateAgreement=c;g.generateRegistrationInfo=e;g.generateSignedPreKey=f;g.generatePreKeys=h;g.initSignalEnv=i;g.signalEncryptMsg=j;g.signalDecryptMsg=k;g.signalCreateSession=l}),98);
__d("WAPreRegistrationCrypto",["WAJsSignal","WASignalSignatures","err","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a,c,e,f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:j.next=2;return b("regeneratorRuntime").awrap(d("WAJsSignal").generateRegistrationInfo());case 2:a=j.sent;c=a.regId;e=a.staticKeyPair;f=Date.now();j.next=8;return b("regeneratorRuntime").awrap(d("WAJsSignal").generateSignedPreKey(1,f,e));case 8:g=j.sent;h=g.plainObject;i=g.record;return j.abrupt("return",{regId:c,identityKeyPair:e,signedPreKey:{keyId:h.id,encoded:i}});case 12:case"end":return j.stop()}},null,this)}function e(a){var b=d("WASignalSignatures").deserializeSignedPreKey(a.signedPreKey.encoded);if(b==null||b.id!==a.signedPreKey.keyId)throw c("err")("Badly formatted signed prekey");return{regId:a.regId,identityPubKeyType:5,identityPubKey:a.identityKeyPair.publicKey,signedPreKey:b}}g.makeRegistrationData=a;g.serializeRegistrationData=e}),98);
__d("WAPromiseBackoffs",["Promise"],(function(a,b,c,d,e,f){function a(a,b){if(a===0)return 0;var c=m(b.algo);for(var d=1;d<a;d++)c();return h(b,c())}function g(a){var b=a.relativeDelay,c=b===void 0?!1:b,d=null,e=m(a.algo);return function(){if(d==null){d=c?Date.now():0;return 0}var b=h(a,e());if(c){var f=Date.now(),g=f-d;g>0&&(b=Math.max(0,b-g));d=f}return b}}function c(a){var c=g(a);return function(a){return new(b("Promise"))(function(b){var d=c();d>0?setTimeout(b,d,a):b(a)})}}function h(a,b){var c=a.max,d=a.min;a=a.jitter;a=a===void 0?.1:a;b=b;c!=null&&b>c&&(b=c);d!=null&&b<d&&(b=d);a!==0&&(b=Math.ceil(b*(1+a*Math.random())));return b}function i(a){var b=a.second-a.first,c=a.first-b;return function(){var a=b+c;c=b;b=a;return a}}function j(a){var b=a.base,c=b===void 0?2:b,d=a.first;return function(){var a=d;d*=c;return a}}function k(a){var b=a.delay;return function(){return b}}function l(a){var b=a.toMs;a=a.backoff;var c=m(a);return function(){return b(c())}}function m(a){switch(a.type){case"fibonacci":return i(a);case"exponential":return j(a);case"constant":return k(a);case"adjust":return l(a);default:a;throw new Error("makeTimeFunc unrecognized backoff "+a.type)}}f.getDelay=a;f.createTimer=g;f.createPromiseTimer=c}),66);
__d("WAPromiseDelays",["Promise"],(function(a,b,c,d,e,f){function a(a,c){return new(b("Promise"))(function(b){setTimeout(b,a,c)})}function c(a,c,d){return new(b("Promise"))(function(b,e){var f=setTimeout(function(){try{b(d())}catch(a){e(a)}},c);a.then(function(a){clearTimeout(f),b(a)},function(a){clearTimeout(f),e(a)})})}f.delayMs=a;f.withTimeout=c}),66);
__d("WAResolvable",["Promise"],(function(a,b,c,d,e,f){a=function(){function a(){this.$2=!1;var a;this.promise=new(b("Promise"))(function(b){a=b});this.$1=a}var c=a.prototype;c.resolve=function(a){this.$2=!0,this.$1(a)};c.reject=function(a){this.resolve(b("Promise").reject(a))};c.resolveWasCalled=function(){return this.$2};return a}();f.Resolvable=a}),66);
__d("WAPromiseRetryLoop",["Promise","WALogger","WAPromiseBackoffs","WAPromiseDelays","WAResolvable"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: retrying "," in ","ms"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: resetting ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop was called several times. You may have race conditions"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: starting ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: resetting ",""]);l=function(){return a};return a}a=function(){function a(a){var b=this;this.$2=new(d("WAResolvable").Resolvable)();this.$3=null;this.$4=null;this.$5=0;this.endWithValue=function(a){b.$5++,b.$2.resolve(a)};this.$1=a}var c=a.prototype;c.resetTimeoutAfter=function(a){this.$4=Date.now()+a};c.cancelReset=function(){this.$4=null};c.reset=function(){if(this.$2.resolveWasCalled())return;d("WALogger").LOG(l(),this.$1.name);this.$5++;this.$6()};c.start=function(){if(this.$2.resolveWasCalled())return;d("WALogger").LOG(k(),this.$1.name);this.$5!==0&&d("WALogger").ERROR(j());this.$5++;this.$6()};c.$6=function(){var a=this,c=this.$1,e=this.$5,f=d("WAPromiseBackoffs").createTimer(this.$1.timer);f();var g=function b(){if(a.$2.resolveWasCalled())return;if(e!==a.$5)return;var g=Date.now();a.$3=c.code(a.endWithValue).then(function(){if(a.$2.resolveWasCalled())return;var e=c.resetDelay;(e!==void 0&&Date.now()>=g+e||a.$4!=null&&a.$4<=Date.now())&&(d("WALogger").LOG(i(),c.name),f=d("WAPromiseBackoffs").createTimer(a.$1.timer));a.$4=null;e=f();d("WALogger").LOG(h(),c.name,e);return d("WAPromiseDelays").delayMs(e).then(b)})};this.$3=b("Promise").resolve().then(g)};c.promise=function(){var a=this;if(this.$2.resolveWasCalled())return this.$2.promise;return!this.$3?b("Promise").reject(new Error("PromiseRetryLoop "+this.$1.name+" had promise() called before start()")):b("Promise").race([this.$2.promise,this.$3.then(function(){return a.$2.promise})])};return a}();g.PromiseRetryLoop=a}),98);
__d("LSDatabaseDeferred.re",["LSDatabaseDeferred.bs"],(function(a,b,c,d,e,f){a=b("LSDatabaseDeferred.bs").db;f.db=a}),null);
__d("ArmadilloDataTraceCheckPoint.bs",[],(function(a,b,c,d,e,f){"use strict";a=[0,63];b=[0,98];c=[0,1e3];d=[0,1001];e=[0,1210];var g=[0,504];f.traceGroupMessage=a;f.traceCreated=b;f.traceTextMessage=c;f.traceMediaMessage=d;f.deliveryReceiptReceived=e;f.richMediaMediaSendAttachmentType=g}),null);
__d("LSDataTraceTag.bs",[],(function(a,b,c,d,e,f){"use strict";a=0;b=1;c=2;d=3;e=4;var g=5,h=6,i=7;f.none=a;f.sticker=b;f.image=c;f.animatedImage=d;f.video=e;f.audio=g;f.file=h;f.xma=i}),null);
__d("WAShiftTimer",[],(function(a,b,c,d,e,f){a=function(){function a(a){var b=this;this.$2=0;this.$3=0;this.ts=0;this.$4=0;this.$5=0;this.$6=0;this.$7=void 0;this.$8=function(){var a=b.$7,c=b.$1;b.$3=0;b.$2=0;b.ts=0;b.$4=0;b.$5=0;b.$6=0;b.$7=void 0;c(a)};this.onOrBefore=function(a,c){g(a);var d=Date.now();d=d+a;var e=b.$5;if(e!==0&&e<d)return;e=b.$6;if(e!==0&&d<e)return;b.$5=d;!b.$3&&(!b.$2||d<b.ts)&&b.$9(d,a,c)};this.forceRunNow=function(a){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$7=a,b.$8()};this.cancel=function(){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$2=0,b.$3=0,b.ts=0,b.$4=0,b.$5=0,b.$6=0,b.$7=void 0};this.$1=a}var b=a.prototype;b.onOrBeforeRepaint=function(a){if(this.$3)return;var b=Date.now(),c=this.$6;if(c!==0&&b<c)return;c=this.$5;(c===0||b<c)&&(this.$5=b);this.$2&&(clearTimeout(this.$2),this.$2=0);(!this.ts||this.ts>b)&&(this.ts=b);this.$7=a;this.$3=requestAnimationFrame(this.$8)};b.onOrAfter=function(a,b){g(a);var c=Date.now();c=c+a;var d=this.$6;if(d!==0&&c<d)return;d=this.$5;if(d!==0&&d<c)return;this.$6=c;(!this.$2||this.ts<c)&&this.$9(c,a,b)};b.debounce=function(a,b){g(a),this.$10(Date.now(),a,b)};b.debounceAndCap=function(a,b,c){g(a);g(b);var d=Date.now();b=d+b;var e=this.$6,f=this.$5;(e===0||e<=b)&&(f===0||b<f)&&(this.$5=b);this.$10(d,a,c)};b.forceRunNowIfScheduled=function(){this.$2?(clearTimeout(this.$2),this.$8()):this.$3&&(cancelAnimationFrame(this.$3),this.$8())};b.isScheduled=function(){return this.$2!==0||this.$3!==0};b.$10=function(a,b,c){var d=a+b,e=this.$6;if(e!==0&&d<e)return;e=this.ts;var f=this.$5;f!==0&&f<d?e<f&&this.$9(f,f-a,c):e<d&&this.$9(d,b,c)};b.$9=function(a,b,c){this.$3&&(cancelAnimationFrame(this.$3),this.$3=0);this.$7=c;this.ts=a;if(this.$2){c=a-this.$4;if(-16<c&&c<16)return;clearTimeout(this.$2)}this.$2=setTimeout(this.$8,b);this.$4=a};return a}();function g(a){if(!(a>=0))throw new Error("ShiftTimer must be given delay >= 0")}f.ShiftTimer=a}),66);
__d("WABridgeBatcher",["WAShiftTimer"],(function(a,b,c,d,e,f,g){var h=20,i=1e3;a=function(){function a(a,b){var c=this;this.$1=null;this.$4=h;this.$5=Date.now();this.$6=new(d("WAShiftTimer").ShiftTimer)(function(){var a=c.$1;if(a==null)return;c.$1=null;c.$2(a)});this.$2=b;this.$3=a}var b=a.prototype;b.addEvent=function(a){var b=this.$1;this.$1=b?this.$3(b,a):[a];if(this.$6.isScheduled())return;b=this.$4;if(b<1){a=Date.now();var c=Math.max(a-this.$5,0)/i;b=Math.min(b+c,h);this.$4=b;this.$5=a}b>=1?(c=0,this.$4=b-1):(c=Math.ceil(i*(1-b)),this.$4=0);this.$6.onOrBefore(c)};b.cancel=function(){this.$1=null,this.$6.cancel()};return a}();g.BridgeBatcher=a}),98);
__d("WAPromiseManagement",["Promise","WAPromiseCallSync"],(function(a,b,c,d,e,f,g){function a(a){var b=null,c=function(){b||(b=d("WAPromiseCallSync").promiseCallSync(a)["finally"](function(){b=null}));return b};c.isPending=function(){return!!b};return c}function c(a,c){var d=new Map();return function(e){var f=a(e),g=d.get(f);if(g)return g;try{g=b("Promise").resolve(c(e))}catch(a){g=b("Promise").reject(a)}e=g["finally"](function(){return void d["delete"](f)});d.set(f,e);return e}}var h=new Set();function e(a){h.add(a),a["finally"](function(){h["delete"](a)})}g.nullaryCacheWhilePending=a;g.cacheWhilePending=c;g.preventGarbageCollection=e}),98);
__d("WACrossWorkerPortal",["Promise","WABridgeBatcher","WALogger","WAPromiseManagement"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["absorbPortal: transferring request #",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected non-result to call"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unexpected result to cast"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge unrecognized result ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," response of ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge "," request for ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge queuing "," msgs"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge sending "," across (delayed)"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge received msg on old port"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["Bridge updating port"]);q=function(){return a};return a}var r=function(){function a(a,b,c){var e=this;this.port=null;this.$2=1;this.openRequests=new Map();this.$1=a;this.sendStream=new(d("WABridgeBatcher").BridgeBatcher)(b,function(a){e.$3(a)});c.forEach(function(b){a.setNamespaceHandler(b,e.$4(b))})}var c=a.prototype;c.setPort=function(a){var b=this;d("WALogger").LOG(q());this.port=a;this.sendStream.cancel();a.onmessage=function(c){if(b.port!==a){d("WALogger").WARN(p()).devConsole(c.data);return}c=c.data;if(!c)return;c.forEach(function(c){return b.$5(a,c)})};this.openRequests.forEach(function(a){a=a.request;d("WALogger").LOG(o(),a.name);b.sendStream.addEvent({type:"request",content:a})})};c.getBridge=function(){return this.$1};c.$4=function(a){var b=this;return function(c,d,e,f){b.$6(a,c,d,e,f)}};c.$6=function(a,b,c,d,e){var f=this.$2++;a={requestId:f,expectsResponse:!!d,namespace:a,name:b,arg:c,silentLog:e};this.openRequests.set(f,{request:a,resolver:d});this.sendStream.addEvent({type:"request",content:a})};c.$7=function(a,b){if(a!==this.port)return;this.sendStream.addEvent({type:"result",content:b})};c.$3=function(a){var b=this.port;if(!b){d("WALogger").LOG(n(),a.length);return}b.postMessage(a)};c.$5=function(a,c){var e=this;if(c.type==="request"){var f=c.content,g=f.namespace,h=f.name,n=f.requestId,o=f.arg,p=f.expectsResponse,q=f.silentLog;q||d("WALogger").LOG(m(),n,h);f=this.$1;if(p){p=f.sendAndReceive(g,h,o,q).then(function(b){e.$7(a,{requestId:n,type:"success",result:b,silentLog:q})},function(b){e.$7(a,{requestId:n,type:"error",result:String(b),silentLog:q})});d("WAPromiseManagement").preventGarbageCollection(p)}else f.fireAndForget(g,h,o,q),a.postMessage([{type:"result",content:{requestId:n,type:"handled",silentLog:q}}])}else{c.type;p=c.content;f=p.requestId;g=p.type;h=p.result;o=p.silentLog;o||d("WALogger").LOG(l(),f,g);c=this.openRequests.get(f);if(!c){d("WALogger").WARN(k(),f);return}switch(g){case"success":case"error":this.openRequests["delete"](f);c.resolver?c.resolver(g==="success"?h:b("Promise").reject(new Error(h))):d("WALogger").ERROR(j());break;case"handled":c.resolver?d("WALogger").ERROR(i()):this.openRequests["delete"](f);break}}};return a}();function a(a,b,c){a=new r(a,c,b);return a}function c(a){var b;(b=a.port)==null?void 0:b.close==null?void 0:b.close();a.port=null;a.sendStream.cancel();b=a.openRequests;a.openRequests=new Map();var c=a.getBridge();b.forEach(function(a){var b=a.request;a=a.resolver;var e=b.namespace,f=b.name,g=b.arg,i=b.silentLog;d("WALogger").LOG(h(),b.requestId);a?a(c.sendAndReceive(e,f,g,i)):c.fireAndForget(e,f,g,i)})}g.CrossWorkerPortal=r;g.attachPortal=a;g.killPortalAndSendPendingToBridge=c}),98);
__d("XLogoutController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/logout.php",{h:{type:"String"},next:{type:"String"},button_name:{type:"String"},button_location:{type:"String"},source:{type:"String"},ref:{type:"String"},p:{type:"String"}})}),null);
__d("WorkerBanzaiLazyQueueChannelClient",["BanzaiLazyQueue","WorkerFuncChannel"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("WorkerFuncChannel").exportChannel(c("BanzaiLazyQueue"),a,"banzai_lazyqueue_channel")}g.init=a}),98);
__d("WorkerQPLChannel",["WorkerFuncChannel","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";var h=new(d("WorkerFuncChannel").WorkerFuncChannel)(function(a){return{markerStartFromNavStart:null,markerStart:function(b,d,e){e===void 0&&(e=c("performanceAbsoluteNow")());return a.markerStart(b,d,e)},markerAnnotate:function(b,c,d){return a.markerAnnotate(b,c,d)},markerPoint:function(b,d,e){e=(e==null?void 0:e.timestamp)===void 0?babelHelpers["extends"]({},e,{timestamp:c("performanceAbsoluteNow")()}):e;return a.markerPoint(b,d,e)},markerEnd:function(b,d,e,f){f===void 0&&(f=c("performanceAbsoluteNow")());return a.markerEnd(b,d,e,f)}}},"qpl");b=function(a){return h.setOutMessagePort(a)};e=function(a){return h.setInMessagePort(a)};function a(a){h.setBackend(a)}f=babelHelpers["extends"]({},h.proxyMethods,{setOutMessagePort:b,setInMessagePort:e,initQPL:a});g["default"]=f}),98);
__d("WorkerClient",["WorkerBanzaiLazyQueueChannelClient","WorkerFuncChannel","WorkerQPLChannel"],(function(a,b,c,d,e,f,g){"use strict";function a(a){d("WorkerFuncChannel").activateChannels(a,"client","worker"),d("WorkerBanzaiLazyQueueChannelClient").init(a),c("WorkerQPLChannel").setInMessagePort(a),e(["QuickPerformanceLogger"],function(a){return c("WorkerQPLChannel").initQPL(a)})}g.init=a}),98);
__d("WorkerMessagePort",["Promise","SimpleHook","performanceAbsoluteNow"],(function(a,b,c,d,e,f,g){"use strict";function h(a){return a}var i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(d("SimpleHook").SimpleHook);a=function(){var a=c.prototype;a.onMessageHandler=function(a){try{this.onMessage.call(a);var b=this.$1[a.type];!b?this.onUnhandledMessage.call(a):b.call(a)}catch(a){this.onError.call(a)}};function c(a,b){var c=this;this.$1={};this.onUnhandledMessage=new i();this.onMessage=new i();this.onPostMessage=new i();this.onError=new i();this.$2=a;this.name=b;this.$2.addEventListener("message",function(a){return c.onMessageHandler(h(a.data))});this.$2.addEventListener("error",function(a){return c.onError.call(a)})}a.postMessage=function(a,b){this.onPostMessage.call(a),b?this.$2.postMessage(a,b):this.$2.postMessage(a)};a.addMessageListener=function(a,b){var c=this.$1[a];c||(c=new i(),this.$1[a]=c);return c.add(b)};a.removeMessageListener=function(a,b){a=this.$1[a];return!!a&&a.remove(b)};a.onMessageOnce=function(a,c){var d=this;return new(b("Promise"))(function(b){var e=d.addMessageListener(a,function(f){c(f)&&(d.removeMessageListener(a,e),b(f))})})};a.close=function(){var a;(a=(a=this.$2.close)!=null?a:this.$2.terminate)==null?void 0:a.call(this.$2)};return c}();function j(a){return h(a)}e=function(a){babelHelpers.inheritsLoose(d,a);function d(d,e){var f;f=a.call(this,d,e)||this;var g=j(babelHelpers.assertThisInitialized(f));g.postMessage({type:"endpoint_started",endpoint:f.name,timestamp:c("performanceAbsoluteNow")()});g.addMessageListener("endpoint_started",function(a){g.postMessage({type:"endpoint_started_received",endpoint:a.endpoint,targetEndpoint:f.name,timestamp:c("performanceAbsoluteNow")()})});f.fullyConnected=b("Promise").race([g.onMessageOnce("endpoint_started",function(){return!0}),g.onMessageOnce("endpoint_started_received",function(){return!0})]).then(function(){return babelHelpers.assertThisInitialized(f)});return f}return d}(a);g.WorkerMessagePort=a;g.CastWorkerMessagePort=j;g.WorkerSyncedMessagePort=e}),98);
__d("WorkerBundleResource",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c,d;for(var e=arguments.length,f=new Array(e>2?e-2:0),g=2;g<e;g++)f[g-2]=arguments[g];var h=(c=b)!=null?c:a.name,i=window.URL.createObjectURL(new Blob(["__DEV__=false;","importScripts('"+a.url+"');","StartBundle.apply(null, "+JSON.stringify([a].concat((d=f)!=null?d:[]))+")"],{type:"text/javascript"})),j=new Worker(i,{name:h}),k=j.terminate;j.terminate=function(){window.URL.revokeObjectURL(this._objectURL),k.apply(this,arguments)};return j}function b(a,b){b=(b=b)!=null?b:a.name;b=new SharedWorker(a.url,{name:b});b.port.start();b.port.postMessage({type:"execute-worker",args:[a]});return b}f.createDedicatedWebWorker=a;f.createSharedWebWorker=b}),66);
__d("MWChatStateV2IsCollapsed.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return Math.max(a.minimiseWatermark,a.clientForcedMinimiseWatermark)>Math.max(a.openWatermark,a.closeWatermark)}f.isCollapsed=a}),null);
__d("MWChatStateV2IsComposeTab.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.tabType;if(a.TAG===0)return!0;else return!1}f.isComposeTab=a}),null);
__d("MWChatUIStateV2.bs",["MWChatStateActions.bs","MWChatStateV2.bs","MWChatStateV2IsCollapsed.bs","MWChatStateV2IsComposeTab.bs","MWChatStateV2IsOpen.bs","bs_caml_array","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,b){a=a.openWatermark-b.openWatermark;if(a<0)return 1;else if(a>0)return-1;else return 0}function j(a,b){a=Math.max(a.minimiseWatermark,a.clientForcedMinimiseWatermark)-Math.max(b.minimiseWatermark,b.clientForcedMinimiseWatermark);if(a<0)return 1;else if(a>0)return-1;else return 0}d={byMostRecentOpened:i,byMostRecentMinimised:j};function k(a,b){return[a.slice(0,b),a.slice(b,a.length)]}function l(a,c,d){var e=a.length;if(e>c&&c>0&&d!==void 0){var f=a.findIndex(function(a){return a.tabId===d});if(f!==-1&&f>=c&&f<e){e=function(c,d){var e=b("bs_caml_array").get(a,c);a[c]=b("bs_caml_array").get(a,d);a[d]=e};e(c-1|0,f)}}return a}function m(a,c,d){return k(l(Array.from(a.values()).filter(b("MWChatStateV2IsOpen.bs").isOpen).sort(i),d,c),d)}function n(a,c,d){c=Array.from(c.values()).filter(b("MWChatStateV2IsCollapsed.bs").isCollapsed).sort(function(a,b){var c=j(a,b);if(c===0)return i(a,b);else return c});return k(a.filter(function(a){return!b("MWChatStateV2IsComposeTab.bs").isComposeTab(a)}).concat(c),d)}e=[];var o=[],p=[],q=[];e={visible:e,heads:o,excess:p,overflow:q,maxTabs:3};var r=h.createContext(e);function a(a,c){return b("bs_curry")._1(a,h.useContext(r))}function c(a){a=a.children;var c=b("MWChatStateV2.bs").useState(function(a){return a}),d=b("MWChatStateV2.bs").useDispatch(void 0),e=h.useMemo(function(){var a=m(c.tabs,c.focusedTabId,3),b=a[1],d=n(b,c.tabs,5);return{visible:a[0],heads:d[0],excess:b,overflow:d[1],maxTabs:3}},[c,3]),f=e.excess.map(function(a){return String(a.tabId)}).join("|");h.useEffect(function(){var a=Date.now();b("bs_curry")._1(d,e.excess.flatMap(function(c){return b("MWChatStateActions.bs").forceMinimizeTab(a,c.tabId)}))},[f,d]);return h.createElement(r.Provider,{value:e,children:a})}o=3;p=c;f.Comparators=d;f.prioritiseFocusedTabInPlace=l;f.getTabs=m;f.getHeads=n;f.maxTabs=o;f.$$default=e;f["default"]=e;f.__esModule=!0;f.useState=a;f.make=p}),null);
__d("MWV2ChatHeadButton.bs",["CometPressable.react","bs_caml_option","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i={button:{position:"pmk7jnqg",display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",width:"tmrshh9y",height:"m7zwrmfr",marginBottom:"oud54xpy",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",backgroundColor:"g5ia77u1",boxShadow:"akv41dx8",appearance:"dwo3fsh8",transitionDuration:"ebpj63zs",transitionProperty:"flx89l3n",transitionTimingFunction:"msbwk0y7",":hover":{boxShadow:"eb3gnj61"}}};function a(a,c){var d=a.onPress,e=a.onHoverChange,f=a.onFocusChange,g=a.ariaLabel,j=a.style;a=a.children;g={"aria-label":g,overlayDisabled:!0,xstyle:function(a){return[i.button]},children:a};a=c==null?void 0:b("bs_caml_option").some(c);a!==void 0&&(g.ref=b("bs_caml_option").valFromOption(a));e!==void 0&&(g.onHoverChange=b("bs_caml_option").valFromOption(e));f!==void 0&&(g.onFocusChange=b("bs_caml_option").valFromOption(f));d!==void 0&&(g.onPress=b("bs_caml_option").valFromOption(d));j!==void 0&&(g.style=b("bs_caml_option").valFromOption(j));return h.jsx(b("CometPressable.react"),g)}c=h.forwardRef(a);f.styles=i;f.make=c}),null);
__d("MWV2ChatHeadCloseButton.bs",["fbt","ix","CometPressable.react","TetraIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react"),k={closeButton:{position:"pmk7jnqg",top:"pixltzyo",right:"jhqr1bxo",display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",width:"odw8uiq3",height:"jnigpg78",transform:"qpbg1qsm",opacity:"b5wmifdl",transitionDuration:"bybyf9sm",transitionProperty:"pnx7fd3z",backgroundColor:"nred35xi",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv"},visible:{transform:"g3zh7qmp",opacity:"pedkr2u6"}};function a(a){var c=a.onPress,d=a.onHoverChange,e=a.hovered;return j.jsx(b("CometPressable.react"),{"aria-label":g._("Cerrar chat"),onHoverChange:d,onPress:c,xstyle:function(a){return[k.closeButton,e||a.focused?k.visible:!1]},children:j.jsx(b("TetraIcon.react"),{icon:b("fbicon")._(h("478231"),12)})})}c=a;f.styles=k;f.make=c}),null);
__d("MWV2ChatHeadFlyout.bs",["CometBadge.react","LSThreadTitle.bs","Locale","MWLSThreadIsUnread.bs","MWLSThreadSnippetForDisplay.bs","MWPTextCommon.react","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={container:{borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",borderBottomEndRadius:"uo3d90p7",borderBottomStartRadius:"l82x9zwi",boxShadow:"clwgnc31",boxSizing:"rq0escxv",display:"j83agx80",flexDirection:"cbu4d94t",maxWidth:"dlpeemhq",minWidth:"jgsskzai",position:"pmk7jnqg",end:"cypi58rs",bottom:"i09qtzwb",backgroundColor:"nred35xi",paddingStart:"h4z51re5",paddingEnd:"rv4hoivh",height:"e5d9fub0"},spacer:{flexGrow:"buofh1pr"},gradientLTR:{backgroundImage:"rvdht4aw"},gradientRTL:{backgroundImage:"hv4tdetg"},openChatArrowPointer:{borderTopEndRadius:"hcy7w5mv",bottom:"s2hgh8fk",height:"gl3lb2sf",position:"pmk7jnqg",end:"b5fwa0m2",width:"hhz5lgdu"},openChatArrowPointerShadow:{boxShadow:"clwgnc31"}},k=b("Locale").isRTL(),l=k?-45:45;function a(a){a=a.thread;var c=b("MWLSThreadSnippetForDisplay.bs").make(a.m);return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:(h||(h=b("stylex")))(j.openChatArrowPointer,j.openChatArrowPointerShadow),style:{transform:"rotate("+l+"deg)"}}),i.jsxs("div",{className:h(j.container),children:[i.jsx("div",{className:h(j.spacer)}),i.jsx(b("MWPTextCommon.react"),{color:"primary",type:"headlineEmphasized4",numberOfLines:1,children:i.jsx(b("LSThreadTitle.bs").make,{thread:a})}),i.jsx("div",{className:h(j.spacer)}),i.jsxs(b("MWPTextCommon.react"),{color:"secondary",type:"body3",numberOfLines:1,children:[b("MWLSThreadIsUnread.bs").isThreadUnread(a)?i.jsx(b("CometBadge.react"),{color:"blue"}):null,c]}),i.jsx("div",{className:h(j.spacer)})]}),i.jsx("div",{className:h(j.openChatArrowPointer,k?j.gradientRTL:j.gradientLTR),style:{transform:"rotate("+l+"deg)"}})]})}c=a;f.styles=j;f.isRTL=k;f.rotation=l;f.make=c}),null);
__d("MWV2EnsureThatChatTabExists.bs",["LS.bs","LSMailboxVerifyThreadRowExistsStoredProcedure","LSMessagingThreadTypeUtil.bs","LSTransaction.bs","MAWVerifyExistingThreadExists.bs","ReStore.bs","promiseDone","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a,c){var d=b("ReStore.bs").useHook(void 0);h.useEffect(function(){b("promiseDone")(b("LSTransaction.bs").run(d,function(d){if(b("LSMessagingThreadTypeUtil.bs").isSecure(c))return b("MAWVerifyExistingThreadExists.bs").call(d,a);else return b("LSMailboxVerifyThreadRowExistsStoredProcedure")(a,c,b("LS.bs").make(d))},"readWrite"),void 0,void 0)},[d,JSON.stringify(a),JSON.stringify(c)])}f.useHook=a}),null);
__d("MWV2ChatHead.bs",["fbt","CometContextualLayer.react","MWChatStateActions.bs","MWChatStateV2.bs","MWLSActor.bs","MWThreadPicture.bs","MWV2ChatHeadButton.bs","MWV2ChatHeadCloseButton.bs","MWV2ChatHeadFlyout.bs","MWV2EnsureThatChatTabExists.bs","ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","SortedAsyncIterable.bs","bs_caml","bs_curry","gkx","intlList","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={imageWrapper:{height:"m7zwrmfr"}};function l(a,c){var d=b("MWLSActor.bs").useActor(void 0);a=c.filter(function(a){return b("bs_caml").i64_neq(a[0].b,d)}).sort(function(a,b){b=b[1];a=a[1];if(a!==void 0)if(b!==void 0)return b.o-a.o;else return 0;else return 0}).map(function(a){var d=a[0].e;if(d!==void 0&&b("gkx")("1846003"))return d;d=a[1];if(d===void 0)return g._("Usuario de Facebook").toString();a=d.p;if(a!==void 0&&c.length>2)return a;else return d.h});a=b("intlList")(a,b("intlList").CONJUNCTIONS.AND,b("intlList").DELIMITERS.COMMA);return g._("Abrir chat con {chat participants}",[g._param("chat participants",a)])}function m(a){var c=a.thread,d=a.tab,e=a.style,f=a.onHoverChange,g=a.onFocusChange,h=b("ReStore.bs").useHook(void 0),m=b("MWChatStateV2.bs").useDispatch(void 0);a=function(a){return b("bs_curry")._1(m,b("MWChatStateActions.bs").maximizeTab(Date.now(),d.tabId))};var n=j.useState(function(){return!1}),o=n[1];n=n[0];var p=j.useState(function(){return!1}),q=p[1];p=function(a){return b("bs_curry")._1(m,b("MWChatStateActions.bs").closeTab(Date.now(),d.tabId))};var r=b("ReQLSubscription.bs").useArray(j.useMemo(function(){return b("ReQL.bs").leftJoin(b("ReQL.bs").getKeyRange(b("ReQLTable").table(h,"participants").asc,{hd:c.a,tl:0}),b("ReQLTable").table(h,"contacts").asc)},[h,JSON.stringify(c.a)])),s=l(c,r),t=j.useRef(null);return j.jsxs(b("MWV2ChatHeadButton.bs").make,{onPress:a,onHoverChange:function(a){b("bs_curry")._1(o,function(b){return a});return b("bs_curry")._1(f,a)},onFocusChange:function(a){b("bs_curry")._1(q,function(b){return a});return b("bs_curry")._1(g,a)},ariaLabel:s,style:e,children:[j.jsxs("div",{className:(i||(i=b("stylex")))(k.imageWrapper),ref:t,children:[j.jsx(b("MWThreadPicture.bs").make,{photoSize:"s_48",badgeSize:8,thread:c}),j.jsx(b("MWV2ChatHeadCloseButton.bs").make,{onPress:p,onHoverChange:function(a){return b("bs_curry")._1(o,function(b){return a})},hovered:n})]}),n?j.jsx(b("CometContextualLayer.react"),{contextRef:t,children:j.jsx(b("MWV2ChatHeadFlyout.bs").make,{thread:c,participantsAndContacts:r})}):null]})}c={make:m};function a(a){var c=a.threadKeyDescriptor,d=a.tab,e=a.style,f=a.onHoverChange;a=a.onFocusChange;var g=b("ReStore.bs").useHook(void 0),h=c.clientThreadKey,i=c.threadKey;b("MWV2EnsureThatChatTabExists.bs").useHook(i,c.threadType);c=b("ReQLSubscription.bs").useFirst(j.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(g,"threads").asc,{hd:i,tl:0})},[g,JSON.stringify(i)]));var k=b("ReQLSubscription.bs").useFirst(j.useMemo(function(){if(h!==void 0)return b("ReQL.bs").getKeyRange(b("ReQLTable").table(g,"threads").index("clientThreadKey").asc,{hd:h,tl:0});else return b("SortedAsyncIterable.bs").empty(void 0)},[g,JSON.stringify(h)]));c=c!==void 0?c:k!==void 0?k:void 0;if(c!==void 0)return j.jsx(m,{thread:c,tab:d,style:e,onHoverChange:f,onFocusChange:a});else return null}d=a;f.styles=k;f.useChatHeadAriaLabel=l;f.Impl=c;f.make=d}),null);
__d("MWV2ChatOptionsHead.bs",["fbt","ix","CometDeferredPopoverTrigger.react","CometPressable.react","MWPTooltip.react","TetraIcon.react","bs_curry","fbicon","react","requireDeferred","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react"),l={headArea:{height:"tv7at329",width:"thwo4zme",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",position:"pmk7jnqg",start:"feor4xix"},hoverTarget:{alignItems:"bp9cbjyn",backgroundColor:"g5ia77u1",display:"j83agx80",height:"e5d9fub0",justifyContent:"taijpn5t",marginStart:"kb7jmfru",marginTop:"o7xrwllt",width:"etr7akla"},head:{alignItems:"bp9cbjyn",display:"j83agx80",justifyContent:"taijpn5t",height:"tv7at329",width:"thwo4zme",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",backgroundColor:"ovq5dppa",boxShadow:"akv41dx8",":hover":{boxShadow:"eb3gnj61"},opacity:"b5wmifdl",transform:"qpbg1qsm",transitionDuration:"bybyf9sm",transitionProperty:"pnx7fd3z"},headVisible:{opacity:"pedkr2u6",transform:"g3zh7qmp"}},m=g._("Opciones");function a(a){var c=a.isVisible,d=a.openTabCount,e=a.style;a=k.useState(function(){return!1});var f=a[1],g=a[0];a=k.useState(function(){return!1});var i=a[1],n=a[0];a=k.useState(function(){return!1});var o=a[1],p=a[0];return k.jsx(b("CometDeferredPopoverTrigger.react"),{onVisibilityChange:function(a){return b("bs_curry")._1(o,function(b){return a})},popoverResource:b("requireDeferred")("MWV2ChatOptionsHeadPopover.react").__setRef("MWV2ChatOptionsHead.bs"),popoverProps:{hasOpenTabs:d>0},align:"end",position:"above",children:function(a,d){return k.jsx("div",{className:(j||(j=b("stylex")))(l.headArea),style:e,children:k.jsx("div",{className:j(l.hoverTarget),onMouseEnter:function(a){return b("bs_curry")._1(f,function(a){return!0})},onMouseLeave:function(a){return b("bs_curry")._1(f,function(a){return!1})},"data-testid":"mwchat-options-head-hover-target",children:k.jsx(b("CometPressable.react"),{label:m,ref:a,testid:"mwchat-options-head",onFocusChange:function(a){return b("bs_curry")._1(i,function(b){return a})},onPress:function(a){return b("bs_curry")._1(d,void 0)},xstyle:function(a){return[l.head,c||g||n||p?l.headVisible:!1]},children:k.jsx(b("MWPTooltip.react"),{tooltip:m,align:"middle",position:"start",children:k.jsx(b("TetraIcon.react"),{icon:b("fbicon")._(h("484387"),20)})})})})})}})}c=36;d=10;e=a;f.width=c;f.marginBottom=d;f.styles=l;f.make=e}),null);
__d("MWChatHeadPicture.bs",["ix","BaseGlimmer.react","MWChatFacepile.bs","MWChatProfile.bs","TetraIcon.react","fbicon","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react");c="pym96oi7-B";var k={withBackground:{backgroundColor:"nred35xi"},chatHeadIntroAnim:{animationDirection:"afxn4irw",animationDuration:"il7rb8sk",animationFillMode:"j1l0snac",animationIterationCount:"h9pa7xm5",animationName:"bnyrfe0q",animationTimingFunction:"mqussk9c"},dropShadow:{borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",boxShadow:"akv41dx8",":hover":{boxShadow:"eb3gnj61"}},headGlimmer:{borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",position:"l9j0dhe7",height:"m7zwrmfr",width:"tmrshh9y"},withOverflowBackground:{alignItems:"bp9cbjyn",display:"j83agx80",justifyContent:"taijpn5t",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",height:"m7zwrmfr",width:"tmrshh9y",backgroundColor:"nred35xi"}};function a(a){var c=a.images,d=a.children;a=a.noFacepile;a=a!==void 0?a:!1;var e=c.length;if(e!==1)if(e!==0)if(a)return j.jsxs("div",{className:(i||(i=b("stylex")))(k.dropShadow,k.withOverflowBackground),children:[j.jsx(b("TetraIcon.react"),{icon:b("fbicon")._(g("481920"),24)}),d]});else return j.jsx(b("MWChatFacepile.bs").make,{borderBetweenImages:!1,children:d,firstParticipantURI:c[0],secondParticipantURI:c[1],shadow:!0,size:48});else return j.jsx("div",{className:(i||(i=b("stylex")))(k.withBackground,k.headGlimmer),children:j.jsx(b("BaseGlimmer.react"),{theme:"dark",index:1,children:d})});e=c[0];return j.jsx("div",{className:(i||(i=b("stylex")))(k.dropShadow,k.chatHeadIntroAnim),children:j.jsx(b("MWChatProfile.bs").make,{size:48,src:e,children:d})})}d=a;f.chatheadAppear=c;f.styles=k;f.make=d}),null);
__d("MWV2ChatOverflowHead.bs",["fbt","ix","BaseGlimmer.react","CometContextualLayer.react","CometListCellGlimmer.react","CometMenu.react","CometMenuItemBase.react","CometTextWithEntities.react","LSThreadTitle.bs","MWChatHeadPicture.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWChatTextTransform.bs","MWFacepileGetContactsToShow.bs","MWLSActor.bs","MWPTextCommon.react","MWV2ChatHeadButton.bs","MWV2EnsureThatChatTabExists.bs","ReQL.bs","ReQLSubscription.bs","ReQLSuspense.bs","ReQLTable","ReStore.bs","TetraIcon.react","bs_belt_Option","bs_caml","bs_caml_array","bs_curry","fbicon","react","recoverableViolation","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react");function l(a){var c=b("MWLSActor.bs").useActor(void 0),d=b("ReStore.bs").useHook(void 0);return b("bs_belt_Option").getWithDefault(b("ReQLSubscription.bs").useFirst(k.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"threads").asc,{hd:a,tl:0}),function(e){var f;return b("ReQLSuspense.bs").toArray((f=b("ReQL.bs")).filter(f.bounds(f.take(f.getKeyRange(b("ReQLTable").table(d,"messages").desc,{hd:a,tl:0}),20),{NAME:"greaterThan",VAL:{hd:e.j,tl:0}}),function(a){return b("bs_caml").i64_neq(a.h,c)})).length})},[d,JSON.stringify(c),JSON.stringify(a)])),0)}function m(a){a=a.thread;var c=l(a.a);return k.jsxs(k.Fragment,{children:[k.jsx(b("LSThreadTitle.bs").make,{thread:a}),k.jsx(b("CometTextWithEntities.react"),{text:g._("({unread message count})",[g._param("unread message count",String(c))]),transforms:b("MWChatTextTransform.bs").epdTextTransforms})]})}c={useUnreadCount:l,make:m};var n={auxWrapper:{display:"j83agx80",visibility:"kr9hpln1"},auxVisible:{visibility:"n1dktuyu"},glimmer:{height:"tv7at329",minWidth:"gvsi1rru"}};function o(a){var c=a.isItemHovered,d=a.setItemIsHovered;a=a.closeTab;return k.jsx("div",{className:(j||(j=b("stylex")))(n.auxWrapper,c?n.auxVisible:!1),children:k.jsx(b("TetraIcon.react"),{"aria-label":g._("Cerrar pesta\u00f1a"),icon:b("fbicon")._(h("478231"),12),onPress:a,onHoverIn:function(a){return b("bs_curry")._1(d,function(a){return!0})},onHoverOut:function(a){return b("bs_curry")._1(d,function(a){return!1})},color:"secondary"})})}d={styles:n,make:o};var p={glimmer:{height:"tv7at329",minWidth:"gvsi1rru"}};function q(a){var c=a.descriptor,d=a.tab,e=a.setParentHoverState,f=b("ReStore.bs").useHook(void 0);a=b("ReQLSubscription.bs").useFirst(k.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(f,"threads").asc,{hd:c.threadKey,tl:0})},[f,JSON.stringify(c.threadKey)]));var g=b("MWChatStateV2.bs").useDispatch(void 0);b("MWV2EnsureThatChatTabExists.bs").useHook(c.threadKey,c.threadType);var h=k.useState(function(){return!1}),i=h[1];if(a!==void 0)return k.jsx(b("CometMenuItemBase.react"),{primaryText:k.jsx(m,{thread:a}),onClick:function(a){b("bs_curry")._1(e,function(a){return!1});return b("bs_curry")._1(g,b("MWChatStateActions.bs").maximizeTab(Date.now(),d.tabId))},onHoverIn:function(a){return b("bs_curry")._1(i,function(a){return!0})},onHoverOut:function(a){return b("bs_curry")._1(i,function(a){return!1})},aux:k.jsx(o,{tab:d,isItemHovered:h[0],setItemIsHovered:i,closeTab:function(a){return b("bs_curry")._1(g,b("MWChatStateActions.bs").closeTab(Date.now(),d.tabId))}})});else return k.jsx("div",{className:(j||(j=b("stylex")))(p.glimmer),children:k.jsx(b("CometListCellGlimmer.react"),{imageStyle:"none"})})}e={styles:p,make:q};function r(a){var c=a.excessHeads,d=a.setParentHoverState;return k.jsx(b("CometMenu.react"),{children:c.map(function(a){var c=a.tabType;if(c.TAG!==0)return k.jsx(q,{descriptor:c._0,tab:a,setParentHoverState:d},String(a.tabId));b("recoverableViolation")("Compose tab shouldn't be part of excess tabs","messenger_web_product");return null}),size:"full",truncate:!0,withArrow:!0})}var s={make:r},t={overflowCount:{position:"pmk7jnqg",width:"tmrshh9y",height:"m7zwrmfr",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",top:"kr520xx4",display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",backgroundColor:"d6rk862h"}};function u(a){var c=a.thread;a=a.count;c=b("MWFacepileGetContactsToShow.bs").useHook(c).map(function(a){return a.b});return k.jsx(b("MWChatHeadPicture.bs").make,{images:c,children:k.jsx("div",{className:(j||(j=b("stylex")))(t.overflowCount),children:k.jsx(b("MWPTextCommon.react"),{color:"white",type:"bodyLink3",children:g._("+{chat count}",[g._param("chat count",String(a))])})}),noFacepile:!0})}var v={styles:t,make:u},w={glimmer:{borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",width:"k4urcfbm",height:"datstx6m"}};function x(a){var c=a.tab;a=a.count;b("MWV2EnsureThatChatTabExists.bs").useHook(c.threadKey,c.threadType);var d=b("ReStore.bs").useHook(void 0),e=b("ReQLSubscription.bs").useFirst(k.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"threads").asc,{hd:c.threadKey,tl:0})},[d,JSON.stringify(c.threadKey)]));if(e!==void 0)return k.jsx(u,{thread:e,count:a});else return k.jsx(b("BaseGlimmer.react"),{theme:"dark",index:1,xstyle:w.glimmer})}var y={styles:w,make:x};function a(a){var c=a.style,d=a.excessHeads,e=a.onHoverChange;a=k.useState(function(){return!1});var f=a[1],h=d.length,i=k.useRef(null);if(h<=0)return null;var j=b("bs_caml_array").get(d,0).tabType,l;j.TAG===0?(b("recoverableViolation")("Compose tab shouldn't be part of excess tabs","messenger_web_product"),l=null):l=k.jsx(x,{tab:j._0,count:h});return k.jsx(b("MWV2ChatHeadButton.bs").make,{ariaLabel:g._("+{chat count} chats adicionales",[g._param("chat count",String(h))]),style:c,children:k.jsxs("div",{onMouseEnter:function(a){b("bs_curry")._1(f,function(a){return!0});return b("bs_curry")._1(e,!0)},onMouseLeave:function(a){b("bs_curry")._1(f,function(a){return!1});return b("bs_curry")._1(e,!1)},children:[l,a[0]?k.jsx(b("CometContextualLayer.react"),{align:"middle",position:"end",contextRef:i,children:k.jsx(r,{excessHeads:d,setParentHoverState:f})}):null]}),ref:i})}a=a;f.MenuItemTitle=c;f.CloseButton=d;f.MenuItem=e;f.HoverMenu=s;f.Facepile=v;f.FirstThreadPicture=y;f.make=a}),null);
__d("MWV2ComposeHead.bs",["fbt","ix","CometPressable.react","CometTintedIcon.react","MWChatStateV2.bs","MWPTooltip.react","bs_curry","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react"),k={button:{position:"l9j0dhe7",display:"pq6dq46d",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",width:"tmrshh9y",height:"m7zwrmfr",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",backgroundColor:"ovq5dppa",boxShadow:"akv41dx8",appearance:"dwo3fsh8",":hover":{boxShadow:"eb3gnj61"}}};function a(a){var c=a.onHoverChange;a=a.onFocusChange;var d=b("MWChatStateV2.bs").useDispatch(void 0),e=function(a){var c=Date.now();a=function(a){return{tabId:a.tabId,tabType:a.tabType,openWatermark:c,minimiseWatermark:a.minimiseWatermark,clientForcedMinimiseWatermark:a.clientForcedMinimiseWatermark,closeWatermark:a.closeWatermark}};var e=function(a){var b=a.openWatermark<a.closeWatermark;if(b)return{tabId:a.tabId,tabType:a.tabType,openWatermark:c,minimiseWatermark:a.minimiseWatermark,clientForcedMinimiseWatermark:a.clientForcedMinimiseWatermark,closeWatermark:a.closeWatermark};else return{tabId:a.tabId,tabType:a.tabType,openWatermark:a.openWatermark,minimiseWatermark:a.minimiseWatermark,clientForcedMinimiseWatermark:a.clientForcedMinimiseWatermark,closeWatermark:c}};return b("bs_curry")._1(d,[{TAG:3,_0:{TAG:0,_0:[]},_1:{shouldFocus:!0},_2:e,_3:a}])},f=g._("Nuevo mensaje");return j.jsx(b("MWPTooltip.react"),{tooltip:f.toString(),align:"middle",position:"start",children:j.jsx(b("CometPressable.react"),{"aria-label":f,testid:"mwchat-compose-head",onHoverChange:c,onFocusChange:a,onPress:e,xstyle:function(a){return[k.button]},children:j.jsx(b("CometTintedIcon.react"),{color:"primary",icon:b("fbicon")._(h("507172"),20)})})})}c=a;f.styles=k;f.make=c}),null);
__d("MWV2ChatHeads.bs",["CometErrorBoundary.re","MWChatStateV2.bs","MWChatUIStateV2.bs","MWV2ChatHead.bs","MWV2ChatOptionsHead.bs","MWV2ChatOverflowHead.bs","MWV2ComposeHead.bs","bs_curry","bs_int64","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{position:"pmk7jnqg",bottom:"lfi1tu6t",end:"cypi58rs",width:"tmrshh9y",zIndex:"tkr6xdv7"}};function k(a){return{transform:"translateY(-"+String(Math.imul(a,58))+"px)"}}function l(a){return{transform:"translateY(-"+String(Math.imul(a,58)-12|0)+"px)"}}function a(a){a=b("MWChatStateV2.bs").useState(function(a){return a.tabs}).tabs;var c=b("MWChatStateV2.bs").useState(function(a){return a.focusedTabId}).focusedTabId;c=b("MWChatUIStateV2.bs").getTabs(a,c,b("MWChatUIStateV2.bs").maxTabs);a=b("MWChatUIStateV2.bs").getHeads(c[1],a,5);var d=a[1];a=a[0];c=c[0].length;var e=a.length,f=d.length>0?1:0,g=i.useState(function(){return!1}),m=g[1],n=d.length;if(n!==1)n=n!==0?i.jsx(b("MWV2ChatOverflowHead.bs").make,{style:k(1),excessHeads:d,onHoverChange:function(a){return b("bs_curry")._1(m,function(b){return a})}}):null;else{d=d[0];var o=d.tabType;if(o.TAG===0)n=null;else{o=o._0;n=i.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return null},children:i.jsx(b("MWV2ChatHead.bs").make,{threadKeyDescriptor:o,tab:d,style:k(1),onHoverChange:function(a){return b("bs_curry")._1(m,function(b){return a})},onFocusChange:function(a){return b("bs_curry")._1(m,function(b){return a})}})},b("bs_int64").to_string(o.threadKey))}}return i.jsxs("div",{className:(h||(h=b("stylex")))(j.root),children:[c>0||e>0?i.jsx(b("MWV2ChatOptionsHead.bs").make,{isVisible:g[0],openTabCount:c,style:l((e+f|0)+1|0)}):null,a.reverse().map(function(c,d){var a=c.tabType;if(a.TAG===0)return null;a=a._0;d=(d+f|0)+1|0;return i.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return null},children:i.jsx(b("MWV2ChatHead.bs").make,{threadKeyDescriptor:a,tab:c,style:k(d),onHoverChange:function(a){return b("bs_curry")._1(m,function(b){return a})},onFocusChange:function(a){return b("bs_curry")._1(m,function(b){return a})}})},b("bs_int64").to_string(a.threadKey))}),n,i.jsx(b("MWV2ComposeHead.bs").make,{onHoverChange:function(a){return b("bs_curry")._1(m,function(b){return a})},onFocusChange:function(a){return b("bs_curry")._1(m,function(b){return a})}})]})}c=a;f.styles=j;f.make=c}),null);
__d("MWV2ComposerReplyView.bs",["fbt","ix","CometErrorBoundary.re","LSContactGenderToGenderConst.bs","LsFalcoEventEntryPoint.bs","LsReplyRenderedFalcoEvent","MWChatReplyText.bs","MWLSActor.bs","MWPTextCommon.react","MWV2ReplyContext.bs","MessagingAttachmentType.bs","ReQL.bs","ReQLSuspense.bs","ReQLTable","ReStore.bs","TetraIcon.react","TetraTextPairing.react","bs_belt_Option","bs_caml","bs_caml_obj","bs_curry","bs_int64","fbicon","getFBTSafeGenderFromGenderConst","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react"),l={container:{borderTop:"l6v480f0",backgroundColor:"nred35xi",paddingEnd:"oj5qckz4",paddingStart:"lb8aey2d",paddingTop:"jktsbyx5",paddingBottom:"pby63qed",display:"j83agx80",justifyContent:"i1fnvgqd",alignItems:"ll8tlv6m"},message:{marginEnd:"o3lre8g0"}};function m(a){var c=a.message,d=b("ReStore.bs").useHook(void 0);a=b("MWLSActor.bs").useActor(void 0);a=b("bs_caml").i64_eq(c.h,a);var e=b("ReQLSuspense.bs").first(k.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"contacts").asc,{hd:c.h,tl:0})},[d,JSON.stringify(c.h)])),f=b("ReQLSuspense.bs").first(k.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"attachments").asc,{hd:c.a,tl:{hd:c.e,tl:0}})},[d,c.e,JSON.stringify(c.a)]));k.useEffect(function(){b("LsReplyRenderedFalcoEvent").log(function(){return{funnel:{entry_point:b("LsFalcoEventEntryPoint.bs").messageActions}}})},[]);f=c.m?g._("Mensaje eliminado"):c.g!==void 0&&b("bs_caml_obj").caml_notequal(c.g,"")?k.jsx(b("MWChatReplyText.bs").make,{text:b("bs_belt_Option").getWithDefault(c.g,g._("Mensaje"))}):f!==void 0?b("bs_caml").i64_eq(f.f,b("MessagingAttachmentType.bs").image)?g._("Imagen"):b("bs_caml").i64_eq(f.f,b("MessagingAttachmentType.bs").sticker)?g._("Sticker"):b("bs_caml").i64_eq(f.f,b("MessagingAttachmentType.bs").video)?g._("Video"):b("bs_caml").i64_eq(f.f,b("MessagingAttachmentType.bs").animatedImage)?g._("GIF"):g._("Archivo adjunto"):g._("Mensaje");if(a)a=g._("Respondiendo tu propio mensaje");else if(e!==void 0){var h=e.p;a=g._({"*":"Respondiendo a {name}"},[g._name("name","{name}",b("getFBTSafeGenderFromGenderConst")(b("LSContactGenderToGenderConst.bs").make(e.I))),g._param("name",k.jsx(b("MWPTextCommon.react"),{type:"bodyLink4",children:h!==void 0?h:e.h}))])}else a=g._("Respondiendo a {Placeholder for an unknown user}",[g._param("Placeholder for an unknown user","Facebook User")]);return k.jsx(b("TetraTextPairing.react"),{body:k.jsx(k.Fragment,{children:k.jsx(b("MWPTextCommon.react"),{type:"body4",children:a})}),meta:f,level:3,style:l.message})}d={make:m};function a(a){var c=a.message;a=k.useContext(b("MWV2ReplyContext.bs").context);var d=a.clearReply;return k.jsxs("div",{className:(j||(j=b("stylex")))(l.container),children:[k.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return k.jsx(b("MWPTextCommon.react"),{type:"body4",children:g._("Respondiendo al mensaje")})},children:k.jsx(m,{message:c})}),k.jsx(b("TetraIcon.react"),{"aria-label":g._("Eliminar"),icon:b("fbicon")._(h("478231"),12),onPress:function(a){return b("bs_curry")._2(d,c.a,!0)},color:"primary"})]})}var n=k.memo(a);e={make:n};function c(a){var c=a.thread,d=a.messageId,e=a.messageTimestamp,f=b("ReStore.bs").useHook(void 0);a=b("ReQLSuspense.bs").first(k.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(f,"messages").asc,{hd:c.a,tl:{hd:e,tl:{hd:d,tl:0}}})},[f,b("bs_int64").to_string(c.a),d,JSON.stringify(e)]));if(a!==void 0)return k.jsx(n,{message:a});else return null}a=c;f.styles=l;f.Inner=d;f.Container=e;f.make=a}),null);
__d("MWV2OpenMediaStaging.bs",["ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","bs_caml","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("ReStore.bs").useHook(void 0);return b("ReQLSubscription.bs").useArray(h.useMemo(function(){return b("ReQL.bs").filter(b("ReQLTable").table(c,"media_staging").asc,function(c){if(c.o)return!1;else return b("bs_caml").i64_eq(c.h,a.a)})},[c,JSON.stringify(a.a)]))}f.useMediaStaging=a}),null);
__d("MWV2OpenTypingState.bs",["LS.bs","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSTransaction.bs","LSTypingSendTypingIndicatorStoredProcedure","MWChatViewerChatVisibilityHook","MWLSActor.bs","MessagingThreadType.bs","Promise","ReQL.bs","ReQLSuspense.bs","ReQLTable","ReStore.bs","bs_belt_Option","bs_caml","promiseDone","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c,d,e){if(b("bs_caml").i64_eq(d,b("MessagingThreadType.bs").oneToOne)&&b("bs_caml").i64_neq(c,e)){return(d=b("ReQL.bs")).first(d.map(d.filter(d.getKeyRange(b("ReQLTable").table(a,"participants").asc,{hd:c,tl:0}),function(a){return b("bs_caml").i64_neq(a.b,e)}),function(c){return b("bs_belt_Option").mapWithDefault(b("ReQLSuspense.bs").first(b("ReQL.bs").getKeyRange(b("ReQLTable").table(a,"contacts").asc,{hd:c.b,tl:0})),!1,function(a){return b("bs_caml").i64_eq(a.n,b("LSContactBlockedByViewerStatus.bs").unblocked)})})).then(function(a){return b("Promise").resolve(b("bs_belt_Option").getWithDefault(a,!1))})}else return b("Promise").resolve(!0)}function a(a){var c=b("ReStore.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0),e=b("MWChatViewerChatVisibilityHook")();return h.useCallback(function(f){if(!(b("bs_caml").i64_ge(a.Z,b("LSAuthorityLevel.bs").authoritative)&&e))return;var g=i(c,a.a,a.c,d).then(function(d){if(d)return b("LSTransaction.bs").run(c,function(c){return b("LSTypingSendTypingIndicatorStoredProcedure")(a.a,b("bs_caml").i64_eq(a.c,b("MessagingThreadType.bs").group),f,b("LS.bs").make(c))},"readWrite");else return b("Promise").resolve(void 0)});b("promiseDone")(g,void 0,void 0)},[c,JSON.stringify(a.Z),JSON.stringify(a.a),JSON.stringify(a.c),e,d])}f.useOnTypingStateChanged=a}),null);
__d("MWV2OpenComposerUtils.bs",["LSMailboxType.bs","LSMediaSendRemoveMediaSendJobsStoredProcedure","LSMediaSendResumeMediaSendJobStoredProcedure","LSTransaction.bs","MWConsole","MWV2ComposerMediaUploadUtil.bs","Promise","ReQLTable","bs_caml_int64","bs_curry"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("LSTransaction.bs").run(a,function(a){return b("Promise").all(c.map(function(c){var e=c[0];return b("ReQLTable").table(a,"media_staging").add({a:c[1],b:b("LSMailboxType.bs").messenger,c:b("MWV2ComposerMediaUploadUtil.bs").getAttachmentType(e),d:e.type,e:e.name,f:b("bs_caml_int64").of_int32(e.size),g:void 0,h:d,i:void 0,j:URL.createObjectURL(e),k:void 0,l:void 0,m:void 0,n:0,o:!1,p:!1})}))},"readWrite")}function c(a,c){return b("ReQLTable").table(a,"media_staging").get({hd:c,tl:0}).then(function(d){if(d===void 0)return b("Promise").resolve(void 0);d=d.j;d!==void 0&&URL.revokeObjectURL(d);return b("ReQLTable").table(a,"media_staging")["delete"]({hd:c,tl:0})})}function d(a,c,d){return b("ReQLTable").table(a,"media_staging").get({hd:c,tl:0}).then(function(c){if(c!==void 0)return b("ReQLTable").table(a,"media_staging").put(b("bs_curry")._1(d,c));else return b("Promise").resolve(void 0)})}function e(a,c,d,e,f){return b("ReQLTable").table(a,"attachments").get({hd:c,tl:{hd:d,tl:{hd:e,tl:0}}}).then(function(g){if(g!==void 0)return b("ReQLTable").table(a,"attachments").upsert({hd:c,tl:{hd:d,tl:{hd:e,tl:0}}},b("bs_curry")._1(f,g));else return b("Promise").resolve(void 0)})}function g(a,c){return b("LSMediaSendResumeMediaSendJobStoredProcedure")(c,b("bs_caml_int64").zero,a).then(function(d){d=d[0];if(d)return b("LSMediaSendRemoveMediaSendJobsStoredProcedure")(c,a);else return b("Promise").resolve(void 0)})}f.insertMediaStaging=a;f.deleteMediaStaging=c;f.updateMediaStaging=d;f.updateAttachment=e;f.resumeSendJob=g}),null);
__d("MWV2SendOpenMessage.bs",["LS.bs","LSAuthorityLevel.bs","LSDict","LSMailboxLocalApplyOptimisticMessageWithAttachmentsStoredProcedure","LSMailboxOptimisticSendMessageStoredProcedure","LSMailboxType.bs","LSMediaSendInsertNewMediaSendStoredProcedure","LSMediaSendMarkSubJobCompletedV2StoredProcedure","LSMessageReplySourceType.bs","LSMessageReplySourceTypeV2.bs","LSMessagingInitiatingSourceHook.bs","LSMessagingThreadAttributionType.bs","LSTransaction.bs","LSVec.bs","MWConsole","MWLSActor.bs","MWLSLogSend.bs","MWV2ComposerMediaUploadUtil.bs","MWV2OpenComposerUtils.bs","MWV2ReplyContext.bs","MWVersion.bs","OfflineThreadingId.bs","Promise","ReQL.bs","ReQLTable","ReStore.bs","bs_caml","bs_caml_int64","bs_caml_obj","bs_caml_option","bs_curry","bs_int64","promiseDone","qpl","react","useCometInteractionTracing"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a,c){var d=b("ReStore.bs").useHook(void 0),e=b("MWLSActor.bs").useActor(void 0),f=h.useContext(b("MWV2ReplyContext.bs").context),g=f.clearReply,i=f.reply,j=b("LSMessagingInitiatingSourceHook.bs").useHook(void 0),k=b("useCometInteractionTracing")(b("qpl")._(30605384,"573"),"fast","INTERACTION");return h.useMemo(function(){return function(f,h,l,m,n,o,p,q,r,s){return k(function(k){var t=b("LSTransaction.bs").run(d,function(c){var g=b("LS.bs").make(c);if(q===void 0)return b("ReQL.bs").toArray(b("ReQL.bs").filter(b("ReQLTable").table(c,"media_staging").asc,function(c){if(c.o)return!1;else return b("bs_caml").i64_eq(c.h,a.a)})).then(function(d){var q=h!==void 0?b("bs_caml_option").some(b("LSDict").fromObject({mention_offsets:h.map(function(a){return String(a.offset)}).join(","),mention_lengths:h.map(function(a){return String(a.length)}).join(","),mention_ids:h.map(function(a){return a.id}).join(","),mention_types:h.length!==0?h.map(function(a){return a.type}).join(","):void 0})):void 0,t=f!==void 0?f!=="":!1,v=l!==void 0,w=o!==void 0;t=t||v||w?b("LSMailboxOptimisticSendMessageStoredProcedure")(e,a.a,a.c,b("LSMailboxType.bs").messenger,f!==void 0?b("bs_caml_option").valFromOption(f):void 0,void 0,void 0,l!==void 0?b("bs_caml_option").valFromOption(l):void 0,m!==void 0?b("bs_caml_option").valFromOption(m):void 0,o!==void 0?b("bs_caml_option").valFromOption(o):void 0,n!==void 0?b("bs_caml_option").valFromOption(n):void 0,b("LSMessagingThreadAttributionType.bs").unknown,void 0,r!==void 0?b("bs_caml_option").valFromOption(r):void 0,b("bs_caml_option").option_get(i!==void 0?i.messageId:void 0),b("bs_caml_option").option_get(i!==void 0?b("LSMessageReplySourceType.bs").message:void 0),b("bs_caml_option").option_get(i!==void 0?b("LSMessageReplySourceTypeV2.bs").message:void 0),q!==void 0?b("bs_caml_option").valFromOption(q):void 0,b("bs_caml").i64_ge(a.Z,b("LSAuthorityLevel.bs").authoritative),!1,p!==void 0?b("bs_caml_option").valFromOption(p):void 0,void 0,void 0,g).then(function(a){b("MWLSLogSend.bs").logSentWithHeroInteraction(k,a[0],j,i!==void 0,b("MWVersion.bs").v2);return b("Promise").resolve(void 0)}):b("Promise").resolve(void 0);if(d.length===0)return t.then(function(a){return b("Promise").resolve(void 0)});else return t.then(function(f){return b("Promise").all(b("MWV2ComposerMediaUploadUtil.bs").partition(d.map(b("MWV2ComposerMediaUploadUtil.bs").getAttachment)).map(function(f,h){return b("LSMailboxLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(e,a.a,a.c,void 0,void 0,void 0,void 0,b("bs_caml_option").option_get(i!==void 0?i.messageId:void 0),b("bs_caml_option").option_get(i!==void 0?b("LSMessageReplySourceType.bs").message:void 0),b("bs_caml_option").option_get(i!==void 0?b("LSMessageReplySourceTypeV2.bs").message:void 0),b("LSVec.bs").make(f.map(function(a){return b("LSDict").fromObject(a)})),g).then(function(e){var h=e[0];return b("Promise").all(f.map(function(e,f){return b("LSMediaSendInsertNewMediaSendStoredProcedure")(e.attachment_fbid,h,b("bs_caml_int64").of_int32(f),e.attachment_type,!1,!1,!1,!1,g).then(function(f){f=d.find(function(a){return b("bs_caml_obj").caml_equal(a.a,e.offline_attachment_id)});if(f!==void 0){var i=f.g;if(i!==void 0)return b("LSMediaSendMarkSubJobCompletedV2StoredProcedure")(e.attachment_fbid,i,void 0,void 0,void 0,g).then(function(a){return b("MWV2OpenComposerUtils.bs").deleteMediaStaging(c,e.attachment_fbid)}).then(function(d){return b("MWV2OpenComposerUtils.bs").updateAttachment(c,a.a,h,e.attachment_fbid,function(a){a=b("bs_caml_obj").caml_obj_dup(a);a.e=b("bs_int64").to_string(i);return a})})}return b("MWV2OpenComposerUtils.bs").updateMediaStaging(c,e.attachment_fbid,function(a){return{a:a.a,b:a.b,c:a.c,d:a.d,e:a.e,f:a.f,g:a.g,h:a.h,i:a.i,j:a.j,k:a.k,l:a.l,m:a.m,n:a.n,o:!0,p:a.p}})})})).then(function(a){return b("MWV2OpenComposerUtils.bs").resumeSendJob(g,h)})})})).then(function(a){return b("Promise").resolve(void 0)})})});var t=b("OfflineThreadingId.bs").make(void 0),u=b("MWV2ComposerMediaUploadUtil.bs").getAudioAttachment(t,q.file,q.duration);return b("LSMailboxLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(e,a.a,a.c,void 0,void 0,void 0,void 0,b("bs_caml_option").option_get(i!==void 0?i.messageId:void 0),b("bs_caml_option").option_get(i!==void 0?b("LSMessageReplySourceType.bs").message:void 0),b("bs_caml_option").option_get(i!==void 0?b("LSMessageReplySourceTypeV2.bs").message:void 0),b("LSVec.bs").make([b("LSDict").fromObject(u)]),g).then(function(a){var d=a[0],c=u.attachment_fbid;return b("LSMediaSendInsertNewMediaSendStoredProcedure")(c,d,b("bs_caml_int64").zero,u.attachment_type,!1,!1,!1,!1,g).then(function(a){return b("Promise").resolve([d,c])})}).then(function(a){var c=a[1],e=a[0];a=function(a,f){b("LSTransaction.bs").run(d,function(a){var d=b("LS.bs").make(a);return b("LSMediaSendMarkSubJobCompletedV2StoredProcedure")(c,b("bs_caml_int64").of_float(f),void 0,void 0,void 0,d).then(function(a){return b("MWV2OpenComposerUtils.bs").resumeSendJob(d,e)})},"readWrite")};b("MWV2ComposerMediaUploadUtil.bs").startUpload(void 0,a,void 0,!0,[q.file],[c]);return b("Promise").resolve(void 0)})},"readWrite").then(function(d){b("bs_curry")._1(c,void 0);b("bs_curry")._2(g,a.a,!1);return b("Promise").resolve(void 0)});b("promiseDone")(t,void 0,void 0)})}},[b("bs_int64").to_string(a.a),i,g,c,JSON.stringify(a.Z),j,k])}f.useOnSendOpenMessage=a}),null);
__d("MWV2UseOnAttachmentsAddedOpen.bs",["LS.bs","LSMediaSendMarkSubJobCompletedV2StoredProcedure","LSTransaction.bs","MWConsole","MWV2ComposerMediaUploadUtil.bs","MWV2OpenComposerUtils.bs","OfflineThreadingId.bs","Promise","ReQLTable","ReStore.bs","bs_caml_int64","bs_caml_obj","promiseDone"],(function(a,b,c,d,e,f){"use strict";function a(a){var c=b("ReStore.bs").useHook(void 0);return function(d){var e=d.map(function(a){return[a,b("OfflineThreadingId.bs").make(void 0)]});b("promiseDone")(b("MWV2OpenComposerUtils.bs").insertMediaStaging(c,e,a.a),void 0,void 0);var f=function(a,d){d=d.event;if(!d.lengthComputable)return;var e=d.loaded/d.total;b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("MWV2OpenComposerUtils.bs").updateMediaStaging(c,a,function(a){return{a:a.a,b:a.b,c:a.c,d:a.d,e:a.e,f:a.f,g:a.g,h:a.h,i:a.i,j:a.j,k:a.k,l:a.l,m:a.m,n:e,o:a.o,p:a.p}})},"readWrite"),void 0,void 0)},g=function(d,e){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){var f=b("MWV2OpenComposerUtils.bs").updateMediaStaging(c,d,function(a){return{a:a.a,b:a.b,c:a.c,d:a.d,e:a.e,f:a.f,g:b("bs_caml_int64").of_float(e),h:a.h,i:a.i,j:a.j,k:a.k,l:a.l,m:a.m,n:1,o:a.o,p:a.p}}),g=b("ReQLTable").table(c,"media_send_jobs").get({hd:d,tl:0}).then(function(f){if(f===void 0)return b("Promise").resolve(void 0);var g=b("LS.bs").make(c),h=f.b,i=f.a;return b("LSMediaSendMarkSubJobCompletedV2StoredProcedure")(d,b("bs_caml_int64").of_float(e),void 0,void 0,void 0,g).then(function(a){return b("MWV2OpenComposerUtils.bs").deleteMediaStaging(c,d)}).then(function(d){return b("MWV2OpenComposerUtils.bs").updateAttachment(c,a.a,h,i,function(a){a=b("bs_caml_obj").caml_obj_dup(a);a.e=e.toString();return a})}).then(function(a){return b("MWV2OpenComposerUtils.bs").resumeSendJob(g,h)})});return b("Promise").all([f,g])},"readWrite"),void 0,void 0)},h=function(a,d){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("MWV2OpenComposerUtils.bs").updateMediaStaging(c,a,function(a){return{a:a.a,b:a.b,c:a.c,d:a.d,e:a.e,f:a.f,g:a.g,h:a.h,i:a.i,j:a.j,k:a.k,l:a.l,m:a.m,n:a.n,o:a.o,p:!0}})},"readWrite"),void 0,void 0)};e=e.map(function(a){return a[1]});return b("MWV2ComposerMediaUploadUtil.bs").startUpload(f,g,h,void 0,d,e)}}f.useOnAttachmentsAdded=a}),null);
__d("MWV2UseOnAttachmentsRemovedOpen.bs",["LSTransaction.bs","MWV2OpenComposerUtils.bs","ReStore.bs","promiseDone","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("ReStore.bs").useHook(void 0);return h.useCallback(function(a){b("promiseDone")(b("LSTransaction.bs").run(c,function(c){return b("MWV2OpenComposerUtils.bs").deleteMediaStaging(c,a)},"readWrite"),void 0,void 0)},[c])}f.useOnAttachmentsRemoved=a}),null);
__d("MWV2OpenComposer.bs",["LSNullstateCTAType.bs","MWV2ComposerEditor.bs","MWV2ComposerReplyView.bs","MWV2FileDropzone.bs","MWV2OpenMediaStaging.bs","MWV2OpenTypingState.bs","MWV2ReplyContext.bs","MWV2SendOpenMessage.bs","MWV2UseOnAttachmentsAddedOpen.bs","MWV2UseOnAttachmentsRemovedOpen.bs","ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","bs_caml","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=h.forwardRef(function(a,c){var d=a.thread,e=a.isPreviewThread;a=a.afterSendMessage;var f=h.useContext(b("MWV2ReplyContext.bs").context);f=f.reply;var g=b("MWV2UseOnAttachmentsAddedOpen.bs").useOnAttachmentsAdded(d),i=b("MWV2UseOnAttachmentsRemovedOpen.bs").useOnAttachmentsRemoved(void 0);a=b("MWV2SendOpenMessage.bs").useOnSendOpenMessage(d,a);var j=b("MWV2OpenTypingState.bs").useOnTypingStateChanged(d);h.useImperativeHandle(c,function(){return b("bs_curry").__1(g)},[g]);c=b("MWV2OpenMediaStaging.bs").useMediaStaging(d);return h.jsxs("div",{children:[f!==void 0?h.jsx(b("MWV2ComposerReplyView.bs").make,{thread:d,messageId:f.messageId,messageTimestamp:f.timestampMs}):null,h.jsx(b("MWV2ComposerEditor.bs").make,{thread:d,isPreviewThread:e,mediaStaging:c,onSendMessage:a,onAttachmentsAdded:g,onAttachmentRemoved:i,onTypingStateChanged:j,supportedFileTypes:void 0})]})});c={make:i};function j(a){}function a(a){var c=a.thread,d=a.isPreviewThread;a=a.afterSendMessage;a=a!==void 0?a:j;var e=b("ReStore.bs").useHook(void 0),f=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(e,"thread_nullstate").asc,{hd:c.a,tl:0})},[e,JSON.stringify(c.a)]));f=f!==void 0?b("bs_caml").i64_eq(f.f,b("LSNullstateCTAType.bs").getStarted):!1;var g=h.useContext(b("MWV2FileDropzone.bs").context);if(f)return null;else return h.jsx(i,{thread:c,isPreviewThread:d,afterSendMessage:a,ref:g})}d=a;f.Inner=c;f.make=d}),null);
__d("MWV2ChatTabComposer.bs",["FBID.bs","LS.bs","LSAuthorityLevel.bs","LSContactAddMessengerContactStoredProcedure","LSContactBitOffset.bs","LSContactBlockedByViewerStatus.bs","LSContactCapabilityBitOffset.bs","LSMessagingThreadTypeUtil.bs","LSTransaction.bs","MAWMessageRequestUtil.bs","MAWSecureComposer.bs","MWChatBlockedComposer.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWChatUnavailableComposer.bs","MWLSActor.bs","MWLSThreadReportingToken.bs","MWV2OpenComposer.bs","ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","SortedAsyncIterable.bs","bs_belt_Option","bs_caml","bs_curry","bs_int64","promiseDone","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){}function a(a){var c=a.thread,d=a.tab,e=a.isPreviewThread,f=a.secureThreadToggle;a=a.afterSendMessage;f=f!==void 0?f:!1;var g=a!==void 0?a:i,j=b("ReStore.bs").useHook(void 0),k=b("MWChatStateV2.bs").useDispatch(void 0);a=d.tabType;var l;l=a.TAG===0?c.O:a._0.clientThreadKey;var m=b("MWLSActor.bs").useActor(void 0);a=b("MWLSThreadReportingToken.bs").useHook(void 0);var n=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){var a=b("LSMessagingThreadTypeUtil.bs").isOneToOne(c.c);if(a){return(a=b("ReQL.bs")).filter(a.map(a.mergeJoin(a.getKeyRange(b("ReQLTable").table(j,"participants").asc,{hd:c.a,tl:0}),b("ReQLTable").table(j,"contacts").asc),function(a){return a[1]}),function(a){return b("bs_caml").i64_neq(a.a,m)})}else return b("SortedAsyncIterable.bs").empty(void 0)},[j,JSON.stringify(c.a)])),o=n!==void 0?!b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").message,n),!0)||!b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").replyMessage,n),!0):!1,p=n!==void 0?b("bs_caml").i64_neq(n.n,b("LSContactBlockedByViewerStatus.bs").unblocked):!1,q=h.useCallback(function(a){b("bs_curry")._1(g,void 0);a=d.tabType;a.TAG===0&&b("bs_curry")._1(k,b("MWChatStateActions.bs").lockInTab(Date.now(),d.tabId,{threadKey:c.a,clientThreadKey:c.O,threadType:c.c}));if(l!==void 0&&b("bs_caml").i64_neq(c.Z,b("LSAuthorityLevel.bs").authoritative)){var e={contents:function(a){}};e.contents=b("SortedAsyncIterable.bs").subscribe(b("ReQL.bs").getKeyRange(b("ReQLTable").table(j,"threads").index("clientThreadKey").asc,{hd:l,tl:0}),function(a,c){if(typeof c==="number")return;a=c._0;if(b("bs_caml").i64_eq(a.Z,b("LSAuthorityLevel.bs").authoritative)){b("bs_curry")._1(e.contents,void 0);return b("bs_curry")._1(k,b("MWChatStateActions.bs").updateThreadKeyDescriptor(d.tabId,a.a,a.O))}})}b("promiseDone")(b("LSTransaction.bs").run(j,function(a){var d;return(d=b("ReQL.bs")).first(d.filter(d.map(d.getKeyRange(b("ReQLTable").table(j,"participants").asc,{hd:c.a,tl:0}),function(a){return a.b}),function(a){return a!==m})).then(function(d){if(d!==void 0&&b("MAWMessageRequestUtil.bs").isOneOnOneMessageRequest(c))return b("LSContactAddMessengerContactStoredProcedure")(d,b("LS.bs").make(a))})},"readWrite"),void 0,void 0)},[c,d,k,JSON.stringify(l),g,j,m]),r=b("LSMessagingThreadTypeUtil.bs").isSecure(c.c);if(p){if(n!==void 0)return h.jsx(b("MWChatBlockedComposer.bs").make,{fbid:b("FBID.bs").ofStringExn(b("bs_int64").to_string(n.a)),reportingToken:a});p=2}else p=2;if(p===2){if(o)return h.jsx(b("MWChatUnavailableComposer.bs").make,{});if(!f&&!r)return h.jsx(b("MWV2OpenComposer.bs").make,{thread:c,isPreviewThread:e,afterSendMessage:q})}return h.jsx(b("MAWSecureComposer.bs").make,{thread:c,isPreviewThread:e,afterSendMessage:q})}c=a;f.noop=i;f.make=c}),null);
__d("MWV2ChatRTCButtons.bs",["fbt","CometPressable.react","FBID.bs","LSContactBitOffset.bs","LSContactCapabilityBitOffset.bs","LSContactType.bs","LSRtcCallState.bs","LSThreadBitOffset.bs","LSThreadCapabilityBitOffset.bs","LsThreadType.bs","MWChatContactPresenceHook.bs","MWChatIsMessageRequest.bs","MWChatRTCButtonIcons.bs","MWLSActor.bs","MWLSFeatureLimitedStatus.bs","MWPTooltip.react","Promise","RTCCallState.bs","ReQL.bs","ReQLSubscription.bs","ReQLSuspense.bs","ReQLTable","ReStore.bs","bs_belt_Option","bs_caml","bs_caml_int64","bs_caml_option","bs_curry","bs_int64","bs_js_null_undefined","gkx","promiseDone","react","useRTWebCometStartCallCallback"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react"),j="startVideoCall",k="startVoiceCall";function l(a,c,d,e){var f=b("ReStore.bs").useHook(void 0),g=b("useRTWebCometStartCallCallback")();return i.useCallback(function(h){h=b("ReQL.bs").first(b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQLTable").table(f,"rtc_ongoing_calls_on_threads_v2").asc,{hd:a.a,tl:0}),function(a){return a.b}));h=h.then(function(f){b("bs_curry")._1(c,void 0);g({existingCall:f!==void 0?{initiator_fbid:null,call_state:b("RTCCallState.bs").ofLsRtcCallState(a.u,a.c),server_info_data:b("bs_js_null_undefined").fromOption(b("bs_caml_option").valFromOption(f))}:null,mediaType:d,thread:{id:b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.a)),type:b("bs_caml_int64").to_int32(a.c)},trigger:e});return b("Promise").resolve(void 0)});b("promiseDone")(h,void 0,void 0)},[f,g,JSON.stringify(a.a),a.u,e,c])}function m(a){var c=b("ReStore.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0),e=i.useMemo(function(){return b("ReQL.bs").take(b("ReQL.bs").filter(b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"participants").asc,{hd:a.a,tl:0}),function(a){return b("bs_caml").i64_neq(a.b,d)}),1)},[c,a.a,JSON.stringify(d)]);e=b("ReQLSubscription.bs").useArray(e);return b("MWChatContactPresenceHook.bs").useHasActiveContact(e.map(function(a){return a.b}))}function n(a){var c=a.a,d=b("ReStore.bs").useHook(void 0),e=b("MWLSActor.bs").useActor(void 0);a=b("ReQLSubscription.bs").useArray(i.useMemo(function(){var a;return(a=b("ReQL.bs")).map(a.filter(a.take(a.getKeyRange(b("ReQLTable").table(d,"participants").asc,{hd:c,tl:0}),2),function(a){return b("bs_caml").i64_neq(a.b,e)}),function(a){return b("ReQLSuspense.bs").first(b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"contacts").asc,{hd:a.b,tl:0}))})},[d,JSON.stringify(c),JSON.stringify(e)]));var f=a.every(function(a){if(a!==void 0)if(b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").rtcVideoCall,a),!0))return b("bs_belt_Option").getWithDefault(b("LSContactBitOffset.bs").has(b("LSContactCapabilityBitOffset.bs").rtcVoiceCall,a),!0);else return!1;else return!0}),g;if(a.length!==1)g=!1;else{a=a[0];g=a!==void 0?b("bs_caml").i64_eq(a.q,b("LSContactType.bs").page):!1}if(g)if(b("gkx")("1710932"))return f;else return!1;else return!0}function o(a){var c=b("ReStore.bs").useHook(void 0),d=b("MWLSActor.bs").useActor(void 0),e=b("bs_belt_Option").isSome(b("ReQLSubscription.bs").useFirst(i.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"messages_ranges_v2__generated").desc,{hd:a.a,tl:0})},[c,JSON.stringify(a.a)]))),f=b("bs_belt_Option").isSome(b("ReQLSubscription.bs").useFirst(i.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"participants").asc,{hd:a.a,tl:{hd:d,tl:0}})},[c,JSON.stringify(a.a),JSON.stringify(d)]))),g=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").rtcVoiceCall,a),h=b("LSThreadBitOffset.bs").has(b("LSThreadCapabilityBitOffset.bs").rtcVideoCall,a),j=b("MWLSFeatureLimitedStatus.bs").useIsReadOnlyFeatureLimited(void 0),k=n(a),l=a.c;f=b("bs_caml").i64_eq(l,b("LsThreadType.bs").group)&&f?!0:b("bs_caml").i64_eq(l,b("LsThreadType.bs").oneToOne)&&k;l=b("MWChatIsMessageRequest.bs").fn(a.e);if(!l&&g&&h&&e&&!j)return f;else return!1}function p(a){}function q(a){var c=a.onPress,d=a.label,e=a.icon,f=a.overlayDisabled,g=a.xstyle;a=a.testid;var h=g!==void 0?g:[];g={"aria-label":d,onPress:c,overlayDisabled:f,overlayRadius:"50%",xstyle:function(a){return h},children:e};a!==void 0&&(g.testid=b("bs_caml_option").valFromOption(a));return i.jsx(b("MWPTooltip.react"),{tooltip:d,align:"middle",position:"above",children:i.jsx(b("CometPressable.react"),g)})}c={make:q};function r(a){var c=a.startAudioCall,d=a.fill,e=a.size,f=a.isActive;a=a.overlayDisabled;return i.jsx(q,{onPress:c,label:g._("Iniciar una llamada de voz"),icon:b("bs_curry")._3(b("MWChatRTCButtonIcons.bs").$$Audio.icon,d,e,f),overlayDisabled:a,testid:k})}d={make:r};function s(a){var c=a.startVideoCall,d=a.fill,e=a.size,f=a.isActive;a=a.overlayDisabled;return i.jsx(q,{onPress:c,label:g._("Iniciar una videollamada"),icon:b("bs_curry")._3(b("MWChatRTCButtonIcons.bs").Video.icon,d,e,f),overlayDisabled:a,testid:j})}e={make:s};function t(a){var c=a.startVideoCall,d=a.startAudioCall,e=a.ongoingCallState,f=a.fill,h=a.size;a=a.overlayDisabled;if(b("bs_caml").i64_eq(e,b("LSRtcCallState.bs").noOngoingCall))return null;else return i.jsx(q,{onPress:b("bs_caml").i64_eq(e,b("LSRtcCallState.bs").audioGroupCall)?d:b("bs_caml").i64_eq(e,b("LSRtcCallState.bs").videoGroupCall)?c:function(a){},label:b("bs_caml").i64_eq(e,b("LSRtcCallState.bs").audioGroupCall)?g._("Unirte al chat de audio"):b("bs_caml").i64_eq(e,b("LSRtcCallState.bs").videoGroupCall)?g._("Unirte al videochat"):"",icon:b("bs_caml").i64_eq(e,b("LSRtcCallState.bs").audioGroupCall)?b("bs_curry")._3(b("MWChatRTCButtonIcons.bs").$$Audio.icon,f,h,void 0):b("bs_caml").i64_eq(e,b("LSRtcCallState.bs").videoGroupCall)?b("bs_curry")._3(b("MWChatRTCButtonIcons.bs").Video.icon,f,h,void 0):null,overlayDisabled:a})}var u={make:t};function a(a){var c=a.thread,d=a.fill,e=a.size,f=a.disableOverlayOnHover,g=a.audioCallingSurface,h=a.videoCallingSurface,j=a.logAudio;a=a.logVideo;e=e!==void 0?e:"26px";f=f!==void 0?f:!1;j=j!==void 0?j:p;a=a!==void 0?a:p;var k=m(c),n=o(c);a=l(c,a,"video",h);h=l(c,j,"audio",g);if(!n)return null;j=c.u;if(b("bs_caml").i64_neq(j,b("LSRtcCallState.bs").noOngoingCall))return i.jsx(t,{startVideoCall:a,startAudioCall:h,ongoingCallState:j,fill:d,size:e,overlayDisabled:f});else return i.jsxs(i.Fragment,{children:[i.jsx(s,{startVideoCall:a,fill:d,size:e,isActive:k,overlayDisabled:f}),i.jsx(r,{startAudioCall:h,fill:d,size:e,isActive:k,overlayDisabled:f})]})}a=a;f.startVideoCallTestid=j;f.startVoiceCallTestid=k;f.BaseButton=c;f.$$Audio=d;f.Video=e;f.JoinExistingChat=u;f.make=a}),null);
__d("MWV2HeaderCloseButton.bs",["fbt","CometPressable.react","react","useSetAttributeRef"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){var c=a.onPress;a=a.color;var d=b("useSetAttributeRef")("data-prevent_chattab_focus","1");return i.jsx(b("CometPressable.react"),{"aria-label":g._("Cerrar chat"),ref:d,onPress:c,overlayRadius:"50%",children:i.jsx("svg",{width:"26px",height:"26px",viewBox:"0 0 24 24",children:i.jsxs("g",{strokeLinecap:"round",strokeWidth:"2",stroke:a,children:[i.jsx("line",{x1:"6",x2:"18",y1:"6",y2:"18"}),i.jsx("line",{x1:"6",x2:"18",y1:"18",y2:"6"})]})})})}c=a;f.make=c}),null);
__d("MWV2HeaderContainer.bs",["MDSRow.react","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{position:"l9j0dhe7",display:"j83agx80",flexShrink:"pfnyh3mw",justifyContent:"i1fnvgqd",alignItems:"bp9cbjyn",overflowX:"ni8dbmo4",overflowY:"stjgntxs",paddingTop:"cxgpxx05",paddingEnd:"dflh9lhu",paddingBottom:"sj5x9vvc",paddingStart:"scb9dxdr",borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",backgroundColor:"nred35xi",height:"k7cz35w2",zIndex:"kavbgo14"},divider:{boxShadow:"rlauoc8d"}};function a(a){var c=a.startContent,d=a.endContent,e=a.backgroundColor;a=a.divider;a=a!==void 0?a:!0;var f={};e!==void 0&&(f.backgroundColor=e);return i.jsxs("div",{className:(h||(h=b("stylex")))(j.root,a?j.divider:!1),style:f,children:[i.jsx(b("MDSRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",expanding:!0,children:c}),d]})}c=a;f.styles=j;f.make=c}),null);
__d("MWV2HeaderMinimizeButton.bs",["fbt","CometPressable.react","react","useSetAttributeRef"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){var c=a.onPress;a=a.color;var d=b("useSetAttributeRef")("data-prevent_chattab_focus","1");return i.jsx(b("CometPressable.react"),{"aria-label":g._("Minimizar pesta\u00f1a"),ref:d,onPress:c,overlayRadius:"50%",children:i.jsx("svg",{width:"26px",height:"26px",viewBox:"-4 -4 24 24",children:i.jsx("line",{x1:"2",x2:"14",y1:"8",y2:"8",strokeLinecap:"round",strokeWidth:"2",stroke:a})})})}c=a;f.make=c}),null);
__d("MWV2HeaderSettingsButton.bs",["CometLazyPopoverTrigger.react","CometPressable.react","JSResourceForInteraction","MDSRow.react","bs_curry","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={icon:{marginStart:"hnxzwevs"}};function k(a){var c=a.size;a=a.color;c=c!==void 0?c:"20px";return i.jsx("svg",{className:(h||(h=b("stylex")))(j.icon),width:c,height:c,viewBox:"0 0 18 10",children:i.jsx("path",{fill:a,fillRule:"evenodd",clipRule:"evenodd",d:"M1 2.414A1 1 0 012.414 1L8.293 6.88a1 1 0 001.414 0L15.586 1A1 1 0 0117 2.414L9.707 9.707a1 1 0 01-1.414 0L1 2.414z"})})}c={styles:j,make:k};var l={settingsButton:{flexShrink:"g5gj957u",minWidth:"hpfvmrgz",marginRight:"pab8tfeg"}};function a(a){var c=a.children,d=a.thread,e=a.tab,f=a.color;return i.jsx(b("CometLazyPopoverTrigger.react"),{popoverResource:b("JSResourceForInteraction")("MWV2HeaderSettingsMenuForJSResource.react").__setRef("MWV2HeaderSettingsButton.bs"),popoverProps:{thread:d,tab:e,onClose:function(a){}},position:"start",preloadTrigger:"button",children:function(a,d,e,g,h,j,m){return i.jsx(b("CometPressable.react"),{ref:a,testid:"messenger-chat-title-text",onHoverIn:b("bs_curry").__1(g),onHoverOut:function(a){return b("bs_curry")._1(h,void 0)},onPressIn:b("bs_curry").__1(j),onPress:function(a){return b("bs_curry")._1(d,void 0)},overlayRadius:5,xstyle:function(a){return[l.settingsButton]},children:i.jsxs(b("MDSRow.react"),{paddingHorizontal:4,paddingVertical:0,verticalAlign:"center",spacingHorizontal:0,children:[c,i.jsx(k,{color:f})]})})}})}d=a;f.Chevron=c;f.styles=l;f.make=d}),null);
__d("MWChatConfirmTabCloseDialog.bs",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={body:g._("\u00bfSeguro que quieres cerrar esta ventana del chat?"),confirm:g._("Aceptar"),title:g._("No enviaste tu mensaje.")};f.content=a}),null);
__d("MWV2ChatTabHeader.bs",["cssVar","MWChatStateActions.bs","MWChatStateV2.bs","MWInboxHeaderDetailsContainer.bs","MWV2ChatRTCButtons.bs","MWV2HeaderCloseButton.bs","MWV2HeaderContainer.bs","MWV2HeaderMinimizeButton.bs","MWV2HeaderSettingsButton.bs","MWV2IsTabFocusedContext.bs","MWV2Theme.bs","ODS","RTWebLoggingComponentConvert.bs","RTWebLoggingSurfaceConvert.bs","UseMWV2CloseTab.bs","ZenonUserActionLoggerCommon.bs","bs_caml","bs_caml_option","bs_curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function j(a){var c=a.thread;a=a.color;var d=i.useCallback(function(a){b("ODS").bumpEntityKey(3185,"mwchat_header","audio");return b("bs_curry")._1(b("ZenonUserActionLoggerCommon.bs").logClick,{component:b("bs_curry")._1(b("RTWebLoggingComponentConvert.bs").converter.toJS,"audio_button"),surface:b("bs_curry")._1(b("RTWebLoggingSurfaceConvert.bs").converter.toJS,"messenger_header")})},[]),e=i.useCallback(function(a){b("ODS").bumpEntityKey(3185,"mwchat_header","video");return b("bs_curry")._1(b("ZenonUserActionLoggerCommon.bs").logClick,{component:b("bs_curry")._1(b("RTWebLoggingComponentConvert.bs").converter.toJS,"video_button"),surface:b("bs_curry")._1(b("RTWebLoggingSurfaceConvert.bs").converter.toJS,"messenger_header")})},[]);return i.jsx(b("MWV2ChatRTCButtons.bs").make,{thread:c,fill:a,audioCallingSurface:"comet_chattab_audio_button",videoCallingSurface:"comet_chattab_video_button",logAudio:d,logVideo:e})}c={make:j};var k="#C9CCD1",l="#FFFFFF";function m(a){var c=b("MWV2IsTabFocusedContext.bs").useContext(void 0),d=b("MWV2Theme.bs").useTop(void 0);a=b("bs_caml").i64_gt(a.i,a.j);a=a&&!c;c=a?l:c?d:k;d=a?d:void 0;a=a?"white":void 0;return[c,a,d]}function a(a){var c=a.tab;a=a.thread;var d=b("MWChatStateV2.bs").useDispatch(void 0),e=b("UseMWV2CloseTab.bs").useHook(a,c),f=m(a),g=f[0],h={thread:a,photoSize:"s_32",threadNameSize:"headlineEmphasized4",isTitleALink:!1},k=f[1];k!==void 0&&(h.color=b("bs_caml_option").valFromOption(k));k={startContent:i.jsx(b("MWV2HeaderSettingsButton.bs").make,{children:i.jsx(b("MWInboxHeaderDetailsContainer.bs").make,h),thread:a,tab:c,color:g}),endContent:i.jsxs(i.Fragment,{children:[i.jsx(j,{thread:a,color:g}),i.jsx(b("MWV2HeaderMinimizeButton.bs").make,{onPress:function(a){return b("bs_curry")._1(d,b("MWChatStateActions.bs").minimizeTab(Date.now(),c.tabId))},color:g}),i.jsx(b("MWV2HeaderCloseButton.bs").make,{onPress:function(a){return b("bs_curry")._1(e,void 0)},color:g})]})};h=f[2];h!==void 0&&(k.backgroundColor=b("bs_caml_option").valFromOption(h));return i.jsx(b("MWV2HeaderContainer.bs").make,k)}d=a;f.RTCButtons=c;f.make=d}),null);
__d("MWV2InThreadBanner.bs",["CometErrorBoundary.re","LSMessagingThreadTypeUtil.bs","MWLSInThreadBannerComponent.bs","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){a=a.thread;if(b("LSMessagingThreadTypeUtil.bs").isSecure(a.c))return null;else return h.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return null},children:h.jsx(b("MWLSInThreadBannerComponent.bs").make,{})})}c=a;f.make=c}),null);
__d("MWV2TabContainer.bs",["MWChatFocusComposerContext.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWChatTabFocusHandler.bs","UseMWV2CloseTab.bs","bs_curry","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={tabContainer:{backgroundColor:"nred35xi",boxShadow:"eu4i7hue",borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",fontSize:"jq4qci2q",lineHeight:"a3bd9o3v",display:"j83agx80",flexDirection:"cbu4d94t",width:"jbcpqwzg",height:"kwja4m9d","@media (min-height: 1280px)":{height:"l8e2pc74"},marginStart:"i0u1bx94"}};function a(a){var c=a.tab,d=a.thread,e=a.style;a=a.children;var f=b("MWChatStateV2.bs").useDispatch(void 0),g=b("UseMWV2CloseTab.bs").useHook(d,c);return i.jsx(b("MWChatFocusComposerContext.bs").provider,{children:i.jsx(b("MWChatTabFocusHandler.bs").make,{onEscape:function(a){return b("bs_curry")._1(g,void 0)},onFocus:function(a){return b("bs_curry")._1(f,b("MWChatStateActions.bs").focusTab(c.tabId))},onBlur:function(a){return b("bs_curry")._1(f,b("MWChatStateActions.bs").blurTab(void 0))},children:i.jsx("div",{className:(h||(h=b("stylex")))(j.tabContainer),style:e,"data-testid":"mwchat-tab",children:a})})})}c=a;f.styles=j;f.make=c}),null);
__d("MWV2ThreadGradientBackground.bs",["MWV2ColorUtils.bs","MWV2Theme.bs","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={container:{flexBasis:"rj1gh0hx",flexGrow:"buofh1pr",display:"j83agx80",position:"l9j0dhe7",flexDirection:"cbu4d94t",overflowX:"ni8dbmo4",overflowY:"stjgntxs"}};function a(a){a=a.children;var c=b("MWV2Theme.bs").useHook(void 0),d=c.gradientColors;c=i.useMemo(function(){if(d.length>1)return{backgroundImage:b("MWV2ColorUtils.bs").gradient(d,void 0,void 0,void 0)};else return{}},[d]);return i.jsx("div",{style:c,className:(h||(h=b("stylex")))(j.container),children:a})}c=a;f.styles=j;f.make=c}),null);
__d("MWV2ThreadView.bs",["LSMessagingThreadTypeUtil.bs","MWV2OpenThreadDetail.bs","MWV2ThreadGradientBackground.bs","cr:891","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){a=a.thread;return h.jsx(b("MWV2ThreadGradientBackground.bs").make,{children:b("cr:891")==null?h.jsx(b("MWV2OpenThreadDetail.bs").make,{thread:a}):b("LSMessagingThreadTypeUtil.bs").isSecure(a.c)?h.jsx(b("cr:891").make,{thread:a}):h.jsx(b("MWV2OpenThreadDetail.bs").make,{thread:a})})}c=b("cr:891");d=a;f.$MAWSecureThreadDetail$requireCond=b("cr:891");f.mawSecureThreadDetail=c;f.make=d}),null);
__d("MWV2ChatTab.bs",["CometErrorBoundary.re","CometTransientDialogProvider.react","MWChatConnectionStatusCard.bs","MWEncryptedFocusedThreadContext.bs","MWThreadKey.bs","MWV2ChatTabComposer.bs","MWV2ChatTabHeader.bs","MWV2ComposerHasContentContext.bs","MWV2EnsureThatChatTabExists.bs","MWV2ErrorComposer.bs","MWV2FileDropzone.bs","MWV2InThreadBanner.bs","MWV2TabContainer.bs","MWV2Theme.bs","MWV2ThreadIsPage.bs","MWV2ThreadView.bs","MWVisibleMessageContext.bs","ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","SortedAsyncIterable.bs","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){var c=a.tab;a=a.thread;var d=h.useState(function(){}),e=d[1],f=d[0];d=h.useMemo(function(){return{setVisibleMessage:e,visibleMessage:f}},[f,e]);return h.jsx(b("MWV2Theme.bs").make,{themeFbid:a.z,children:h.jsx(b("MWV2ThreadIsPage.bs").make,{thread:a,children:h.jsx(b("MWThreadKey.bs").make,{id:a.a,children:h.jsx(b("MWEncryptedFocusedThreadContext.bs").make,{children:h.jsx(b("CometTransientDialogProvider.react"),{children:h.jsx(b("MWV2ComposerHasContentContext.bs").make,{children:h.jsxs(b("MWV2TabContainer.bs").make,{tab:c,thread:a,children:[h.jsx(b("MWV2ChatTabHeader.bs").make,{tab:c,thread:a}),h.jsx(b("MWChatConnectionStatusCard.bs").make,{}),h.jsx(b("MWV2InThreadBanner.bs").make,{thread:a}),h.jsxs(b("MWV2FileDropzone.bs").make,{children:[h.jsx(b("MWVisibleMessageContext.bs").Provider.make,{value:d,children:h.jsx(b("MWV2ThreadView.bs").make,{thread:a})}),h.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return h.jsx(b("MWV2ErrorComposer.bs").make,{})},children:h.jsx(b("MWV2ChatTabComposer.bs").make,{thread:a,tab:c,isPreviewThread:!1})})]})]})})}),threadId:a.a})})})})}c={make:i};function a(a){var c=a.tab;a=a.threadKeyDescriptor;var d=b("ReStore.bs").useHook(void 0),e=a.clientThreadKey,f=a.threadKey;b("MWV2EnsureThatChatTabExists.bs").useHook(f,a.threadType);a=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"threads").asc,{hd:f,tl:0})},[d,JSON.stringify(f)]));var g=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){if(e!==void 0)return b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"threads").index("clientThreadKey").asc,{hd:e,tl:0});else return b("SortedAsyncIterable.bs").empty(void 0)},[d,JSON.stringify(e)]));a=a!==void 0?a:g!==void 0?g:void 0;if(a!==void 0)return h.jsx(i,{tab:c,thread:a});else return null}d=a;f.Impl=c;f.make=d}),null);
__d("MAWSecureThreadToggle.bs",["fbt","BaseTheme.react","CometToggle.react","MWPTextCommon.react","bs_curry","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react");c={"switch-background-color":"var(--always-black)"};d={"switch-background-color":"var(--always-black)"};var k={light:c,dark:d,type:"VARIABLES"},l={secureToggle:{display:"j83agx80",justifyContent:"bkfpd7mw",alignItems:"bp9cbjyn"},stretch:{justifyContent:"i1fnvgqd"},text:{marginEnd:"oi9244e8"}};function m(a){if(b("gkx")("2127"))return j.jsx(b("BaseTheme.react"),{config:k,children:a});else return a}function a(a){var c=a.setAreWeCreatingASecureThread,d=a.areWeCreatingASecureThread;a=a.stretch;a=a!==void 0?a:!1;var e=d?g._("Cifrado de extremo a extremo"):g._("Usar el cifrado de extremo a extremo");return j.jsx(j.Fragment,{children:j.jsxs("label",{className:(i||(i=b("stylex")))(l.secureToggle,a?l.stretch:!1),children:[j.jsx("span",{className:i(l.text),"aria-hidden":!0,children:j.jsx(b("MWPTextCommon.react"),{type:"body3",children:e})}),m(j.jsx(b("CometToggle.react"),{onClick:function(a){return b("bs_curry")._1(c,function(a){return!a})},value:d,children:e,size:"small"}))]})})}e=a;f.theme=k;f.styles=l;f.wrapTheme=m;f.make=e}),null);
__d("MWChatTabTokenizerInternalLayoutInlineStrategy.react",["CometScrollableArea.react","CometTokenizerInputStrategyEventListener.react","CometTypeaheadViewStrategyEventListener.react","cometHandleHighlightDropOnMouseLeave","emptyFunction","react","stylex","useCometInternalTypeaheadState","useCometTypeaheadKeyboardForScrollableArea","useCometTypeaheadLayoutStrategyStyles"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i={view:{backgroundColor:"cwj9ozl2",boxSizing:"rq0escxv",display:"j83agx80",flexDirection:"cbu4d94t",flexGrow:"buofh1pr"},viewHidden:{pointerEvents:"hzruof5a",visibility:"kr9hpln1"}};function a(a,b){var d=a.commandConfigs,e=a.extraLayoutProps,f=e.afterViewContent,g=e.ariaProps,j=g.ariaDescribedByProps,k=g.ariaInputProps,l=g.ariaViewProps;g=e.beforeViewContent;var m=e.helperTextComponent,n=e.isLoading;e=e.isOpened;var o=a.description,p=a.errorMessage,q=a.inputStrategyRenderer,r=a.isDisabled,s=a.label,t=a.onBackspace,u=a.onBlur,v=a.onChange,w=a.onDownArrow,x=a.onEnter,y=a.onEscape,z=a.onFocus,A=a.onShiftTab,B=a.onTab,C=a.onUpArrow,D=a.queryString,E=a.selectedEntries,F=a.tokensStrategyRenderer,G=a.viewStrategyRenderer,H=a.xstyles;H=H===void 0?{}:H;var I=a.extraViewProps,J=babelHelpers.objectWithoutPropertiesLoose(a,["commandConfigs","extraLayoutProps","description","errorMessage","inputStrategyRenderer","isDisabled","label","onBackspace","onBlur","onChange","onDownArrow","onEnter","onEscape","onFocus","onShiftTab","onTab","onUpArrow","queryString","selectedEntries","tokensStrategyRenderer","viewStrategyRenderer","xstyles","extraViewProps"]);a=c("useCometInternalTypeaheadState")();var K=a.activeEntries,L=a.highlightedEntry;a=c("useCometTypeaheadLayoutStrategyStyles")({isOpened:e,xstyles:H});H=a.inputXStyle;var M=a.layoutXStyle,N=a.viewXStyle_DO_NOT_USE,O=c("useCometTypeaheadKeyboardForScrollableArea")(L),P=c("cometHandleHighlightDropOnMouseLeave")(J.onHighlightEntry);return h.jsxs("div",{className:c("stylex")(M),children:[h.jsx("div",{className:c("stylex")(H),onClick:J.onClick,role:"presentation",children:h.jsx(c("CometTokenizerInputStrategyEventListener.react"),{commandConfigs:d,onBackspace:t,onBlur:u,onChange:v,onClick:c("emptyFunction"),onDownArrow:w,onEnter:x,onEscape:y,onFocus:z,onShiftTab:A,onTab:B,onUpArrow:C,ref:b,children:function(a,b){return h.jsx(q,babelHelpers["extends"]({description:o},b,{ariaProps:k,autoFocus:J.autoFocus,errorMessage:p,id:J.id,inputEndContent:J.inputEndContent,inputExtraProps:J.inputExtraProps,inputStartContent:h.jsx(F,{isDisabled:r,onPress:J.onRemoveEntry,tokens:E}),isDisabled:r,label:s,placeholder:E.length>0?null:J.placeholder,queryString:D,ref:a,testid:void 0}))}})}),m!=null&&h.jsx("div",babelHelpers["extends"]({},j,{children:m})),g,e&&h.jsx(c("CometTypeaheadViewStrategyEventListener.react"),{onOutsideClick:J.onOutsideClick,children:function(a){return h.jsx("div",{className:c("stylex")([i.view,N,K.length===0&&!n&&i.viewHidden]),onMouseLeave:P,ref:a,children:h.jsx(c("CometScrollableArea.react"),{horizontal:!1,ref:O,children:h.jsx(G,{ariaProps:l,entries:K,extraViewProps:I,highlightedEntry:L,isLoading:n,onHighlightEntry:J.onHighlightEntry,onPressEntry:J.onPressEntry,queryString:D})})})}}),f]})}a.displayName=a.name+" [from "+f.id+"]";b=h.forwardRef(a);g["default"]=b}),98);
__d("MWChatTabTokenizerBaseLayoutInlineStrategy.react",["CometTypeaheadHelperText.react","MWChatTabTokenizerInternalLayoutInlineStrategy.react","react","useCometInternalTypeaheadFetch","useCometInternalTypeaheadState","useCometInternalTypeaheadStateDispatcher","useCometTokenizerInternalLayoutInlineStrategyHandlers","useCometTypeaheadInputRefs","useCometTypeaheadLayoutContextualStrategyARIAProps"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react"),i=d("react").useEffect;function a(a,b){var d=a.extraLayoutProps;d=d===void 0?{}:d;var e=d.afterViewContent;d=d.beforeViewContent;var f=a.helperText,g=a.label,j=a.onBackspace,k=a.onBlur,l=a.onChange,m=a.onDownArrow,n=a.onEnter,o=a.onEscape,p=a.onHighlightEntry,q=a.onOutsideClick,r=a.onPressEntry,s=a.onRemoveEntry,t=a.onUpArrow,u=a.viewRole,v=a.selectedEntries;a=babelHelpers.objectWithoutPropertiesLoose(a,["extraLayoutProps","helperText","label","onBackspace","onBlur","onChange","onDownArrow","onEnter","onEscape","onHighlightEntry","onOutsideClick","onPressEntry","onRemoveEntry","onUpArrow","viewRole","selectedEntries"]);var w=c("useCometInternalTypeaheadFetch")();w=w.isLoading;var x=c("useCometInternalTypeaheadState")(),y=x.activeEntries;x=x.highlightedEntry;var z=c("useCometInternalTypeaheadStateDispatcher")(),A=z.dispatchIsOpened;i(function(){A(!0)},[A]);z=c("useCometTypeaheadInputRefs")(b);b=z.composedRef;z=z.inputRef;z=c("useCometTokenizerInternalLayoutInlineStrategyHandlers")({inputRef:z,onBackspace:j,onBlur:k,onChange:l,onDownArrow:m,onEnter:n,onEscape:o,onHighlightEntry:p,onOutsideClick:q,onPressEntry:r,onRemoveEntry:s,onUpArrow:t,selectedEntries:v});j=c("useCometTypeaheadLayoutContextualStrategyARIAProps")({activeEntries:y,helperText:f,highlightedEntry:x,inputLabel:g,isOpened:!0,viewRole:u});return h.jsx(c("MWChatTabTokenizerInternalLayoutInlineStrategy.react"),babelHelpers["extends"]({},a,z,{extraLayoutProps:{afterViewContent:e,ariaProps:j,beforeViewContent:d,helperTextComponent:f!=null?h.jsx(c("CometTypeaheadHelperText.react"),{text:f}):null,isLoading:w,isOpened:!0},label:g,ref:b,selectedEntries:v,viewRole:u}))}a.displayName=a.name+" [from "+f.id+"]";b=h.forwardRef(a);g["default"]=b}),98);
__d("MWChatTabsTokenizerLayoutInlineStrategy.react",["fbt","MWChatTabTokenizerBaseLayoutInlineStrategy.react","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useMemo,k={layout:{position:"l9j0dhe7",width:"jbcpqwzg"},offsetView:{height:"btdsrvhy",maxHeight:"f7dnaohx","@media (min-height: 1280px)":{height:"pv6a5gh5"}},root:{display:"j83agx80"},to:{color:"oo9gr5id",fontSize:"jq4qci2q",fontWeight:"knj5qynh",lineHeight:"a3bd9o3v",marginStart:"dhix69tm",marginTop:"aov4n071",zIndex:"s90hwng2"},typeaheadInput:{backgroundColor:"nred35xi",boxSizing:"rq0escxv",display:"a8c37x1j",paddingEnd:"dflh9lhu",paddingStart:"scb9dxdr"},view:{backgroundColor:"nred35xi",borderTop:"opwvks06",height:"mbhqdu15",maxHeight:"oxtv4ib6",position:"pmk7jnqg",start:"feeahcbg",top:"i42f9fw1",width:"jbcpqwzg","@media (min-height: 1280px)":{height:"h4lgqe89"}}};function a(a){a===void 0&&(a=!1);function b(b,d){var e=b.xstyles;e=e===void 0?{}:e;var f=e.viewXStyle_DO_NOT_USE;e=babelHelpers.objectWithoutPropertiesLoose(b,["xstyles"]);b=j(function(){var b;return{inputXStyle:[k.typeaheadInput],layoutXStyle:[k.layout],viewXStyle_DO_NOT_USE:[k.view,f,(b=a)!=null?b:k.offsetView]}},[f]);return i.jsxs("div",{className:c("stylex")(k.root),children:[i.jsx("div",{"aria-hidden":"true",className:c("stylex")(k.to),children:h._("Para:")}),i.jsx(c("MWChatTabTokenizerBaseLayoutInlineStrategy.react"),babelHelpers["extends"]({},e,{contextualProps:{align:"start",disableAutoFlip:!0},label:h._("Env\u00eda un mensaje a"),layerContext:"root",ref:d,xstyles:b}))]})}b.displayName=b.name+" [from "+f.id+"]";return i.forwardRef(b)}g.createMWChatTabsTokenizerLayoutInlineStrategy=a}),98);
__d("MWChatTokenizerTokenStrategy.react",["CometTokenizerTokenStrategy.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx("div",{"data-testid":void 0,children:h.jsx(c("CometTokenizerTokenStrategy.react"),babelHelpers["extends"]({},a,{level:4}))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ComposeTabHeader.bs",["fbt","MWPTextCommon.react","MWV2HeaderCloseButton.bs","MWV2HeaderContainer.bs","MWV2IsTabFocusedContext.bs","MWV2Theme.bs","UseMWV2CloseTab.bs","bs_curry","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={title:{paddingStart:"h4z51re5"}};function l(a){return j.jsx("div",{className:(i||(i=b("stylex")))(k.title),children:j.jsx(b("MWPTextCommon.react"),{type:"headline4",children:g._("Nuevo mensaje")})})}c={make:l};function a(a){var c=a.tab;a=a.thread;var d=b("UseMWV2CloseTab.bs").useHook(a,c);a=b("MWV2IsTabFocusedContext.bs").useContext(void 0);c=b("MWV2Theme.bs").useTop(void 0);a=a?c:"#BEC2C9";return j.jsx(b("MWV2HeaderContainer.bs").make,{startContent:j.jsx(l,{}),endContent:j.jsx(b("MWV2HeaderCloseButton.bs").make,{onPress:function(a){return b("bs_curry")._1(d,void 0)},color:a}),divider:!1})}d=a;f.styles=k;f.ComposeTabTitle=c;f.make=d}),null);
__d("MWV2NewThreadUtils.bs",["LSContactBlockedByViewerStatus.bs","LSDatabaseType.bs","LSSearchType.bs","MWLSDatabaseLazySync.bs","MessagingThreadType.bs","MessengerWebEvent","MessengerWebEventsFalcoEvent.bs","bs_caml_format","bs_curry","react","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a,c){if(a==="group")return b("MessengerWebEventsFalcoEvent.bs").log(function(){return{event_name:b("MessengerWebEvent").SEARCH_CLICK_RESULT,thread_fbid:c}});else if(a==="messages"){b("recoverableViolation")("Was not expecting a message search result in a contact search typeahead","messenger_web_product");return}else return b("MessengerWebEventsFalcoEvent.bs").log(function(){return{event_name:b("MessengerWebEvent").SEARCH_CLICK_RESULT,other_user_fbid:c}})}function a(a){var c=b("MWLSDatabaseLazySync.bs").useSync(b("LSDatabaseType.bs").ranking);h.useEffect(function(){b("bs_curry")._1(c,void 0)},[c])}function c(a){var c=h.useState(function(){return a}),d=c[1],e=h.useCallback(function(a){var c=a.some(function(a){return a.getIsInstagramAccount()});if(!c)return b("bs_curry")._1(d,function(b){return a})},[d]);return[c[0],e]}function d(a,c){return h.useMemo(function(){return a.map(function(a){var d=a.getRawData(),e=a.getResultType();a=a.getIsInstagramAccount();var f=d.isContact,g;if(a)g=f?b("LSSearchType.bs").igContactFollowing:b("LSSearchType.bs").igNoncontactFollowing;else{var h=0;f?e==="user"?g=b("LSSearchType.bs").contact:h=1:e==="user"?g=b("LSSearchType.bs").noncontact:h=1;h===1&&(e==="page"?g=b("LSSearchType.bs").page:e==="group"?g=b("LSSearchType.bs").group:(b("recoverableViolation")("Had troubles converting search result to token.\n              Is Contact: "+(f?"true":"false")+"\n              Token Type: "+e,"messenger_web_product"),g=b("LSSearchType.bs").noncontact))}h=d.verificationStatus;return{id:b("bs_caml_format").caml_int64_of_string(d.id),type_:g,threadType:e==="user"?c?b("MessagingThreadType.bs").secureMessageOverWaOneToOne:b("MessagingThreadType.bs").oneToOne:e==="group"?b("MessagingThreadType.bs").group:b("MessagingThreadType.bs").oneToOne,displayName:d.displayName,profilePicUrl:d.imageUrl,secondaryProfilePicUrl:d.secondaryImageUrl,contextLine:d.subText,blockedByViewerStatus:b("LSContactBlockedByViewerStatus.bs").unblocked,isVerified:h!==void 0?h==="NOT_VERIFIED"?!1:!0:void 0,isInteropEligible:a}})},[a,c])}function e(a,c,d){return h.useCallback(function(e){var f=e.getRawData(),g=f.id;f=e.getResultType();var h=function(a){b("bs_curry")._1(c,function(a){return!0});return b("bs_curry")._1(d,{threadKey:b("bs_caml_format").caml_int64_of_string(g),clientThreadKey:void 0,threadType:a})};a||i(f,g);e=e.getIsInstagramAccount();if(f==="user")if(e)return h(a?b("MessagingThreadType.bs").secureMessageOverWaOneToOne:b("MessagingThreadType.bs").oneToOne);else return;else if(f==="group")return h(b("MessagingThreadType.bs").group);else if(f==="messages"){b("recoverableViolation")("Was not expecting a message search result in a contact search typeahead","messenger_web_product");return}else return h(a?b("MessagingThreadType.bs").secureMessageOverWaOneToOne:b("MessagingThreadType.bs").oneToOne)},[a,c])}f.logTokenClick=i;f.useSyncRanking=a;f.useTokens=c;f.useTokensShimmed=d;f.useOnAddToken=e}),null);
__d("MWV2ThreadPreview.bs",["FBID.bs","LS.bs","LSAuthorityLevel.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactVerifyContactRowExistsStoredProcedure","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSMailboxLocalCreateOptimisticGroupThreadStoredProcedure","LSMailboxVerifyThreadRowExistsStoredProcedure","LSMessagingThreadTypeUtil.bs","LSTransaction.bs","LSVec.bs","MAWBackendBridge.bs","MAWCreateOptimisticSecureGroupThread.bs","MAWJob.re","MAWThreadId.bs","MWLSActor.bs","MWThreadKey.bs","MWV2Theme.bs","MWV2ThreadView.bs","Promise","ReQL.bs","ReQLSubscription.bs","ReQLSuspense.bs","ReQLTable","ReStore.bs","SortedAsyncIterable.bs","WAJids","bs_belt_Array","bs_belt_Option","bs_caml","bs_caml_array","bs_curry","bs_int64","promiseDone","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){var c=a.token,d=a.setPreviewThread,e=b("ReStore.bs").useHook(void 0),f=c.threadType,g=c.id;a=h.useState(function(){});var i=a[1],j=a[0];h.useEffect(function(){if(b("LSMessagingThreadTypeUtil.bs").isSecure(f)){var a=b("bs_curry")._1(b("MAWBackendBridge.bs").createThread({contactFbid:b("FBID.bs").ofStringExn(b("bs_int64").to_string(g))}).sendAndReceive,void 0),c=b("MAWJob.re").getDevices(new Set().add(b("WAJids").toUserJid(b("FBID.bs").ofStringExn(b("bs_int64").to_string(g))))).waitUntilPersisted();b("promiseDone")(b("Promise").all([a,c]),function(a){var c=a[0];return b("bs_curry")._1(i,function(a){return b("MAWThreadId.bs").toThreadKey(c)})},void 0)}else b("promiseDone")(b("LSTransaction.bs").run(e,function(a){return b("LSMailboxVerifyThreadRowExistsStoredProcedure")(g,f,b("LS.bs").make(a))},"readWrite"),void 0,void 0),b("bs_curry")._1(i,function(a){return g})},[e,b("bs_int64").to_string(g),f]);var k=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){if(j!==void 0)return b("ReQL.bs").getKeyRange(b("ReQLTable").table(e,"threads").asc,{hd:j,tl:0});else return b("SortedAsyncIterable.bs").empty(void 0)},[e,b("bs_belt_Option").map(j,b("bs_int64").to_string)]));h.useEffect(function(){b("bs_curry")._1(d,function(a){return k})},[k]);if(k!==void 0)return h.jsx(b("MWThreadKey.bs").make,{id:k.a,children:h.jsx(b("MWV2Theme.bs").make,{themeFbid:k.z,children:h.jsx(b("MWV2ThreadView.bs").make,{thread:k})})});else return null}c={make:i};function j(a){var c=a.tokens,d=a.tokenContactIds,e=a.setPreviewThread,f=a.isCreatingSecureThread,g=b("ReStore.bs").useHook(void 0),i=b("bs_int64").to_string(b("MWLSActor.bs").useActor(void 0)),j=b("ReQLSubscription.bs").useArray(h.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").filter(b("ReQLTable").table(g,"participants").asc,function(a){return d.has(b("bs_int64").to_string(a.b))}),function(a){return b("bs_int64").to_string(a.a)})},[g,d])),k=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){var a,c=new Set(j);return(a=b("ReQL.bs")).filter(a.filter(a.filter(a.filter(b("ReQLTable").table(g,"threads").asc,function(a){return b("LSMessagingThreadTypeUtil.bs").isSecure(a.c)===f}),function(a){return a.d===void 0}),function(a){a=a.O;if(a!==void 0)return c.has(b("bs_int64").to_string(a));else return!1}),function(a){a=a.O;if(a===void 0)return!1;a=b("ReQLSuspense.bs").toArray(b("ReQL.bs").filter(b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQLTable").table(g,"participants").index("threadKeyReadWatermarkTimestampMs").desc,{hd:a,tl:0}),function(a){return b("bs_int64").to_string(a.b)}),function(a){return a!==i}));if(a.every(function(a){return d.has(a)}))return a.length===d.size;else return!1})},[g,j,d,i,f]));h.useEffect(function(){c.forEach(function(a){b("LSTransaction.bs").run(g,function(c){return b("LSContactVerifyContactRowExistsStoredProcedure")(a.id,b("LSContactIdType.bs").fbid,a.profilePicUrl,a.displayName,b("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,a.blockedByViewerStatus,void 0,!1,b("LSAuthorityLevel.bs").clientPartial,void 0,b("LSContactWorkForeignEntityType.bs").unknown,b("LSContactGender.bs").unknown,b("LSContactViewerRelationship.bs").unknown,void 0,b("LS.bs").make(c))},"readWrite")})},[g,d]);h.useEffect(function(){k!==void 0||b("LSTransaction.bs").run(g,function(a){if(f)return b("MAWCreateOptimisticSecureGroupThread.bs").call(a,c);a=b("LSMailboxLocalCreateOptimisticGroupThreadStoredProcedure")(b("LSVec.bs").make(c.map(function(a){return a.id})),void 0,b("LS.bs").make(a));return a.then(function(a){return b("Promise").resolve(void 0)})},"readWrite")},[g,c,k,f]);h.useEffect(function(){b("bs_curry")._1(e,function(a){return k})},[k]);if(k!==void 0)return h.jsx(b("MWThreadKey.bs").make,{id:k.a,children:h.jsx(b("MWV2Theme.bs").make,{themeFbid:k.z,children:h.jsx(b("MWV2ThreadView.bs").make,{thread:k})})});else return null}d={make:j};function k(a){var c=a.tokens,d=a.setPreviewThread,e=b("ReStore.bs").useHook(void 0),f=b("bs_int64").to_string(b("MWLSActor.bs").useActor(void 0)),g=h.useMemo(function(){return new Set(c.map(function(a){return b("bs_int64").to_string(a.id)}))},[c]),i=h.useMemo(function(){return b("LSMessagingThreadTypeUtil.bs").isSecure(b("bs_caml_array").get(c,0).threadType)},[c]),k=b("ReQLSubscription.bs").useArray(h.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").filter(b("ReQLTable").table(e,"participants").asc,function(a){return g.has(b("bs_int64").to_string(a.b))}),function(a){return b("bs_int64").to_string(a.a)})},[e,g])),l=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){var a,c=new Set(k);return(a=b("ReQL.bs")).filter(a.filter(a.filter(a.filter(b("ReQLTable").table(e,"threads").asc,function(a){return b("LSMessagingThreadTypeUtil.bs").isSecure(a.c)===i}),function(a){return a.d===void 0}),function(a){return c.has(b("bs_int64").to_string(a.a))}),function(a){a=b("ReQLSuspense.bs").toArray(b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQLTable").table(e,"participants").index("threadKeyReadWatermarkTimestampMs").desc,{hd:a.a,tl:0}),function(a){return b("bs_int64").to_string(a.b)}));var c=a.filter(function(a){return a!==f});if(a.length===c.length||c.length!==g.size)return!1;else return c.every(function(a){return g.has(a)})})},[e,k,g,f,i]));h.useEffect(function(){l!==void 0&&b("bs_curry")._1(d,function(a){return l})},[l]);if(l!==void 0)return h.jsx(b("MWThreadKey.bs").make,{id:l.a,children:h.jsx(b("MWV2Theme.bs").make,{themeFbid:l.z,children:h.jsx(b("MWV2ThreadView.bs").make,{thread:l})})});else return h.jsx(j,{tokens:c,tokenContactIds:g,setPreviewThread:d,isCreatingSecureThread:i})}e={make:k};function a(a){var c=a.tokens,d=a.setPreviewThread,e=b("MWLSActor.bs").useActor(void 0);a=h.useMemo(function(){return c.filter(function(a){return b("bs_caml").i64_neq(a.id,e)})},[c,e]);h.useEffect(function(){c.length===0&&b("bs_curry")._1(d,function(a){})},[c]);if(c.length===0)return null;if(a.length>1)return h.jsx(k,{tokens:a,setPreviewThread:d});a=b("bs_belt_Array").get(a,0);a=a!==void 0?a:b("bs_caml_array").get(c,0);return h.jsx(i,{token:a,setPreviewThread:d})}a=a;f.OneOnOnePreview=c;f.GroupPreviewOptimistic=d;f.GroupPreview=e;f.make=a}),null);
__d("MWV2ComposeTab.bs",["CometPlaceholder.react","LSContactType.bs","MAWSecureThreadToggle.bs","MWChatLightSpeedSearchTypeahead.bs","MWChatSearchTypeaheadDataEntry","MWChatStateActions.bs","MWChatStateV2.bs","MWChatTabsTokenizerLayoutInlineStrategy.react","MWChatTokenizerTokenStrategy.react","MWLSContactTypeExactUtils.bs","MWSearchTypeaheadViewItemDisabledHook.bs","MWThreadKey.bs","MWV2ChatTabComposer.bs","MWV2ComposeTabHeader.bs","MWV2ComposerHasContentContext.bs","MWV2FileDropzone.bs","MWV2NewThreadUtils.bs","MWV2ReplyContext.bs","MWV2TabContainer.bs","MWV2Theme.bs","MWV2ThreadPreview.bs","bs_caml","bs_caml_int64","bs_caml_option","bs_curry","bs_int64","react","stylex","usePrevious"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={viewXStyle_DO_NOT_USE:{marginTop:"ikscmtro",maxHeight:"ka25v2fa",minHeight:"i5xkquq4",zIndex:"kavbgo14"}},k={toggleContainer:{borderTop:"l6v480f0",boxShadow:"rlauoc8d",paddingTop:"l29c1vbm",paddingBottom:"j7796vcc",paddingStart:"dati1w0a",paddingEnd:"hv4rvrfc"},encapsulateZIndex:{zIndex:"du4w35lb",display:"j83agx80",flexDirection:"cbu4d94t",height:"datstx6m"},preview:{zIndex:"tkr6xdv7",display:"j83agx80",flexDirection:"cbu4d94t",height:"datstx6m"}};function l(a){var c=a.q;return b("MWChatSearchTypeaheadDataEntry").fromSearchResult({displayName:a.h,id:b("bs_int64").to_string(a.a),imageUrl:a.b,secondaryImageUrl:void 0,isContact:!1,isInstagramAccount:b("MWLSContactTypeExactUtils.bs").isIgContact(a),isInteropEligible:void 0,isGroupsXacEligible:void 0,resultType:b("bs_caml").i64_eq(c,b("LSContactType.bs").user)||!(b("bs_caml").i64_eq(c,b("LSContactType.bs").page)||b("bs_caml").i64_eq(c,b("LSContactType.bs").pagePersona))?"user":"page",subtext:"",isVerified:!1,section:"",serverSearchResult:void 0,threadKey:void 0})}function m(a){var c=a.length,d=b("usePrevious")(c);a=i.useContext(b("MWV2ReplyContext.bs").context);var e=a.clearReply;i.useEffect(function(){!(d==null)&&c!==d&&b("bs_curry")._2(e,b("bs_caml_int64").zero,!0);return function(a){return b("bs_curry")._2(e,b("bs_caml_int64").zero,!0)}},[c,d,e])}function a(a){var c,d=a.tab;a=a.initialTokens;(c=b("MWV2NewThreadUtils.bs")).useSyncRanking(void 0);var e=i.useState(function(){}),f=e[0],g=i.useState(function(){return!1}),n=g[0];a=a.map(l);a=c.useTokens(a);var o=a[0],p=c.useTokensShimmed(o,n);m(o);var q=i.useState(function(){return!1}),r=q[1],s=b("MWChatStateV2.bs").useDispatch(void 0),t=function(a){return b("bs_curry")._1(s,b("MWChatStateActions.bs").lockInTab(Date.now(),d.tabId,a))};c=c.useOnAddToken(n,r,t);t=i.useCallback(function(a){return b("bs_curry")._1(r,function(a){return!0})},[r]);var u=i.useMemo(function(){return b("MWChatTabsTokenizerLayoutInlineStrategy.react").createMWChatTabsTokenizerLayoutInlineStrategy(!0)},[]),v=b("MWSearchTypeaheadViewItemDisabledHook.bs").useIsDisabled(o),w={tab:d};f!==void 0&&(w.thread=b("bs_caml_option").valFromOption(f));if(f!==void 0){var x=f.O;x=b("bs_int64").to_string(x!==void 0?x:f.a);t=i.jsx(b("CometPlaceholder.react"),{children:i.jsx(b("MWV2Theme.bs").make,{themeFbid:f.z,children:i.jsx(b("MWThreadKey.bs").make,{id:f.a,children:i.jsx(b("MWV2ChatTabComposer.bs").make,{thread:f,tab:d,isPreviewThread:!0,secureThreadToggle:n,afterSendMessage:t},x)})}),fallback:null})}else t=null;x={tab:d,children:i.jsxs("div",{className:(h||(h=b("stylex")))(k.encapsulateZIndex),children:[i.jsx(b("MWV2ComposeTabHeader.bs").make,w),i.jsxs(b("MWV2FileDropzone.bs").make,{children:[i.jsx(b("MWChatLightSpeedSearchTypeahead.bs").make,{isDisabled:q[0],getIsViewItemDisabled:v,onAddToken:c,onChangeTokens:a[1],onSearchAbandon:function(a){},onSearchCompletion:function(a){},tokens:o,includeRecommendations:!1,xstyles:j,tokenItemRenderer:b("MWChatTokenizerTokenStrategy.react"),layoutStategyRenderer:u}),i.jsx("div",{className:h(k.toggleContainer),children:i.jsx(b("MAWSecureThreadToggle.bs").make,{setAreWeCreatingASecureThread:g[1],areWeCreatingASecureThread:n,stretch:!0})}),i.jsx("div",{className:h(k.preview),children:i.jsx(b("MWV2ThreadPreview.bs").make,{tokens:p,setPreviewThread:e[1]})}),t]})]})};f!==void 0&&(x.thread=b("bs_caml_option").valFromOption(f));return i.jsx(b("MWV2ComposerHasContentContext.bs").make,{children:i.jsx(b("MWV2TabContainer.bs").make,x)})}c=a;f.searchTypeaheadStyles=j;f.styles=k;f.make=c}),null);
__d("MWV2ChatTabs.bs",["CometErrorBoundary.re","CometPlaceholder.react","MWChatStateV2.bs","MWChatUIStateV2.bs","MWV2ChatTab.bs","MWV2ComposeTab.bs","MWV2IsTabFocusedContext.bs","MWV2ReplyContext.bs","bs_belt_Option","bs_caml_obj","bs_int64","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react");function a(a){a=b("MWChatStateV2.bs").useState(function(a){return a.tabs});a=Array.from(a.tabs.values());return i.jsxs("div",{children:[i.jsx("b",{children:"tabs:"}),a.map(function(a){var c=a.tabType,d;if(c.TAG===0)d="ComposeTab("+b("bs_belt_Option").getWithDefault(JSON.stringify(c._0.map(function(a){return b("bs_int64").to_string(a.a)})),"[]")+")";else{c=c._0;var e=c.clientThreadKey;d="ChatTab({threadKey: "+b("bs_int64").to_string(c.threadKey)+", clientThreadKey: "+(e!==void 0?b("bs_int64").to_string(e):"None")+"})"}return i.jsx("pre",{children:JSON.stringify({tabId:a.tabId,tabType:d,openWatermark:a.openWatermark,closeWatermark:a.closeWatermark,minimiseWatermark:a.minimiseWatermark},void 0,4)},String(a.tabId))})]})}d={make:a};var j={tabsContainer:{display:"j83agx80",position:"poy2od1o",bottom:"i09qtzwb",end:"esma6hys"}};function c(a){a=b("MWChatStateV2.bs").useState(function(a){return a.tabs});var c=b("MWChatStateV2.bs").useState(function(a){return a.focusedTabId}),d=c.focusedTabId;c=b("MWChatUIStateV2.bs").getTabs(a.tabs,d,b("MWChatUIStateV2.bs").maxTabs);return i.jsx("div",{className:(h||(h=b("stylex")))(j.tabsContainer),children:c[0].map(function(a,c){c=b("bs_caml_obj").caml_equal(d,a.tabId);var e=a.tabType;e=e.TAG===0?i.jsx(b("MWV2ComposeTab.bs").make,{tab:a,initialTokens:e._0}):i.jsx(b("MWV2ChatTab.bs").make,{tab:a,threadKeyDescriptor:e._0});return i.jsx(b("CometErrorBoundary.re").make,{fallback:function(a){return null},children:i.jsx(b("MWV2IsTabFocusedContext.bs").make,{children:i.jsx(b("MWV2ReplyContext.bs").make,{children:i.jsx(b("CometPlaceholder.react"),{children:e,fallback:null})}),isFocused:c})},String(a.tabId))})})}e=c;f.Debug=d;f.styles=j;f.make=e}),null);
__d("MWV2CookieWriter.bs",["DeferredCookie","MessagingThreadType.bs","bs_caml","bs_int64","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";function g(a){if(b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").group))return"g.";else if(b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").secureMessageOverWaOneToOne))return"sc.";else if(b("bs_caml").i64_eq(a,b("MessagingThreadType.bs").secureMessageOverWaGroup))return"sg.";else return"u."}function h(a,c){var d=function(a){if(c===void 0)return!1;var d=c.tabType;if(d.TAG===0)return!1;else return b("bs_caml").i64_eq(d._0.threadKey,a)},e=[];a.forEach(function(a){if(a===void 0)return;var c=a.a;if(!d(c)){e.push({i:g(a.c)+b("bs_int64").to_string(c)});return}});var f;if(c!==void 0){a=c.tabType;if(a.TAG===0)f=void 0;else{a=a._0;f=g(a.threadType)+b("bs_int64").to_string(a.threadKey)}}else f=void 0;a=JSON.stringify({t3:e,utc3:Date.now(),lm3:f,v:1});if(a!==void 0)return"C"+a}function a(a,c){a=h(a,c);a!==void 0?b("DeferredCookie").addToQueue("presence",a,0,"",!1,!1,!0):b("recoverableViolation")("Failed to serialize cookie","messenger_comet")}c=1;f.version=c;f.serializeToCookie=h;f.write=a}),null);
__d("UseMWV2CookieWriter.bs",["LSAuthorityLevel.bs","MWChatStateV2.bs","MWChatStateV2IsComposeTab.bs","MWChatStateV2IsOpen.bs","MWChatUIStateV2.bs","MWV2CookieWriter.bs","Promise","ReQL.bs","ReQLTable","ReStore.bs","bs_belt_Array","bs_caml","promiseDone","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("MWChatStateV2.bs").useState(function(a){return a.tabs}),d=b("ReStore.bs").useHook(void 0);h.useEffect(function(){var a=b("bs_belt_Array").get(Array.from(c.tabs.values()).filter(b("MWChatStateV2IsOpen.bs").isOpen).sort(function(a,c){return b("MWChatUIStateV2.bs").Comparators.byMostRecentOpened(a,c)}),0),e=function(c){c=c.tabType;if(a===void 0)return!1;var d=a.tabType;if(d.TAG===0||c.TAG===0)return!1;else return b("bs_caml").i64_eq(d._0.threadKey,c._0.threadKey)},f=Array.from(c.tabs.values()).filter(function(a){return!b("MWChatStateV2IsComposeTab.bs").isComposeTab(a)}).filter(function(a){if(a.openWatermark>a.closeWatermark)return!0;else return a.minimiseWatermark>a.closeWatermark}).filter(function(a){return!e(a)}).sort(function(a,c){var d=b("MWChatUIStateV2.bs").Comparators.byMostRecentMinimised(a,c);if(d===0)return b("MWChatUIStateV2.bs").Comparators.byMostRecentOpened(a,c);else return d}),g=[];f.forEach(function(a){a=a.tabType;if(a.TAG===0)return;g.push(a._0.threadKey)});b("promiseDone")(b("Promise").all(g.map(function(a){return b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"threads").asc,{hd:a,tl:0}))})).then(function(c){c=c.filter(function(a){if(a!==void 0)return b("bs_caml").i64_eq(a.Z,b("LSAuthorityLevel.bs").authoritative);else return!1});b("MWV2CookieWriter.bs").write(c,a);return b("Promise").resolve(void 0)}),void 0,void 0)},[d,c])}f.useHook=a}),null);
__d("MWV2ChatTabsRoot.bs",["CometContextualLayerAnchorRoot.re","CometPlaceholder.react","IsMWIsOnPushView","MAWSetup.bs","MWChatOnMediaVisibilityOverrideContext","MWLSChatInit.bs","MWLSThreadDisplayContext.bs","MWSetupPresenceReporting.bs","MWV2ChatHeads.bs","MWV2ChatTabs.bs","UseMWV2CookieWriter.bs","react","stylex","useMWIsTopLevelRouteMediaViewerExperiment","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={root:{position:"poy2od1o",bottom:"i09qtzwb",end:"n7fi1qx3"},container:{display:"j83agx80",alignItems:"aovydwv3"},chatAbovePushView:{zIndex:"tkr6xdv7"}};function k(a){a=b("IsMWIsOnPushView")();return i.jsx(b("CometContextualLayerAnchorRoot.re").make,{children:i.jsx(b("MWLSThreadDisplayContext.bs").Provider.make,{children:i.jsx("div",{className:(h||(h=b("stylex")))(j.root,a?j.chatAbovePushView:!1),children:i.jsxs("div",{className:h(j.container),children:[i.jsx(b("MWV2ChatTabs.bs").make,{}),i.jsx(b("MWV2ChatHeads.bs").make,{})]})}),value:0})})}c={styles:j,make:k};function l(a){a=a.children;b("UseMWV2CookieWriter.bs").useHook(void 0);b("MWLSChatInit.bs").useHook(void 0);return a}d={make:l};function a(a){a=b("useMWIsTopLevelRouteMediaViewerExperiment")();a=b("MWChatOnMediaVisibilityOverrideContext").useMWChatOnMediaVisibilityOverride(a);var c=b("IsMWIsOnPushView")();a=b("useShouldShowMessagingEntrypointInCometRoot")("CHAT")&&(a||c);return i.jsxs(b("CometPlaceholder.react"),{children:[i.jsx(b("MWSetupPresenceReporting.bs").make,{}),i.jsx(l,{children:i.jsx(b("MAWSetup.bs").make,{children:a?i.jsx(k,{}):null})})],fallback:null})}e=a;f.ChatTabs=c;f.LoadLightspeed=d;f.make=e}),null);
__d("MWV2ChatTabsRoot.re",["MWV2ChatTabsRoot.bs"],(function(a,b,c,d,e,f){a=b("MWV2ChatTabsRoot.bs").make;f.make=a}),null);
__d("MWV2Chat.react",["CometErrorBoundary.react","LSPlatformClientProvider.re","LSPlatformConfig.re","LSPlatformMessengerConfig.re","MWV2ChatTabsRoot.re","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function a(a){return h.jsx(c("CometErrorBoundary.react"),{fallback:function(a){return"Error"},children:h.jsx(d("LSPlatformConfig.re").Provider_make,{config:d("LSPlatformMessengerConfig.re").configEagerlyLoaded,children:h.jsx(d("LSPlatformClientProvider.re").make,{children:h.jsx(d("MWV2ChatTabsRoot.re").make,{})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatOpenTabFromNewMessage.bs",["LSThreadAttributionStore.bs","MWChatMultitabContext.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWChatThreadId.bs","ODS","bs_curry","react","useCometFeedNoRoutingNavigationEventLogger"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("useCometFeedNoRoutingNavigationEventLogger")(),d=h.useContext(b("MWChatMultitabContext.bs").context),e=b("MWChatStateV2.bs").useDispatch(void 0);return h.useCallback(function(f){return function(g,h){c(Date.now(),"","messenger");b("ODS").bumpEntityKey(3185,"mwchat_tab","open_incoming");b("LSThreadAttributionStore.bs").setSource(b("MWChatThreadId.bs").getFBID(f),a);d!==void 0&&b("bs_curry")._1(e,b("MWChatStateActions.bs").openTab(Date.now(),{shouldFocus:!1},{TAG:1,_0:{threadKey:g.a,clientThreadKey:void 0,threadType:g.c}}));return b("bs_curry")._1(h,void 0)}},[d,c,a,e])}f.useHook=a}),null);
__d("MWV2OpenTabOrThread.bs",["CurrentEnvironment","FBID.bs","LSThreadAttributionStore.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWInboxRouteBuilder.bs","XCometMessengerControllerRouteBuilder","bs_caml_option","bs_curry","bs_int64","cr:9871","cr:9873","react","useCometRouterDispatcher","useShouldShowMessagingEntrypointInCometRoot"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react"),i=b("cr:9871")==null?void 0:b("bs_caml_option").some(b("cr:9871")),j=b("cr:9873")==null?void 0:b("bs_caml_option").some(b("cr:9873"));function a(a){var c=b("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),d=b("MWChatStateV2.bs").useDispatch(void 0),e=b("useCometRouterDispatcher")();return h.useMemo(function(){var a=function(a){var c=b("FBID.bs").ofStringExn(b("bs_int64").to_string(a));if(b("cr:9873")==null)return b("bs_curry")._1(b("MWInboxRouteBuilder.bs").buildURL,{thread_key:c});else if(b("bs_curry")._1(j.isThreadId,a))if(b("CurrentEnvironment").facebookdotcom)return b("XCometMessengerControllerRouteBuilder").buildURL({});else return"/";else return b("bs_curry")._1(b("MWInboxRouteBuilder.bs").buildURL,{thread_key:c})},f=function(c){c=c.threadKey;!(b("cr:9873")==null)&&!(b("cr:9871")==null)&&b("bs_curry")._1(j.isThreadId,c)&&b("bs_curry")._1(i.setMostRecentSecureThreadKey,b("bs_int64").to_string(c));if(!(e==null)){e.go(a(c));return}},g=function(a,c){return b("LSThreadAttributionStore.bs").setSource(b("bs_int64").to_string(a.threadKey),c)};return{getUrlFromThreadKey:a,openInbox:function(a,b){g(a,b);return f(a)},openTabOrInbox:function(a,e){g(a,e);if(c)return b("bs_curry")._1(d,b("MWChatStateActions.bs").openTab(Date.now(),{shouldFocus:!0},{TAG:1,_0:a}));else return f(a)}}},[c])}f.$MAWSessionStorage$requireCond=b("cr:9871");f.$MAWThreadId$requireCond=b("cr:9873");f.useHook=a}),null);
__d("MWChatSearchIssueMAWFTSQuery.bs",["LSDatabaseDeferred.bs","LSSearchType.bs","MAWBackendBridge.bs","MAWThreadId.bs","MWChatTemporarySearchResult.bs","Promise","ReQL.bs","ReQLTable","bs_belt_Option","bs_caml_exceptions","bs_caml_format","bs_curry","bs_int64"],(function(a,b,c,d,e,f){"use strict";c=b("bs_caml_exceptions").create("MWChatSearchIssueMAWFTSQuery.FailedToFetchSearchResults");function g(a,c){c=b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"contacts").asc,{hd:b("bs_caml_format").caml_int64_of_string(a.fbid),tl:0}));return c.then(function(c){return b("Promise").resolve(c!==void 0?{displayName:c.h,id:a.fbid,imageUrl:c.b,secondaryImageUrl:void 0,isContact:!0,isInstagramAccount:!1,isInteropEligible:void 0,isGroupsXacEligible:void 0,resultType:b("MWChatTemporarySearchResult.bs").getResultType(b("LSSearchType.bs").contact),subtext:"",isVerified:!1,section:"",serverSearchResult:void 0,threadKey:void 0}:void 0)})}function h(a,c){return b("Promise").resolve({displayName:b("bs_belt_Option").getWithDefault(a.content,""),id:a.msgId,imageUrl:"",secondaryImageUrl:void 0,isContact:!1,isInstagramAccount:!1,isInteropEligible:void 0,isGroupsXacEligible:void 0,resultType:b("MWChatTemporarySearchResult.bs").getResultType(b("LSSearchType.bs").integratedMessageSearchThread),subtext:"",isVerified:!1,section:"",serverSearchResult:void 0,threadKey:b("MAWThreadId.bs").toThreadKey(a.chatId)})}function i(a,c){c=b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"threads").asc,{hd:b("MAWThreadId.bs").toThreadKey(a.threadId),tl:0}));return c.then(function(c){return b("Promise").resolve(c!==void 0?{displayName:b("bs_belt_Option").getWithDefault(c.d,""),id:b("bs_int64").to_string(b("MAWThreadId.bs").toThreadKey(a.threadId)),imageUrl:b("bs_belt_Option").getWithDefault(c.f,""),secondaryImageUrl:void 0,isContact:!1,isInstagramAccount:!1,isInteropEligible:void 0,isGroupsXacEligible:void 0,resultType:b("MWChatTemporarySearchResult.bs").getResultType(b("LSSearchType.bs").group),subtext:b("bs_belt_Option").getWithDefault(c.ba,""),isVerified:!1,section:"",serverSearchResult:void 0,threadKey:void 0}:void 0)})}function j(a){return b("LSDatabaseDeferred.bs").db.then(function(c){var d=[];a.forEach(function(a){var b;switch(a.TAG|0){case 0:b=h(a._0,c);break;case 1:b=i(a._0,c);break;case 2:b=g(a._0,c);break}d.push(b)});return b("Promise").all(d).then(function(a){var c=[];a.forEach(function(a){if(a!==void 0){c.push(a);return}});return b("Promise").resolve(c)})})}function k(a){a=a.resultType;if(a==="user")return b("LSSearchType.bs").contact;else if(a==="group")return b("LSSearchType.bs").group;else if(a==="message")return b("LSSearchType.bs").integratedMessageSearchThread;else return b("LSSearchType.bs").page}function a(a,c,d){return b("bs_curry")._1(b("MAWBackendBridge.bs").search({search:d.query}).sendAndReceive,void 0).then(j).then(function(c){return b("Promise").resolve(c.filter(function(b){return a.includes(k(b))}))})}f.FailedToFetchSearchResults=c;f.mapContact=g;f.mapMsg=h;f.mapGroupInfo=i;f.toSearchResults=j;f.getType=k;f.fetchResults=a}),null);
__d("MWChatSearchIssueMAWFTSQuery.re",["MWChatSearchIssueMAWFTSQuery.bs"],(function(a,b,c,d,e,f){a=b("MWChatSearchIssueMAWFTSQuery.bs").fetchResults;f.fetchResults=a}),null);
__d("MWV2ArmadilloDogfoodingUpsell.bs",["fbt","FBID.bs","LSWhatsAppConnectStatus.bs","MAWBackendBridge.bs","MAWThreadId.bs","MDSRow.react","MDSRowItem.react","MWPTextCommon.react","MWV2OpenTabOrThread.bs","MessagingThreadType.bs","ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","TetraButton.react","bs_caml","bs_curry","bs_int64","promiseDone","react","stylex","useArmadilloDogfoodingUpsellNUX"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={root:{backgroundColor:"nred35xi",boxShadow:"rlauoc8d"},button:{flexGrow:"buofh1pr",flexBasis:"rj1gh0hx"},imageRow:{paddingTop:"jwdofwj8"}};function l(a){var c=a.thread,d=b("ReStore.bs").useHook(void 0),e=b("ReQLSubscription.bs").useFirst(j.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(d,"contacts").asc,{hd:c.a,tl:0})},[d,JSON.stringify(c.a)]));a=j.useState(function(){return!1});var f=a[1],h=b("useArmadilloDogfoodingUpsellNUX")(),l=h[2],m=h[1],n=h[0];j.useEffect(function(){b("bs_curry")._1(n,function(a){if(a&&e!==void 0&&b("bs_caml").i64_eq(e.P,b("LSWhatsAppConnectStatus.bs").whatsappAddressable)){b("bs_curry")._1(f,function(a){return!0});return b("bs_curry")._1(l,void 0)}})},[]);h=b("MWV2OpenTabOrThread.bs").useHook(void 0);var o=h.openTabOrInbox;if(e!==void 0){h=e.p;h=h!==void 0?h:e.h;h=" with "+h+"."}else h=".";h="You can now create chats secured with end-to-end encryption. Create a chat"+h;if(a[0])return j.jsxs("div",{className:(i||(i=b("stylex")))(k.root),children:[j.jsx(b("MDSRow.react"),{paddingHorizontal:12,paddingTop:12,children:j.jsxs(b("MDSRowItem.react"),{expanding:!0,children:[j.jsx(b("MDSRow.react"),{paddingHorizontal:0,paddingTop:0,children:j.jsx(b("MDSRowItem.react"),{children:j.jsx(b("MWPTextCommon.react"),{color:"primary",type:"headline4",children:"Try End-to-End Encrypted Chats"})})}),j.jsx(b("MDSRow.react"),{paddingHorizontal:0,paddingTop:8,children:j.jsx(b("MDSRowItem.react"),{children:j.jsx(b("MWPTextCommon.react"),{color:"secondary",type:"body4",children:h})})})]})}),j.jsxs(b("MDSRow.react"),{paddingHorizontal:12,paddingTop:8,paddingVertical:12,wrap:"forward",children:[j.jsx(b("MDSRowItem.react"),{xstyle:[k.button],children:j.jsx(b("TetraButton.react"),{label:"Not Now",type:"secondary",onPress:function(a){b("bs_curry")._1(m,void 0);return b("bs_curry")._1(f,function(a){return!1})}})}),j.jsx(b("MDSRowItem.react"),{xstyle:[k.button],children:j.jsx(b("TetraButton.react"),{label:g._("Abrir chat"),type:"primary",onPress:function(a){b("bs_curry")._1(m,void 0),b("bs_curry")._1(f,function(a){return!1}),b("promiseDone")(b("bs_curry")._1(b("MAWBackendBridge.bs").createThread({contactFbid:b("FBID.bs").ofStringExn(b("bs_int64").to_string(c.a))}).sendAndReceive,void 0),function(a){return b("bs_curry")._2(o,{threadKey:b("MAWThreadId.bs").toThreadKey(a),clientThreadKey:void 0,threadType:b("MessagingThreadType.bs").secureMessageOverWaOneToOne},"chatInThread")},void 0)}})})]})]});else return null}c={styles:k,make:l};function a(a){a=a.thread;var c=a.c;if(b("bs_caml").i64_eq(c,b("MessagingThreadType.bs").oneToOne))return j.jsx(l,{thread:a});else return null}d=a;f.Impl=c;f.make=d}),null);
__d("MAWAttachmentBlob.bs",["LSSuspense.bs","MAWBackendBridge.bs","Promise","bs_belt_Option","bs_caml_format","bs_caml_option","bs_curry","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=new Map();function h(a){if(a===void 0)return b("LSSuspense.bs").$$throw(b("Promise").resolve(void 0));if(a.j===!1)return b("LSSuspense.bs").$$throw(b("Promise").resolve(void 0));var c=g.get(a.e);if(!(c==null))if(c.TAG===0)return b("LSSuspense.bs").$$throw(c._0);else return c._0;c=b("bs_curry")._1(b("MAWBackendBridge.bs").getBlobDataUrlByMediaId({mediaId:b("bs_caml_format").caml_int32_of_string(a.e)}).sendAndReceive,void 0).then(function(c){g.set(a.e,{TAG:1,_0:b("bs_belt_Option").getExn(c)});return b("Promise").resolve(void 0)})["catch"](function(a){b("recoverableViolation")("Unable to getBlobUrlByMediaId","messenger_e2ee_web",{error:b("bs_caml_option").some(a)});return b("Promise").resolve(void 0)});g.set(a.e,{TAG:0,_0:c});return b("LSSuspense.bs").$$throw(c)}function a(a,b){return h(b)}f.getAttachmentBlob=h;f.useGetAttachmentBlob=a}),null);
__d("MAWAttachmentThumbnail.bs",["LSSuspense.bs","MAWBackendBridge.bs","Promise","bs_belt_Option","bs_caml_format","bs_caml_option","bs_curry","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g=new Map();function a(a){if(a===void 0)return b("LSSuspense.bs").$$throw(b("Promise").resolve(void 0));if(a.j===!1)return b("LSSuspense.bs").$$throw(b("Promise").resolve(void 0));var c=g.get(a.e);if(!(c==null))if(c.TAG===0)return b("LSSuspense.bs").$$throw(c._0);else return c._0;c=b("bs_curry")._1(b("MAWBackendBridge.bs").getThumbnailBlobDataUrlByMediaId({mediaId:b("bs_caml_format").caml_int32_of_string(a.e)}).sendAndReceive,void 0).then(function(c){g.set(a.e,{TAG:1,_0:b("bs_belt_Option").getExn(c)});return b("Promise").resolve(void 0)})["catch"](function(a){b("recoverableViolation")("Unable to getThumbnailBlobDataUrlByMediaId","messenger_e2ee_web",{error:b("bs_caml_option").some(a)});return b("Promise").resolve(void 0)});g.set(a.e,{TAG:0,_0:c});return b("LSSuspense.bs").$$throw(c)}f.getThumbnailBlob=a}),null);
__d("MWV2ChatImagePlaceholder.bs",["BaseGlimmer.react","CometObjectFitContainer.react","MWStableImage.bs","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={glimmer:{display:"a8c37x1j",height:"datstx6m",width:"k4urcfbm"}};function a(a){var c=a.width;a=a.height;if(c===void 0)return null;if(a===void 0)return null;var d=c/a;return i.jsx(b("MWStableImage.bs").Container.make,{width:c,height:a,maxHeight:200,maxWidth:480,className:(h||(h=b("stylex")))(!1),children:i.jsx(b("CometObjectFitContainer.react"),{contentAspectRatio:d,children:i.jsx(b("BaseGlimmer.react"),{index:1,xstyle:j.glimmer}),objectFitMode:"CONTAINER_WIDTH_BASED_ASPECT_RATIO"}),aspectRatio:d})}c=a;f.styles=j;f.make=c}),null);
__d("MAWSecureAttachment.bs",["CometPlaceholder.react","MAWAttachmentBlob.bs","MAWAttachmentThumbnail.bs","MWV2Attachments.bs","MWV2ChatAudio.bs","MWV2ChatImage.bs","MWV2ChatImagePlaceholder.bs","MWV2ChatVideo.bs","MWV2Sticker.bs","MessagingAttachmentType.bs","ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","bs_belt_Option","bs_caml","bs_caml_int64","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){var c=b("ReStore.bs").useHook(void 0);return h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"attachments").asc,{hd:a.a,tl:{hd:a.e,tl:0}})},[c,a.e])}function a(a){var c=a.message,d=a.connectTop;a=a.outgoing;var e=b("ReQLSubscription.bs").useFirst(i(c));if(e===void 0)return null;var f=e.f;return h.jsx(b("MWV2Attachments.bs").Container.make,{children:b("bs_caml").i64_eq(f,b("MessagingAttachmentType.bs").image)?h.jsx(b("CometPlaceholder.react"),{children:h.jsx(b("MWV2ChatImage.bs").make,{message:c,attachment:e,getPreviewUrl:function(a){return b("MAWAttachmentThumbnail.bs").getThumbnailBlob(a)},getPlayableUrl:function(a){return b("MAWAttachmentBlob.bs").getAttachmentBlob(a)},connectTop:d,outgoing:a,disableBecauseFeatureIsNotAvailableForThreadType:!1}),fallback:h.jsx(b("MWV2ChatImagePlaceholder.bs").make,{width:b("bs_belt_Option").map(e.K,b("bs_caml_int64").to_float),height:b("bs_belt_Option").map(e.L,b("bs_caml_int64").to_float)})}):b("bs_caml").i64_eq(f,b("MessagingAttachmentType.bs").video)?h.jsx(b("MWV2ChatVideo.bs").make,{message:c,attachment:e,getPreviewUrl:function(a){return b("MAWAttachmentBlob.bs").getAttachmentBlob(a)},connectTop:d,outgoing:a,disableBecauseFeatureIsNotAvailableForThreadType:!1}):b("bs_caml").i64_eq(f,b("MessagingAttachmentType.bs").audio)?h.jsx(b("MWV2ChatAudio.bs").make,{attachment:e,getPlayableUrl:function(a){return b("MAWAttachmentBlob.bs").getAttachmentBlob(a)},outgoing:a}):b("bs_caml").i64_eq(f,b("MessagingAttachmentType.bs").animatedImage)?h.jsx(b("MWV2ChatImage.bs").make,{message:c,attachment:e,getPreviewUrl:function(a){return b("MAWAttachmentBlob.bs").getAttachmentBlob(a)},getPlayableUrl:function(a){return b("MAWAttachmentBlob.bs").getAttachmentBlob(a)},connectTop:d,outgoing:a,disableBecauseFeatureIsNotAvailableForThreadType:!1}):b("bs_caml").i64_eq(f,b("MessagingAttachmentType.bs").sticker)?h.jsx(b("MWV2Sticker.bs").make,{attachment:e,getPreviewUrl:function(a){return b("MAWAttachmentBlob.bs").getAttachmentBlob(a)}}):"Unsupported attachment type",message:c,connectTop:d})}c=a;f.useAttachments=i;f.make=c}),null);
__d("MAWEncryptionPlaceholder.bs",["fbt","MWV2TombstonedMessage.bs","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){return i.jsx(b("MWV2TombstonedMessage.bs").make,{children:g._("Esperando este mensaje. Esto puede tardar unos minutos.")})}c=a;f.make=c}),null);
__d("MAWFutureproofPlaceholder.bs",["fbt","MWV2TombstonedMessage.bs","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");c={refresh:{marginStart:"hnxzwevs",color:"oo9gr5id"}};function a(a){return i.jsx(b("MWV2TombstonedMessage.bs").make,{children:i.jsx(i.Fragment,{children:g._("You received a message but this browser can't show it.")})})}d=a;f.styles=c;f.make=d}),null);
__d("MAWUnavailablePlaceholder.bs",["fbt","MWV2TombstonedMessage.bs","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function a(a){return i.jsx(b("MWV2TombstonedMessage.bs").make,{children:g._("No se pudo entregar el mensaje")})}c=a;f.make=c}),null);
__d("MAWSecurePlaceholder.bs",["LSMessageContentType.bs","MAWEncryptionPlaceholder.bs","MAWFutureproofPlaceholder.bs","MAWUnavailablePlaceholder.bs","bs_caml","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){a=a.message;a=a.Q;if(b("bs_caml").i64_eq(a,b("LSMessageContentType.bs").encryptionPlaceholder))return h.jsx(h.Suspense,{children:h.jsx(b("MAWEncryptionPlaceholder.bs").make,{}),fallback:null});else if(b("bs_caml").i64_eq(a,b("LSMessageContentType.bs").futureproofPlaceholder))return h.jsx(h.Suspense,{children:h.jsx(b("MAWFutureproofPlaceholder.bs").make,{}),fallback:null});else if(b("bs_caml").i64_eq(a,b("LSMessageContentType.bs").unavailablePlaceholder))return h.jsx(h.Suspense,{children:h.jsx(b("MAWUnavailablePlaceholder.bs").make,{}),fallback:null});else return null}c=a;f.make=c}),null);
__d("MAWSecureAttachmentRenderer.bs",["MAWMsg.bs","MAWSecureAttachment.bs","MAWSecurePlaceholder.bs","MWV2MessageParsingUtils.bs","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a,c,d,e){c=b("MWV2MessageParsingUtils.bs").MessageWithAttachments.shouldConnectTop(a,c);d=b("MWV2MessageParsingUtils.bs").MessageWithAttachments.shouldConnectBottom(a,d);return h.jsx(h.Suspense,{children:b("MAWMsg.bs").isMediaMsg(a)?h.jsx(b("MAWSecureAttachment.bs").make,{message:a,connectTop:c,connectBottom:d,outgoing:e}):h.jsx(b("MAWSecurePlaceholder.bs").make,{message:a}),fallback:null})}f.render=a}),null);
__d("MAWMessageRetryButton.bs",["MAWBackendBridge.bs","bs_curry","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=a.message;return h.jsx("button",{onClick:function(a){return b("bs_curry")._1(b("MAWBackendBridge.bs").retryUploadMedia({msgId:c.e}).fireAndForget,void 0)},children:"Retry"})}c=a;f.make=c}),null);
__d("MAWFetchMoreMessages.bs",["MAWBackendBridge.bs","MAWThreadId.bs","ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","bs_curry","promiseDone","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("ReStore.bs").useHook(void 0),d=b("ReQLSubscription.bs").useFirst(h.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"messages_ranges_v2__generated").asc,{hd:a,tl:0})},[c,a]));return h.useCallback(function(c){if(d===void 0)return;c=b("MAWThreadId.bs").ofThreadKey(a);if(c){b("promiseDone")(b("bs_curry")._1(b("MAWBackendBridge.bs").loadMoreMsgs({threadId:c._0,offsetMsgId:d.c,numMsgs:10}).sendAndReceive,void 0),function(a){},void 0);return}},[a,d])}f.useHook=a}),null);
__d("MAWMarkThreadAsRead.bs",["LSAuthorityLevel.bs","MAWJob.bs","MAWThreadId.bs","Promise","ReQL.bs","ReQLTable","ReStore.bs","bs_caml","promiseDone","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a){var c=b("ReStore.bs").useHook(void 0);return h.useCallback(function(d){if(!b("bs_caml").i64_ge(a.Z,b("LSAuthorityLevel.bs").authoritative))return;d=b("ReQL.bs").first(b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"messages").index("threadKeyPrimarySortKeyMessageId").desc,{hd:a.a,tl:0})).then(function(c){if(c!==void 0){var d=b("MAWThreadId.bs").ofThreadKey(a.a);d&&b("MAWJob.bs").markThreadAsRead.fireAndForget(d._0,c.e)}return b("Promise").resolve(void 0)});b("promiseDone")(d,void 0,void 0)},[JSON.stringify(a.Z),JSON.stringify(a.a),c])}f.useHook=a}),null);
__d("MAWSecureThreadDetail.bs",["FBID.bs","MAWFetchMoreMessages.bs","MAWJob.re","MAWMarkThreadAsRead.bs","MAWSecureAttachmentRenderer.bs","MWChatLoadMoreItemsIncrementally.bs","MWInboxThreadMessagesSpinner.bs","MWV2ContextBanner.bs","MWV2ConversationScrollerRefs.bs","MWV2CurrentVisibleMessage.bs","MWV2MessageList.bs","MWV2MessageScroller.bs","MWV2OpenThreadDetail.bs","ReQL.bs","ReQLSubscription.bs","ReQLTable","ReStore.bs","WAJids","bs_caml_array","bs_int64","react"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){var c=b("ReStore.bs").useHook(void 0),d=b("ReQLSubscription.bs").useArray(h.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQLTable").table(c,"participants").asc,{hd:a.a,tl:0}),function(a){return b("WAJids").toUserJid(b("FBID.bs").ofStringExn(b("bs_int64").to_string(a.b)))})},[c,b("bs_int64").to_string(a.a)]));h.useEffect(function(){b("MAWJob.re").getDevices(new Set(d)).fireAndForget()},[d])}function a(a){a=a.thread;var c=b("MAWFetchMoreMessages.bs").useHook(a.a),d=b("MWV2ConversationScrollerRefs.bs").useHook(void 0),e=b("MWV2CurrentVisibleMessage.bs").useHook(a,d.scrollerRef),f=e.messageRange,g=e.messageRange;f=b("MWChatLoadMoreItemsIncrementally.bs").useLoadMore(f!==void 0?f.i:!1,void 0,void 0,b("MWV2OpenThreadDetail.bs").useMessages(e.messageRange,a),c,g!==void 0?g.h:!1);c=f[2];g=f[0];i(a);var j=e.messageRange;j=j!==void 0?j.i:!1;return h.jsx(h.Fragment,{children:h.jsxs(b("MWV2MessageScroller.bs").make,{children:[c?h.jsx(b("MWInboxThreadMessagesSpinner.bs").make,{}):h.jsx(b("MWV2ContextBanner.bs").make,{thread:a}),h.jsx(b("MWV2MessageList.bs").make,{messages:g,thread:a,isSecureThread:!0,messageElementRefs:e.messageElementRefs.current,scrollerRefs:d,renderAttachment:b("MAWSecureAttachmentRenderer.bs").render}),j?h.jsx(b("MWInboxThreadMessagesSpinner.bs").make,{}):null],thread:a,fetchMore:f[1],markThreadAsRead:b("MAWMarkThreadAsRead.bs").useHook(a),lastMessageToCalculateIfThreadIsRead:g.length!==0?b("bs_caml_array").get(g,g.length-1|0):void 0,scrollerRefs:d,hasMoreBefore:c,hasMoreAfter:j})})}c=b("MAWSecureAttachmentRenderer.bs").render;d=a;f.renderAttachment=c;f.make=d}),null);
__d("MWV2AudioPlayer.bs",["CometProgressRingIndeterminate.react","MWChatAudioLog.bs","MWConsole","MWLSThreadDisplayContext.bs","MWV2ColorUtils.bs","MWV2ComposerVoiceRecorder.bs","MWV2Theme.bs","Promise","bs_caml_int64","bs_caml_option","bs_curry","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react");c=56;var j={common:{flexGrow:"buofh1pr",alignSelf:"ns4p8fja",display:"j83agx80",justifyContent:"i1fnvgqd",alignItems:"bp9cbjyn"},transparent:{position:"l9j0dhe7",height:"datstx6m",paddingTop:"jb3vyjys",paddingEnd:"rz4wbd8a",paddingBottom:"qt6c0cv9",paddingStart:"a8nywdso",overflowX:"ni8dbmo4",overflowY:"stjgntxs",":after":{content:"i6jr3soi",display:"k4aqvg2j",position:"g8e0jvg7",top:"geli4699",bottom:"fkq5d175",start:"oskkt2ky",end:"i4sm7uox",borderTopStyle:"fin0ypmt",borderEndStyle:"j10cs0yc",borderBottomStyle:"aw4oqepz",borderStartStyle:"fgzft9zi",borderTopWidth:"dzm1kfb5",borderEndWidth:"oc4jhviy",borderBottomWidth:"h624itt5",borderStartWidth:"reaovrpu",borderTopColor:"hwba8txa",borderEndColor:"dzgn2jm7",borderBottomColor:"n4g4bzxc",borderStartColor:"sdxs9vve",borderTopStartRadius:"cur584us",borderTopEndRadius:"gt092ec4",borderBottomEndRadius:"t02hhl22",borderBottomStartRadius:"lm2lsiji",pointerEvents:"yfudjqg5"}}};function k(a,b){if(typeof b==="number")if(typeof a==="number")return{TAG:0,_0:0};else return a;if(b.TAG===0)if(typeof a==="number")return a;else if(a.TAG===0)return{TAG:1,_0:a._0};else return{TAG:0,_0:b._0?0:a._0};b=b._0;if(typeof a==="number")return a;else if(a.TAG===0)return{TAG:0,_0:b};else return{TAG:1,_0:b}}function a(a){var c=a.attachment,d=a.getPlayableUrl;a=a.outgoing;var e=i.useReducer(k,0),f=e[1],g=e[0],l=b("bs_curry")._1(d,c);e=b("MWV2Theme.bs").useHook(void 0);d=a&&e.gradientColors.length>1;e=a?d?"transparent":b("MWV2ColorUtils.bs").int64ToHex(e.threadTheme.c):"var(--wash)";var m=g!==0,n=b("MWLSThreadDisplayContext.bs").useHook(void 0);n={cursor:m?"pointer":"default",width:n!==void 0&&n?"218px":"180px"};var o=d?void 0:"18px";o!==void 0&&(n.borderRadius=o);o=n;var p=i.useRef(void 0);i.useEffect(function(){if(l===void 0)return;var a=new Audio(l),c=function(a){a=p.current;if(a===void 0)return;a=b("bs_caml_option").valFromOption(a).currentTime;return f({TAG:1,_0:a})},d=function(c){p.current=b("bs_caml_option").some(a);return f(0)},e=function(a){return f({TAG:0,_0:!0})};a.addEventListener("canplay",d);a.addEventListener("timeupdate",c);a.addEventListener("ended",e);return function(b){a.removeEventListener("canplay",d),a.removeEventListener("timeupdate",c),a.removeEventListener("ended",e)}},[l]);n=function(a){a=p.current;if(a===void 0)return f({TAG:0,_0:!1});a=b("bs_caml_option").valFromOption(a);if(typeof g==="number")return f({TAG:0,_0:!1});if(g.TAG===0){a.play().then(function(a){f({TAG:0,_0:!1});return b("Promise").resolve(void 0)})["catch"](function(a){b("MWChatAudioLog.bs").logBrowserDenyAccess(void 0);return b("Promise").resolve(void 0)});return}a.pause();return f({TAG:0,_0:!1})};var q=b("MWV2Theme.bs").useBottom(void 0);c=c.bd;c=c!==void 0?b("bs_caml_int64").to_float(c)/1e3:0;var r=i.useRef(void 0),s=function(a){var b=r.current;if(!(b==null)){a.stopPropagation();return b.updateHighlight(0)}},t=p.current,u;u=typeof g==="number"||g.TAG===0?!1:!0;var v;v=typeof g==="number"||g.TAG!==0?!1:g._0===0;t={duration:t!==void 0?b("bs_caml_option").valFromOption(t).duration:0,audioEl:p,isProgressing:u,isCompleted:v,outgoing:a};u=typeof g==="number"?void 0:g._0;u!==void 0&&(t.currentTime=b("bs_caml_option").valFromOption(u));if(g===0)v=i.jsx("div",{onMouseMove:m?s:void 0,className:(h||(h=b("stylex")))(b("MWV2ComposerVoiceRecorder.bs").styles.playbackButtonContainer,b("MWV2ComposerVoiceRecorder.bs").PlaybackButton.styles.pressable),children:i.jsx(b("CometProgressRingIndeterminate.react"),{color:"disabled",size:16})});else{u=typeof g==="number"||g.TAG===0?b("MWV2ComposerVoiceRecorder.bs").playLabel:b("MWV2ComposerVoiceRecorder.bs").pauseLabel;var w;if(typeof g==="number")w=null;else if(g.TAG===0){var x={},y=a?q:void 0;y!==void 0&&(x.color=b("bs_caml_option").valFromOption(y));w=i.jsx(b("MWV2ComposerVoiceRecorder.bs").PlayIcon.make,x)}else{y={};x=a?q:void 0;x!==void 0&&(y.color=b("bs_caml_option").valFromOption(x));w=i.jsx(b("MWV2ComposerVoiceRecorder.bs").PauseIcon.make,y)}x={label:u,icon:w};y=g===0?void 0:n;y!==void 0&&(x.onPress=b("bs_caml_option").valFromOption(y));v=i.jsx("div",{onMouseMove:m?s:void 0,className:(h||(h=b("stylex")))(b("MWV2ComposerVoiceRecorder.bs").styles.playbackButtonContainer),children:i.jsx(b("MWV2ComposerVoiceRecorder.bs").PlaybackButton.make,x)})}u={time:typeof g==="number"?0:Math.max(c-g._0,0)};w=a?q:void 0;w!==void 0&&(u.color=b("bs_caml_option").valFromOption(w));return i.jsx(b("MWV2ComposerVoiceRecorder.bs").KeyCommands.make,{audioEl:p,children:i.jsx(b("MWV2ComposerVoiceRecorder.bs").Container.make,{scrubberRef:r,hasScrubber:m,audioEl:p,color:e,testid:"mw_audio_player",style:o,children:i.jsxs("div",{className:(h||(h=b("stylex")))(j.common,d?j.transparent:!1),children:[i.jsx(b("MWV2ComposerVoiceRecorder.bs").Progress.make,t),typeof g==="number"?null:i.jsx(b("MWV2ComposerVoiceRecorder.bs").ScreenreaderLabel.make,{currentTime:g._0,duration:c}),i.jsx(b("MWV2ComposerVoiceRecorder.bs").Highlight.make,{outgoing:a,ref:r}),v,i.jsx(b("MWV2ComposerVoiceRecorder.bs").Timer.make,u)]})})})}d=36;e=a;f.borderWidth=d;f.borderRadius=c;f.styles=j;f.reducer=k;f.make=e}),null);
__d("formatFileSize",["fbt"],(function(a,b,c,d,e,f,g,h){var i=[function(a){return h._("{value} B",[h._param("value",a)])},function(a){return h._("{value} KB",[h._param("value",a)])},function(a){return h._("{value} MB",[h._param("value",a)])},function(a){return h._("{value} GB",[h._param("value",a)])},function(a){return h._("{value} TB",[h._param("value",a)])},function(a){return h._("{value} PB",[h._param("value",a)])},function(a){return h._("{value} EB",[h._param("value",a)])}],j=0;function a(a){if(a==void 0)return null;if(a===0)return i[j](0);var b=Math.floor(Math.log(Math.abs(a))/Math.log(1024));a=a/Math.pow(1024,b);a=Math.round(a*100)/100;return i[b](a)}g["default"]=a}),98);
__d("MWV2ChatFileV2.bs",["fbt","ConstUriUtils","FBID.bs","LineClamp.react","MWChatFilePreview.bs","MWChatMessageId.bs","MWFilePressable.bs","MWV2ChatAttachmentParserUtils.bs","MessengerFilePreviewGenerationEntryPoint","TetraTextPairing.react","bs_belt_Option","bs_caml_int64","bs_caml_option","bs_int64","formatFileSize","qex","react","recoverableViolation","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={root:{display:"j83agx80",alignItems:"bp9cbjyn",userSelect:"abiwlrkh"},content:{flexGrow:"buofh1pr",color:"oo9gr5id",fontWeight:"lrazzd5p",wordBreak:"qv66sw1b",paddingTop:"pybr56ya",paddingEnd:"d1544ag0",paddingBottom:"f10w8fjw",paddingStart:"tw6a2znq"},filePreview:{flexDirection:"cbu4d94t",alignItems:"ll8tlv6m",maxWidth:"ercu3ouj"},fileSize:{paddingTop:"jktsbyx5"}};function a(a){var c=a.attachment;a=j.useMemo(function(){var a=c.h;if(a!==void 0)return a;else return g._("Archivo")},[c]);var d=j.useMemo(function(){var a=b("bs_belt_Option").map(c.i,b("bs_caml_int64").to_int32);if(a!==void 0)return b("formatFileSize")(a);else return null},[c]),e=j.useMemo(function(){var a=c.A;if(a!==void 0){var d=b("MWV2ChatAttachmentParserUtils.bs").getBlobUrl(a);if(d!==void 0)return b("ConstUriUtils").getUri(d);else return b("ConstUriUtils").getUri(a)}b("recoverableViolation")("Attachment has no playable_url "+c.e,"messenger_comet")},[c]),f=b("qex")._("183")===!0&&b("bs_belt_Option").isSome(c.F);f={messageID:b("MWChatMessageId.bs").makeSent(b("bs_int64").to_string(c.a),c.c,b("bs_int64").to_string(c.b)),entryPoint:b("MessengerFilePreviewGenerationEntryPoint").CHAT_FILE_V4,children:j.jsxs("div",{className:(i||(i=b("stylex")))(k.root,f?k.filePreview:!1),children:[j.jsx(b("MWChatFilePreview.bs").make,{attachment:c,withPreview:f}),j.jsx("div",{className:i(k.content),children:j.jsxs(b("LineClamp.react"),{lines:3,children:[j.jsx(b("TetraTextPairing.react"),{headline:a,level:4,headlineLineLimit:3}),j.jsx("div",{className:i(k.fileSize),children:j.jsx(b("TetraTextPairing.react"),{body:d,level:4,bodyLineLimit:1,bodyColor:"secondary"})})]})})]})};a=b("FBID.bs").ofString(c.e);a!==void 0&&(f.attachmentID=b("bs_caml_option").valFromOption(a));d=b("bs_belt_Option").map(e,function(a){return a.toString()});d!==void 0&&(f.url=d);return j.jsx(b("MWFilePressable.bs").make,f)}c=a;f.styles=k;f.make=c}),null);
/**
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
  *
  * @noflow
  * @nolint
  * @preventMunge
  * @preserve-invariant-messages
  * @generated
  * @preserve-whitespace
  * @fullSyntaxTransform
  */__d("OutlineSelectionHelpers.prod",["Outline","OutlineHashtagNode","OutlineParagraphNode"],(function $module_OutlineSelectionHelpers_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function v(a){throw Error("Minified Outline error #"+a+"; see codes.json for the full message or "+"use the non-minified dev environment for full errors and additional helpful warnings.");}function y(a){return a.isImmutable()||a.isInert();}
function z(a){a=a.getLatest();var b=a.clone();b.__flags=a.__flags;b.__parent=a.__parent;require("Outline").isBlockNode(a)?b.__children=Array.from(a.__children):require("Outline").isTextNode(a)&&(b.__format=a.__format);return b;}function A(a,b){var d=a.anchor;a=a.focus;var f=d.getNode(),c=a.getNode();if(f===c&&"text"===d.type&&"text"===a.type){var g=d.offset,k=a.offset;var e=g<k;c=e?g:k;k=e?k:g;g=k-1;c!==g&&(f=f.getTextContent().slice(c,k),/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(f)||(b?a.offset=g:d.offset=g));}}
function B(a){var b=a.anchor;if("text"===b.type){b=b.getNode();var d=b.getTextContent();a=a.anchor.offset;if(0===a&&b.isSimpleText()){if(a=b.getPreviousSibling(),require("Outline").isTextNode(a)&&require("OutlineHashtagNode").isHashtagNode(a)){a.select();var f=a.getTextContent();a.setTextContent(f+d);b.remove();}}else require("OutlineHashtagNode").isHashtagNode(b)&&a===b.getTextContentSize()&&(a=b.getNextSibling(),require("Outline").isTextNode(a)&&a.isSimpleText()&&(f=a.getTextContent(),b.setTextContent(d+f),a.remove()));}}
function C(a,b){if(a.isCollapsed()){D(a,b,"character",!1);var d=a.anchor,f=a.focus;if(!a.isCollapsed()){f="text"===f.type?f.getNode():null;d="text"===d.type?d.getNode():null;if(null!==f&&f.isSegmented()){E(f,b);return;}if(null!==d&&d.isSegmented()){E(d,b);return;}A(a,b);}else if(b&&(b=d.getNode().getParentOrThrow(),f=b.getType(),0===d.offset&&"paragraph"!==f)){var c=require("OutlineParagraphNode").createParagraphNode();b.getChildren().forEach(function(g){return c.append(g);});"listitem"===f?(a=b.getParentOrThrow(),1===a.getChildrenSize()?a.replace(c):(
a.insertBefore(c),b.remove())):b.replace(c);return;}}F(a);B(a);}function E(a,b){var d=a.getTextContent().split(/\s/g);b?d.pop():d.shift();d=d.join(" ");var f=b?a.getNextSibling():a.getPreviousSibling();require("Outline").isTextNode(f)&&(""===d?a.remove():a.setTextContent(d),b?f.select(0,0):f.select());}
function D(a,b,d,f){var c=window.getSelection();var g=a.focus.getNode();var k=a.focus.offset,e=b?g.getPreviousSibling():g.getNextSibling();if(!b||0!==k||null!==e||null!==g.getParentOrThrow().getPreviousSibling()){var n=g.getTextContentSize();g=b?0===k&&""===g.getTextContent()&&!y(g):k===n&&require("Outline").isTextNode(e)&&!y(e)&&""===e.getTextContent();c.modify(f?"move":"extend",b?"backward":"forward",d);g&&"character"===d&&c.modify(f?"move":"extend",b?"backward":"forward",d);0<c.rangeCount&&(b=c.getRangeAt(0),
a.applyDOMRange(b),f||c.anchorNode===b.startContainer&&c.anchorOffset===b.startOffset||a.swapPoints());}}function F(a){G(a,"");}function H(a,b){var d=require("Outline").createLineBreakNode();b?K(a,[d],!0):K(a,[d])&&d.selectNext(0,0);}
function K(a,b,d){var _a;a.isCollapsed()||F(a);a=a.anchor;"text"!==a.type&&v(0);var f=a.offset,c=a.getNode(),g=c.getTextContent().length;a=[];var k=c.getNextSiblings(),e=c.getTopParentBlockOrThrow();if(0===f)f=require("Outline").createTextNode(""),c.insertBefore(f),a.push(c);else if(f===g)f=c;else{if(y(c))return!1;var _c$splitText=c.splitText(f);f=_c$splitText[0];c=_c$splitText[1];a.push(c);}c=f;(_a=a).push.apply(_a,k);for(k=0;k<b.length;k++){g=b[k],require("Outline").isBlockNode(g)&&require("Outline").isTextNode(f)&&(f=e),f.insertAfter(g),f=g;}if(require("Outline").isBlockNode(f)){if(b=f.getLastTextNode(),require("Outline").isTextNode(b)||v(4),d?
c.select():b.select(),0!==a.length)for(d=b,b=0;b<a.length;b++){e=a[b],d.insertAfter(e),d=e;}}else require("Outline").isTextNode(f)?d?c.select():f.select():(a=f.getPreviousSibling(),require("Outline").isTextNode(a)&&a.select());return!0;}
function G(a,b){var d=a.getNodes(),f=d.length,c=a.anchor,g=a.focus,k=a.textFormat,e=d[0];require("Outline").isTextNode(e)||v(5);"text"===c.type&&"text"===g.type||v(0);var n=c.offset,h=g.offset;g=e.getTextContent().length;var p=e===c.getNode();if(e.isSegmented()||e.isImmutable()||!e.canInsertTextAtEnd())if(a.isCollapsed()&&h===g){if(c=e.getNextSibling(),require("Outline").isTextNode(c)||(c=require("Outline").createTextNode(),e.insertAfter(c)),c.select(0,0),e=c,""!==b){G(a,b);return;}}else e.isSegmented()&&(c=require("Outline").createTextNode(e.getTextContent()),e.replace(c,
!0),e=c);var m;if(1===f){if(y(e))d=require("Outline").createTextNode(b),e.replace(d),d.select();else{d=e.getFormat();m=n>h?h:n;n=n>h?n:h;if(m===n&&d!==k)if(""===e.getTextContent())e.setFormat(k);else{var _e$splitText=e.splitText(m);d=_e$splitText[0];e=require("Outline").createTextNode(b);e.setFormat(k);d.insertAfter(e);e.select();return;}e.spliceText(m,n-m,b,!0);e.isComposing()&&"text"===a.anchor.type&&(a.anchor.offset-=b.length);}}else{k=f-1;var r=d[k];f=new Set(e.getParents());c=new Set(r.getParents());var q=e.getParent();var w=r.getParent();var I=!1,J=!1;m=p?
n:h;n=p?h:n;require("Outline").isTextNode(r)&&n!==r.getTextContentSize()?(r.isSegmented()&&(h=require("Outline").createTextNode(r.getTextContent()),r.replace(h,!0),r=h),r.spliceText(0,n,"",!1)):(r.remove(),J=!0);if(require("Outline").isBlockNode(q)&&require("Outline").isBlockNode(w)){n=w.getChildren();h=new Set(d);p=q.is(w);for(q=n.length-1;0<=q;q--){var x=n[q];if(x.is(e))break;x.isAttached()&&(!h.has(x)||x.is(r)?p||e.insertAfter(x):x.remove());}if(!p)for(n=w;null!==n;){0===n.getChildrenSize()&&c["delete"](n),n=n.getParent();}}require("Outline").isTextNode(e)&&!y(e)?(e.spliceText(m,g-
m,b,!0),e.isComposing()&&"text"===a.anchor.type&&(a.anchor.offset-=b.length)):(I=!0,b=require("Outline").createTextNode(b),e.replace(b),b.select());for(e=1;e<k;e++){b=d[e],!I&&f.has(b)||!J&&c.has(b)||b.remove();}}}exports.deleteBackward=function(a){C(a,!0);};exports.deleteForward=function(a){C(a,!1);};exports.deleteLineBackward=function(a){a.isCollapsed()&&D(a,!0,"lineboundary",!1);F(a);};exports.deleteLineForward=function(a){a.isCollapsed()&&D(a,!1,"lineboundary",!1);F(a);};
exports.deleteWordBackward=function(a){a.isCollapsed()&&D(a,!0,"word",!1);F(a);};exports.deleteWordForward=function(a){a.isCollapsed()&&D(a,!1,"word",!1);F(a);};
exports.extractSelection=function(a){var _k$splitText,_e$splitText2;var b=a.getNodes(),d=b.length;var f=d-1;var c=a.anchor,g=a.focus,k=b[0];var e=b[f];require("Outline").isTextNode(k)&&require("Outline").isTextNode(e)||v(3);"text"===c.type&&"text"===g.type||v(0);c=c.offset;g=g.offset;if(1===d)return a=c>g?g:c,b=k.splitText(a,c>g?c:g),[0===a?b[0]:b[1]];a=(d=k===a.anchor.getNode())?c:g;c=d?g:c;0!==a&&(_k$splitText=k.splitText(a),k=_k$splitText[1],_k$splitText);b[0]=k;k=e.getTextContent().length;c!==k&&(_e$splitText2=e.splitText(c),e=_e$splitText2[0],_e$splitText2);b[f]=e;return b;};
exports.formatText=function(a,b){var d=a.getNodes(),f=d.length-1;var c=d[0],g=d[f];require("Outline").isTextNode(c)&&require("Outline").isTextNode(g)||v(3);if(a.isCollapsed())a.toggleTextFormatType(b);else{var k=a.anchor,e=a.focus;"text"===k.type&&"text"===e.type||v(0);var n=c.getTextContent().length,h=e.offset,p=c.getTextNodeFormat(b,null),m=k.offset;k=(e=c===a.anchor.getNode())?m:h;e=e?h:m;if(k===c.getTextContentSize()){var q=c.getNextSibling();require("Outline").isTextNode(q)&&(k=m=0,c=q,p=c.getTextNodeFormat(b,null));}if(c===g)require("Outline").isTextNode(c)&&(
k=m>h?h:m,e=m>h?m:h,k!==e&&(0===k&&e===n?(c.setFormat(p),c.select(k,e)):(a=c.splitText(k,e),a=0===k?a[0]:a[1],a.setFormat(p),a.select(0,e-k))));else{var _c$splitText2,_g$splitText;0!==k&&((_c$splitText2=c.splitText(k),c=_c$splitText2[1],_c$splitText2),k=0);c.setFormat(p);p=g.getTextNodeFormat(b,p);n=g.getTextContent().length;e!==n&&(_g$splitText=g.splitText(e),g=_g$splitText[0],_g$splitText);g.setFormat(p);for(n=1;n<f;n++){h=d[n],m=h.getKey(),require("Outline").isTextNode(h)&&m!==c.getKey()&&m!==g.getKey()&&!h.isImmutable()&&(m=h.getTextNodeFormat(b,p),h.setFormat(m));}a.setTextNodeRange(c,k,g,e);}}};
exports.getNodesInRange=function(a){var b=a.anchor,d=a.focus;"text"===b.type&&"text"===d.type||v(0);var f=b.getNode(),c=d.getNode();b=b.offset;var g=d.offset;if(f===c){if(require("Outline").isTextNode(f))return f=z(f),a=(c=g>b)?b:g,b=c?g:b,f.__text=f.__text.slice(a,b),a=f.getKey(),{range:[a],nodeMap:[[a,f]]};v(0);}f=a.getNodes();var k=f[0],e=k===a.anchor.getNode();c=[];d=new Map();a=e?b:g;b=e?g:b;g=f.length;k=k.getParentOrThrow();e=k.getKey();var n=new Set();for(var r=0;r<g;r++){var h=f[r];if(!h.isInert()){var p=h.getParent(),
m=h.getKey();if(require("Outline").isTextNode(h)&&!h.isSegmented()&&!h.isImmutable()){var q=h.getTextContent();0===r?(h=z(h),h.__text=q.slice(a,q.length)):r===g-1&&(h=z(h),h.__text=q.slice(0,b));}d.has(m)||d.set(m,h);if(p===k&&null!==p)c.push(m),h=h.getTopParentBlockOrThrow(),n.add(h.getKey());else{m=!1;if(!require("Outline").isRootNode(p))for(p=!1;null!==h;){q=h.getKey();if(q===e)p=!0;else if(p){m=h.getLatest();h=m.clone();h.__flags=m.__flags;h.__parent=m.__parent;require("Outline").isBlockNode(m)?h.__children=Array.from(m.__children):require("Outline").isTextNode(m)&&(
h.__format=m.__format);require("Outline").isBlockNode(h)||v(1);m=h.__children;var w=m.indexOf(e);-1===w&&v(2);m.splice(0,w+1);m=!0;}d.has(q)||d.set(q,h);q=h.getParent();if(require("Outline").isRootNode(q))break;h=q;}null!==h&&(h=h.getKey(),!n.has(h)||m)&&(n.add(h),c.push(h));}}}return{range:c,nodeMap:Array.from(d.entries())};};exports.insertLineBreak=H;exports.insertNodes=K;
exports.insertParagraph=function(a){a.isCollapsed()||F(a);var b=a.anchor;"text"!==b.type&&v(0);var d=b.getNode();if(!d.isSegmented()){var _d$splitText;var f=d.getTextContent().length,c=d.getNextSiblings().reverse(),g=d.getParentBlockOrThrow();b=b.offset;0===b?c.push(d):(b===f?(b=require("Outline").createTextNode(""),b.setFlags(d.getFlags()),c.push(b)):((_d$splitText=d.splitText(b),b=_d$splitText[1],_d$splitText),c.push(b)),b=0);d=g.insertNewAfter(a);if(null===d)H(a);else if(require("Outline").isBlockNode(d)){a=c.length;f=null;for(var k=0;k<a;k++){var e=c[k];null===f?d.append(e):f.insertBefore(e);
f=e;}c=c[a-1];require("Outline").isTextNode(c)&&c.select(b,b);c=g.getFirstChild();b=g.getLastChild();if(null===c||null===b||b.isImmutable()||b.isSegmented()||!require("Outline").isTextNode(b))c=require("Outline").createTextNode(""),g.append(c);}}};exports.insertRichText=function(a,b){var d=b.split(/\r?\n/);if(1===d.length)G(a,b);else{b=[];var f=d.length;for(var c=0;c<f;c++){b.push(require("Outline").createTextNode(d[c])),c!==f-1&&b.push(require("Outline").createLineBreakNode());}K(a,b);}};exports.insertText=G;exports.moveBackward=function(a,b,d){D(a,!d,"character",!b);};
exports.moveEnd=function(a){a=a.anchor.getNode();require("Outline").isTextNode(a)&&a.select();};exports.moveForward=function(a,b,d){D(a,d,"character",!b);};exports.moveWordBackward=function(a,b,d){D(a,!d,"word",!b);};exports.moveWordForward=function(a,b,d){D(a,d,"word",!b);};exports.removeText=F;exports.selectAll=function(a){var b=a.anchor.getNode().getTopParentBlockOrThrow().getParentOrThrow();var d=b.getFirstTextNode();b=b.getLastTextNode();null!==d&&null!==b&&a.setTextNodeRange(d,0,b,b.getTextContentSize());};
exports.updateCaretSelectionForAdjacentHashtags=B;exports.updateCaretSelectionForRange=D;exports.updateCaretSelectionForUnicodeCharacter=A;}),null);